{"code":"(this[\"webpackJsonponline-polling\"]=this[\"webpackJsonponline-polling\"]||[]).push([[16],{1601:function(t,e,n){\"use strict\";n.r(e),n.d(e,\"MetamaskAdapter\",(function(){return k}));var r=n(1),a=n(11),i=n(6),s=n(7),c=n(12),o=n(45),h=n(35),u=n(9),d=n(10),p=n(14),l=n.n(p),m=n(641),b=n.n(m),f=n(13),k=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(i.a)(this,n);var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=e.call(this),l()(Object(c.a)(t),\"adapterNamespace\",f.c.EIP155),l()(Object(c.a)(t),\"currentChainNamespace\",f.f.EIP155),l()(Object(c.a)(t),\"type\",f.a.EXTERNAL),l()(Object(c.a)(t),\"name\",f.i.METAMASK),l()(Object(c.a)(t),\"status\",f.d.NOT_READY),l()(Object(c.a)(t),\"rehydrated\",!1),l()(Object(c.a)(t),\"metamaskProvider\",null),t.chainConfig=r.chainConfig||null,t}return Object(s.a)(n,[{key:\"provider\",get:function(){return this.status===f.d.CONNECTED&&this.metamaskProvider?this.metamaskProvider:null},set:function(t){throw new Error(\"Not implemented\")}},{key:\"init\",value:function(){var t=Object(a.a)(Object(r.a)().mark((function t(e){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(o.a)(Object(h.a)(n.prototype),\"checkInitializationRequirements\",this).call(this),t.next=3,b()({mustBeMetaMask:!0});case 3:if(this.metamaskProvider=t.sent,this.metamaskProvider){t.next=6;break}throw f.j.notInstalled(\"Metamask extension is not installed\");case 6:if(this.status=f.d.READY,this.emit(f.b.READY,f.i.METAMASK),t.prev=8,!e.autoConnect){t.next=13;break}return this.rehydrated=!0,t.next=13,this.connect();case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(8),this.emit(f.b.ERRORED,t.t0);case 18:case\"end\":return t.stop()}}),t,this,[[8,15]])})));return function(e){return t.apply(this,arguments)}}()},{key:\"setAdapterSettings\",value:function(t){}},{key:\"connect\",value:function(){var t=Object(a.a)(Object(r.a)().mark((function t(){var e=this;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(o.a)(Object(h.a)(n.prototype),\"checkConnectionRequirements\",this).call(this),this.chainConfig||(this.chainConfig=Object(f.m)(f.f.EIP155,1)),this.status=f.d.CONNECTING,this.emit(f.b.CONNECTING,{adapter:f.i.METAMASK}),this.metamaskProvider){t.next=6;break}throw f.k.notConnectedError(\"Not able to connect with metamask\");case 6:return t.prev=6,t.next=9,this.metamaskProvider.request({method:\"eth_requestAccounts\"});case 9:if(this.metamaskProvider.chainId===this.chainConfig.chainId){t.next=13;break}return t.next=13,this.switchChain(this.chainConfig);case 13:if(this.status=f.d.CONNECTED,this.provider){t.next=16;break}throw f.k.notConnectedError(\"Failed to connect with provider\");case 16:return this.provider.once(\"disconnect\",(function(){e.disconnect()})),this.emit(f.b.CONNECTED,{adapter:f.i.METAMASK,reconnected:this.rehydrated}),t.abrupt(\"return\",this.provider);case 21:throw t.prev=21,t.t0=t.catch(6),this.status=f.d.READY,this.rehydrated=!1,this.emit(f.b.ERRORED,t.t0),f.k.connectionError(\"Failed to login with metamask wallet\");case 27:case\"end\":return t.stop()}}),t,this,[[6,21]])})));return function(){return t.apply(this,arguments)}}()},{key:\"disconnect\",value:function(){var t=Object(a.a)(Object(r.a)().mark((function t(){var e,n,a=arguments;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>0&&void 0!==a[0]?a[0]:{cleanup:!1},this.status===f.d.CONNECTED){t.next=3;break}throw f.k.disconnectionError(\"Not connected with wallet\");case 3:null===(e=this.provider)||void 0===e||e.removeAllListeners(),n.cleanup?(this.status=f.d.NOT_READY,this.metamaskProvider=null):this.status=f.d.READY,this.rehydrated=!1,this.emit(f.b.DISCONNECTED);case 7:case\"end\":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:\"getUserInfo\",value:function(){var t=Object(a.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.status===f.d.CONNECTED){t.next=2;break}throw f.k.notConnectedError(\"Not connected with wallet, Please login/connect first\");case 2:return t.abrupt(\"return\",{});case 3:case\"end\":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:\"switchChain\",value:function(){var t=Object(a.a)(Object(r.a)().mark((function t(e){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.metamaskProvider){t.next=2;break}throw f.k.notConnectedError(\"Not connected with wallet\");case 2:return t.prev=2,t.next=5,this.metamaskProvider.request({method:\"wallet_switchEthereumChain\",params:[{chainId:e.chainId}]});case 5:case 12:t.next=15;break;case 7:if(t.prev=7,t.t0=t.catch(2),4902!==t.t0.code){t.next=14;break}return t.next=12,this.metamaskProvider.request({method:\"wallet_addEthereumChain\",params:[{chainId:e.chainId,chainName:e.displayName,rpcUrls:[e.rpcTarget]}]});case 14:throw t.t0;case 15:case\"end\":return t.stop()}}),t,this,[[2,7]])})));return function(e){return t.apply(this,arguments)}}()}]),n}(f.e)}}]);","name":"static/js/16.c6ea2634.chunk.js","map":{"version":3,"names":["this","push","module","__webpack_exports__","__webpack_require__","r","d","MetamaskAdapter","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_get_js__WEBPACK_IMPORTED_MODULE_5__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_6__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_7__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_8__","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default","n","_metamask_detect_provider__WEBPACK_IMPORTED_MODULE_10__","_metamask_detect_provider__WEBPACK_IMPORTED_MODULE_10___default","_web3auth_base__WEBPACK_IMPORTED_MODULE_11__","_BaseAdapter","Object","_super","_this","adapterOptions","arguments","length","undefined","call","EIP155","EXTERNAL","METAMASK","NOT_READY","chainConfig","key","get","status","CONNECTED","metamaskProvider","set","_","Error","value","_init","mark","_callee","options","wrap","_context","prev","next","prototype","mustBeMetaMask","sent","notInstalled","READY","emit","autoConnect","rehydrated","connect","t0","ERRORED","stop","_x","apply","_connect","_callee2","_this2","_context2","CONNECTING","adapter","notConnectedError","request","method","chainId","switchChain","provider","once","disconnect","reconnected","abrupt","connectionError","_disconnect","_callee3","_this$provider","_args3","_context3","cleanup","disconnectionError","removeAllListeners","DISCONNECTED","_getUserInfo","_callee4","_context4","_switchChain","_callee5","_context5","params","code","chainName","displayName","rpcUrls","rpcTarget","_x2"],"sources":["static/js/16.c6ea2634.chunk.js"],"mappings":"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"},"input":"(this[\"webpackJsonponline-polling\"] = this[\"webpackJsonponline-polling\"] || []).push([[16],{\n\n/***/ 1601:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MetamaskAdapter\", function() { return MetamaskAdapter; });\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(11);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_get_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(45);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(35);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(9);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(10);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(14);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _metamask_detect_provider__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(641);\n/* harmony import */ var _metamask_detect_provider__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_metamask_detect_provider__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _web3auth_base__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(13);\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar MetamaskAdapter = /*#__PURE__*/function (_BaseAdapter) {\n  Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])(MetamaskAdapter, _BaseAdapter);\n\n  var _super = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"])(MetamaskAdapter);\n\n  function MetamaskAdapter() {\n    var _this;\n\n    Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(this, MetamaskAdapter);\n\n    var adapterOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _this = _super.call(this);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this), \"adapterNamespace\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_NAMESPACES */ \"c\"].EIP155);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this), \"currentChainNamespace\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* CHAIN_NAMESPACES */ \"f\"].EIP155);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this), \"type\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_CATEGORY */ \"a\"].EXTERNAL);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this), \"name\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WALLET_ADAPTERS */ \"i\"].METAMASK);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this), \"status\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].NOT_READY);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this), \"rehydrated\", false);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this), \"metamaskProvider\", null);\n\n    _this.chainConfig = adapterOptions.chainConfig || null;\n    return _this;\n  }\n\n  Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(MetamaskAdapter, [{\n    key: \"provider\",\n    get: function get() {\n      if (this.status === _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].CONNECTED && this.metamaskProvider) {\n        return this.metamaskProvider;\n      }\n\n      return null;\n    },\n    set: function set(_) {\n      throw new Error(\"Not implemented\");\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee(options) {\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_get_js__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])(MetamaskAdapter.prototype), \"checkInitializationRequirements\", this).call(this);\n\n                _context.next = 3;\n                return _metamask_detect_provider__WEBPACK_IMPORTED_MODULE_10___default()({\n                  mustBeMetaMask: true\n                });\n\n              case 3:\n                this.metamaskProvider = _context.sent;\n\n                if (this.metamaskProvider) {\n                  _context.next = 6;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletInitializationError */ \"j\"].notInstalled(\"Metamask extension is not installed\");\n\n              case 6:\n                this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].READY;\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_EVENTS */ \"b\"].READY, _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WALLET_ADAPTERS */ \"i\"].METAMASK);\n                _context.prev = 8;\n\n                if (!options.autoConnect) {\n                  _context.next = 13;\n                  break;\n                }\n\n                this.rehydrated = true;\n                _context.next = 13;\n                return this.connect();\n\n              case 13:\n                _context.next = 18;\n                break;\n\n              case 15:\n                _context.prev = 15;\n                _context.t0 = _context[\"catch\"](8);\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_EVENTS */ \"b\"].ERRORED, _context.t0);\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[8, 15]]);\n      }));\n\n      function init(_x) {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"setAdapterSettings\",\n    value: function setAdapterSettings(_) {}\n  }, {\n    key: \"connect\",\n    value: function () {\n      var _connect = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee2() {\n        var _this2 = this;\n\n        var chainId;\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_get_js__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])(MetamaskAdapter.prototype), \"checkConnectionRequirements\", this).call(this); // set default to mainnet\n\n\n                if (!this.chainConfig) this.chainConfig = Object(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* getChainConfig */ \"m\"])(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* CHAIN_NAMESPACES */ \"f\"].EIP155, 1);\n                this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].CONNECTING;\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_EVENTS */ \"b\"].CONNECTING, {\n                  adapter: _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WALLET_ADAPTERS */ \"i\"].METAMASK\n                });\n\n                if (this.metamaskProvider) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletLoginError */ \"k\"].notConnectedError(\"Not able to connect with metamask\");\n\n              case 6:\n                _context2.prev = 6;\n                _context2.next = 9;\n                return this.metamaskProvider.request({\n                  method: \"eth_requestAccounts\"\n                });\n\n              case 9:\n                chainId = this.metamaskProvider.chainId;\n\n                if (!(chainId !== this.chainConfig.chainId)) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                _context2.next = 13;\n                return this.switchChain(this.chainConfig);\n\n              case 13:\n                this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].CONNECTED;\n\n                if (this.provider) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletLoginError */ \"k\"].notConnectedError(\"Failed to connect with provider\");\n\n              case 16:\n                this.provider.once(\"disconnect\", function () {\n                  // ready to be connected again\n                  _this2.disconnect();\n                });\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_EVENTS */ \"b\"].CONNECTED, {\n                  adapter: _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WALLET_ADAPTERS */ \"i\"].METAMASK,\n                  reconnected: this.rehydrated\n                });\n                return _context2.abrupt(\"return\", this.provider);\n\n              case 21:\n                _context2.prev = 21;\n                _context2.t0 = _context2[\"catch\"](6);\n                // ready again to be connected\n                this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].READY;\n                this.rehydrated = false;\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_EVENTS */ \"b\"].ERRORED, _context2.t0);\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletLoginError */ \"k\"].connectionError(\"Failed to login with metamask wallet\");\n\n              case 27:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[6, 21]]);\n      }));\n\n      function connect() {\n        return _connect.apply(this, arguments);\n      }\n\n      return connect;\n    }()\n  }, {\n    key: \"disconnect\",\n    value: function () {\n      var _disconnect = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee3() {\n        var _this$provider,\n            options,\n            _args3 = arguments;\n\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                options = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : {\n                  cleanup: false\n                };\n\n                if (!(this.status !== _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].CONNECTED)) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletLoginError */ \"k\"].disconnectionError(\"Not connected with wallet\");\n\n              case 3:\n                (_this$provider = this.provider) === null || _this$provider === void 0 ? void 0 : _this$provider.removeAllListeners();\n\n                if (options.cleanup) {\n                  this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].NOT_READY;\n                  this.metamaskProvider = null;\n                } else {\n                  // ready to be connected again\n                  this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].READY;\n                }\n\n                this.rehydrated = false;\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_EVENTS */ \"b\"].DISCONNECTED);\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function disconnect() {\n        return _disconnect.apply(this, arguments);\n      }\n\n      return disconnect;\n    }()\n  }, {\n    key: \"getUserInfo\",\n    value: function () {\n      var _getUserInfo = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee4() {\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(this.status !== _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].CONNECTED)) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletLoginError */ \"k\"].notConnectedError(\"Not connected with wallet, Please login/connect first\");\n\n              case 2:\n                return _context4.abrupt(\"return\", {});\n\n              case 3:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getUserInfo() {\n        return _getUserInfo.apply(this, arguments);\n      }\n\n      return getUserInfo;\n    }()\n  }, {\n    key: \"switchChain\",\n    value: function () {\n      var _switchChain = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee5(chainConfig) {\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (this.metamaskProvider) {\n                  _context5.next = 2;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletLoginError */ \"k\"].notConnectedError(\"Not connected with wallet\");\n\n              case 2:\n                _context5.prev = 2;\n                _context5.next = 5;\n                return this.metamaskProvider.request({\n                  method: \"wallet_switchEthereumChain\",\n                  params: [{\n                    chainId: chainConfig.chainId\n                  }]\n                });\n\n              case 5:\n                _context5.next = 15;\n                break;\n\n              case 7:\n                _context5.prev = 7;\n                _context5.t0 = _context5[\"catch\"](2);\n\n                if (!(_context5.t0.code === 4902)) {\n                  _context5.next = 14;\n                  break;\n                }\n\n                _context5.next = 12;\n                return this.metamaskProvider.request({\n                  method: \"wallet_addEthereumChain\",\n                  params: [{\n                    chainId: chainConfig.chainId,\n                    chainName: chainConfig.displayName,\n                    rpcUrls: [chainConfig.rpcTarget]\n                  }]\n                });\n\n              case 12:\n                _context5.next = 15;\n                break;\n\n              case 14:\n                throw _context5.t0;\n\n              case 15:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[2, 7]]);\n      }));\n\n      function switchChain(_x2) {\n        return _switchChain.apply(this, arguments);\n      }\n\n      return switchChain;\n    }()\n  }]);\n\n  return MetamaskAdapter;\n}(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* BaseAdapter */ \"e\"]);\n\n\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["../src/metamaskAdapter.ts"],"names":["constructor","adapterOptions","ADAPTER_NAMESPACES","EIP155","CHAIN_NAMESPACES","ADAPTER_CATEGORY","EXTERNAL","WALLET_ADAPTERS","METAMASK","ADAPTER_STATUS","NOT_READY","provider","init","detectEthereumProvider","mustBeMetaMask","WalletInitializationError","ADAPTER_EVENTS","options","setAdapterSettings","connect","getChainConfig","adapter","WalletLoginError","method","chainId","reconnected","rehydrated","disconnect","cleanup","getUserInfo","switchChain","params","chainConfig","switchError","chainName","rpcUrls"],"mappings":"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","file":"x","sourcesContent":["import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport detectEthereumProvider from '@metamask/detect-provider';\nimport { BaseAdapter, ADAPTER_NAMESPACES, CHAIN_NAMESPACES, ADAPTER_CATEGORY, WALLET_ADAPTERS, ADAPTER_STATUS, WalletInitializationError, ADAPTER_EVENTS, getChainConfig, WalletLoginError } from '@web3auth/base';\n\nclass MetamaskAdapter extends BaseAdapter {\n  constructor() {\n    let adapterOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super();\n\n    _defineProperty(this, \"adapterNamespace\", ADAPTER_NAMESPACES.EIP155);\n\n    _defineProperty(this, \"currentChainNamespace\", CHAIN_NAMESPACES.EIP155);\n\n    _defineProperty(this, \"type\", ADAPTER_CATEGORY.EXTERNAL);\n\n    _defineProperty(this, \"name\", WALLET_ADAPTERS.METAMASK);\n\n    _defineProperty(this, \"status\", ADAPTER_STATUS.NOT_READY);\n\n    _defineProperty(this, \"rehydrated\", false);\n\n    _defineProperty(this, \"metamaskProvider\", null);\n\n    this.chainConfig = adapterOptions.chainConfig || null;\n  }\n\n  get provider() {\n    if (this.status === ADAPTER_STATUS.CONNECTED && this.metamaskProvider) {\n      return this.metamaskProvider;\n    }\n\n    return null;\n  }\n\n  set provider(_) {\n    throw new Error(\"Not implemented\");\n  }\n\n  async init(options) {\n    super.checkInitializationRequirements();\n    this.metamaskProvider = await detectEthereumProvider({\n      mustBeMetaMask: true\n    });\n    if (!this.metamaskProvider) throw WalletInitializationError.notInstalled(\"Metamask extension is not installed\");\n    this.status = ADAPTER_STATUS.READY;\n    this.emit(ADAPTER_EVENTS.READY, WALLET_ADAPTERS.METAMASK);\n\n    try {\n      if (options.autoConnect) {\n        this.rehydrated = true;\n        await this.connect();\n      }\n    } catch (error) {\n      this.emit(ADAPTER_EVENTS.ERRORED, error);\n    }\n  }\n\n  setAdapterSettings(_) {}\n\n  async connect() {\n    super.checkConnectionRequirements(); // set default to mainnet\n\n    if (!this.chainConfig) this.chainConfig = getChainConfig(CHAIN_NAMESPACES.EIP155, 1);\n    this.status = ADAPTER_STATUS.CONNECTING;\n    this.emit(ADAPTER_EVENTS.CONNECTING, {\n      adapter: WALLET_ADAPTERS.METAMASK\n    });\n    if (!this.metamaskProvider) throw WalletLoginError.notConnectedError(\"Not able to connect with metamask\");\n\n    try {\n      await this.metamaskProvider.request({\n        method: \"eth_requestAccounts\"\n      });\n      const {\n        chainId\n      } = this.metamaskProvider;\n\n      if (chainId !== this.chainConfig.chainId) {\n        await this.switchChain(this.chainConfig);\n      }\n\n      this.status = ADAPTER_STATUS.CONNECTED;\n      if (!this.provider) throw WalletLoginError.notConnectedError(\"Failed to connect with provider\");\n      this.provider.once(\"disconnect\", () => {\n        // ready to be connected again\n        this.disconnect();\n      });\n      this.emit(ADAPTER_EVENTS.CONNECTED, {\n        adapter: WALLET_ADAPTERS.METAMASK,\n        reconnected: this.rehydrated\n      });\n      return this.provider;\n    } catch (error) {\n      // ready again to be connected\n      this.status = ADAPTER_STATUS.READY;\n      this.rehydrated = false;\n      this.emit(ADAPTER_EVENTS.ERRORED, error);\n      throw WalletLoginError.connectionError(\"Failed to login with metamask wallet\");\n    }\n  }\n\n  async disconnect() {\n    var _this$provider;\n\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      cleanup: false\n    };\n    if (this.status !== ADAPTER_STATUS.CONNECTED) throw WalletLoginError.disconnectionError(\"Not connected with wallet\");\n    (_this$provider = this.provider) === null || _this$provider === void 0 ? void 0 : _this$provider.removeAllListeners();\n\n    if (options.cleanup) {\n      this.status = ADAPTER_STATUS.NOT_READY;\n      this.metamaskProvider = null;\n    } else {\n      // ready to be connected again\n      this.status = ADAPTER_STATUS.READY;\n    }\n\n    this.rehydrated = false;\n    this.emit(ADAPTER_EVENTS.DISCONNECTED);\n  }\n\n  async getUserInfo() {\n    if (this.status !== ADAPTER_STATUS.CONNECTED) throw WalletLoginError.notConnectedError(\"Not connected with wallet, Please login/connect first\");\n    return {};\n  }\n\n  async switchChain(chainConfig) {\n    if (!this.metamaskProvider) throw WalletLoginError.notConnectedError(\"Not connected with wallet\");\n\n    try {\n      await this.metamaskProvider.request({\n        method: \"wallet_switchEthereumChain\",\n        params: [{\n          chainId: chainConfig.chainId\n        }]\n      });\n    } catch (switchError) {\n      // This error code indicates that the chain has not been added to MetaMask.\n      if (switchError.code === 4902) {\n        await this.metamaskProvider.request({\n          method: \"wallet_addEthereumChain\",\n          params: [{\n            chainId: chainConfig.chainId,\n            chainName: chainConfig.displayName,\n            rpcUrls: [chainConfig.rpcTarget]\n          }]\n        });\n      } else {\n        throw switchError;\n      }\n    }\n  }\n\n}\n\nexport { MetamaskAdapter };\n//# sourceMappingURL=metamaskAdapter.esm.js.map\n"]}}