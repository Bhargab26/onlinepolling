{"code":"(this[\"webpackJsonponline-polling\"]=this[\"webpackJsonponline-polling\"]||[]).push([[9,11],{1377:function(e,t){},1385:function(e,t){},1392:function(e,t){},1400:function(e,t,n){\"use strict\";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&\"object\"==typeof t&&\"object\"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;0!==i--;){var o=a[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}},1401:function(e,t,n){\"use strict\";var r=function(e){return null!==e&&\"object\"===typeof e&&\"function\"===typeof e.pipe};r.writable=function(e){return r(e)&&!1!==e.writable&&\"function\"===typeof e._write&&\"object\"===typeof e._writableState},r.readable=function(e){return r(e)&&!1!==e.readable&&\"function\"===typeof e._read&&\"object\"===typeof e._readableState},r.duplex=function(e){return r.writable(e)&&r.readable(e)},r.transform=function(e){return r.duplex(e)&&\"function\"===typeof e._transform},e.exports=r},1402:function(e,t){},1403:function(e,t){},1405:function(e,t){},1498:function(e,t,n){\"use strict\";(function(e){n.d(t,\"a\",(function(){return se}));var r=n(203),i=n(6),a=n(7),o=n(12),s=n(9),c=n(10),u=n(1),d=n(11),l=n(14),h=n.n(l),p=n(1438),f=n(1388),v=n(291),b=n(85),m=n(234),g=n(1401),w=n(242),y=n.n(w),O=n(29),j=n.n(O),k=n(1400),_=n.n(k),x={disconnected:function(){return\"Torus: Lost connection to Torus.\"},permanentlyDisconnected:function(){return\"Torus: Disconnected from iframe. Page reload required.\"},unsupportedSync:function(e){return\"Torus: The Torus Ethereum provider does not support synchronous methods like \".concat(e,\" without a callback parameter.\")},invalidDuplexStream:function(){return\"Must provide a Node.js-style duplex stream.\"},invalidOptions:function(e){return\"Invalid options. Received: { maxEventListeners: \".concat(e,\"}\")},invalidRequestArgs:function(){return\"Expected a single, non-array, object argument.\"},invalidRequestMethod:function(){return\"'args.method' must be a non-empty string.\"},invalidRequestParams:function(){return\"'args.params' must be an object or array if provided.\"},invalidLoggerObject:function(){return\"'args.logger' must be an object if provided.\"},invalidLoggerMethod:function(e){return\"'args.logger' must include required method '\".concat(e,\"'.\")}},C={connected:function(e){return'Torus: Connected to chain with ID \"'.concat(e,'\".')}},I=\"production\",S=\"bottom-left\",P=\"top-left\",E=\"bottom-right\",A=\"top-right\",T={supportedVerifierList:[\"google\",\"reddit\",\"discord\"],api:\"https://api.tor.us\",translations:{en:{embed:{continue:\"Continue\",actionRequired:\"Authorization required\",pendingAction:\"Click continue to proceed with your request in a popup\",cookiesRequired:\"Cookies Required\",enableCookies:\"Please enable cookies in your browser preferences to access Torus\",clickHere:\"More Info\"}},de:{embed:{continue:\"Fortsetzen\",actionRequired:\"Autorisierung erforderlich\",pendingAction:\"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren\",cookiesRequired:\"Cookies ben\\xf6tigt\",enableCookies:\"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen\",clickHere:\"Mehr Info\"}},ja:{embed:{continue:\"\\u7d99\\u7d9a\\u3059\\u308b\",actionRequired:\"\\u8a8d\\u8a3c\\u304c\\u5fc5\\u8981\\u3067\\u3059\",pendingAction:\"\\u7d9a\\u884c\\u3092\\u30af\\u30ea\\u30c3\\u30af\\u3057\\u3066\\u3001\\u30dd\\u30c3\\u30d7\\u30a2\\u30c3\\u30d7\\u3067\\u30ea\\u30af\\u30a8\\u30b9\\u30c8\\u3092\\u7d9a\\u884c\\u3057\\u307e\\u3059\",cookiesRequired:\"\\u5fc5\\u8981\\u306a\\u30af\\u30c3\\u30ad\\u30fc\",enableCookies:\"Torus\\u306b\\u30a2\\u30af\\u30bb\\u30b9\\u3059\\u308b\\u306b\\u306f\\u3001\\u30d6\\u30e9\\u30a6\\u30b6\\u306e\\u8a2d\\u5b9a\\u3067Cookie\\u3092\\u6709\\u52b9\\u306b\\u3057\\u3066\\u304f\\u3060\\u3055\\u3044\\u3002\",clickHere:\"\\u8a73\\u3057\\u304f\\u306f\"}},ko:{embed:{continue:\"\\uacc4\\uc18d\\ud558\\ub2e4\",actionRequired:\"\\uc2b9\\uc778 \\ud544\\uc694\",pendingAction:\"\\ud31d\\uc5c5\\uc5d0\\uc11c \\uc694\\uccad\\uc744 \\uc9c4\\ud589\\ud558\\ub824\\uba74 \\uacc4\\uc18d\\uc744 \\ud074\\ub9ad\\ud558\\uc2ed\\uc2dc\\uc624.\",cookiesRequired:\"\\ucfe0\\ud0a4 \\ud544\\uc694\",enableCookies:\"\\ube0c\\ub77c\\uc6b0\\uc800 \\ud658\\uacbd \\uc124\\uc815\\uc5d0\\uc11c \\ucfe0\\ud0a4\\ub97c \\ud65c\\uc131\\ud654\\ud558\\uc5ec Torus\\uc5d0 \\uc561\\uc138\\uc2a4\\ud558\\uc2ed\\uc2dc\\uc624.\",clickHere:\"\\ub354 \\ub9ce\\uc740 \\uc815\\ubcf4\"}},zh:{embed:{continue:\"\\u7ee7\\u7eed\",actionRequired:\"\\u9700\\u8981\\u6388\\u6743\",pendingAction:\"\\u5355\\u51fb\\u7ee7\\u7eed\\u4ee5\\u5728\\u5f39\\u51fa\\u7a97\\u53e3\\u4e2d\\u7ee7\\u7eed\\u60a8\\u7684\\u8bf7\\u6c42\",cookiesRequired:\"\\u5fc5\\u586bCookie\",enableCookies:\"\\u8bf7\\u5728\\u60a8\\u7684\\u6d4f\\u89c8\\u5668\\u9996\\u9009\\u9879\\u4e2d\\u542f\\u7528cookie\\u4ee5\\u8bbf\\u95eeTorus\\u3002\",clickHere:\"\\u66f4\\u591a\\u4fe1\\u606f\"}}},prodTorusUrl:\"\",localStorageKey:\"torus-\".concat(window.location.hostname)},R=j.a.getLogger(\"solana-embed\");var L=function(){return Math.random().toString(36).slice(2)},D=function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){var n,r;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=\"testing\"===e.t0?3:\"development\"===e.t0?6:9;break;case 3:return n=\"https://solana-testing.tor.us\",r=\"debug\",e.abrupt(\"break\",12);case 6:return n=\"http://localhost:8080\",r=\"debug\",e.abrupt(\"break\",12);case 9:return n=\"https://solana.tor.us\",r=\"error\",e.abrupt(\"break\",12);case 12:return e.abrupt(\"return\",{torusUrl:n,logLevel:r});case 13:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q={height:660,width:375},N={height:740,width:1315},U={height:700,width:1200},W={height:600,width:400};function z(e){var t=e.width,n=e.height,r=void 0!==window.screenLeft?window.screenLeft:window.screenX,i=void 0!==window.screenTop?window.screenTop:window.screenY,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,o=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,s=Math.abs((a-t)/2/1+r),c=Math.abs((o-n)/2/1+i);return\"titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=\".concat(n/1,\",width=\").concat(t/1,\",top=\").concat(c,\",left=\").concat(s)}var K=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var a;Object(i.a)(this,n);var s=r.maxEventListeners,c=void 0===s?100:s,u=r.jsonRpcStreamName,d=void 0===u?\"provider\":u;if(a=t.call(this),h()(Object(o.a)(a),\"isTorus\",void 0),h()(Object(o.a)(a),\"_rpcEngine\",void 0),h()(Object(o.a)(a),\"jsonRpcConnectionEvents\",void 0),h()(Object(o.a)(a),\"_state\",void 0),!Object(g.duplex)(e))throw new Error(x.invalidDuplexStream());a.isTorus=!0,a.setMaxListeners(c),a._handleConnect=a._handleConnect.bind(Object(o.a)(a)),a._handleDisconnect=a._handleDisconnect.bind(Object(o.a)(a)),a._handleStreamDisconnect=a._handleStreamDisconnect.bind(Object(o.a)(a)),a._rpcRequest=a._rpcRequest.bind(Object(o.a)(a)),a._initializeState=a._initializeState.bind(Object(o.a)(a)),a.request=a.request.bind(Object(o.a)(a)),a.sendAsync=a.sendAsync.bind(Object(o.a)(a));var l=new b.c;y()(e,l,e,a._handleStreamDisconnect.bind(Object(o.a)(a),\"Torus\")),l.ignoreStream(\"phishing\");var p=Object(b.i)();y()(p.stream,l.createStream(d),p.stream,a._handleStreamDisconnect.bind(Object(o.a)(a),\"Torus RpcProvider\"));var v=new b.b;return v.push(Object(b.g)()),v.push((function(e,t,n){\"string\"===typeof e.method&&e.method||(t.error=m.ethErrors.rpc.invalidRequest({message:\"The request 'method' must be a non-empty string.\",data:e})),n((function(e){var n=t.error;return n?(R.error(\"Torus - RPC Error: \".concat(n.message),n),e()):e()}))})),v.push(Object(f.h)({origin:location.origin})),v.push(p.middleware),a._rpcEngine=v,a.jsonRpcConnectionEvents=p.events,a}return Object(a.a)(n,[{key:\"request\",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){var n,r,i=this;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&\"object\"===typeof t&&!Array.isArray(t)){e.next=2;break}throw m.ethErrors.rpc.invalidRequest({message:x.invalidRequestArgs(),data:t});case 2:if(n=t.method,r=t.params,\"string\"===typeof n&&0!==n.length){e.next=5;break}throw m.ethErrors.rpc.invalidRequest({message:x.invalidRequestMethod(),data:t});case 5:if(void 0===r||Array.isArray(r)||\"object\"===typeof r&&null!==r){e.next=7;break}throw m.ethErrors.rpc.invalidRequest({message:x.invalidRequestParams(),data:t});case 7:return e.abrupt(\"return\",new Promise((function(e,t){i._rpcRequest({method:n,params:r},Object(b.j)(e,t))})));case 8:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:\"send\",value:function(e,t){this._rpcRequest(e,t)}},{key:\"sendAsync\",value:function(e){var t=this;return new Promise((function(n,r){t._rpcRequest(e,Object(b.j)(n,r))}))}},{key:\"_handleStreamDisconnect\",value:function(e,t){!function(e,t,n){var r='Torus: Lost connection to \"'.concat(e,'\".');null!==t&&void 0!==t&&t.stack&&(r+=\"\\n\".concat(t.stack)),R.warn(r),n&&n.listenerCount(\"error\")>0&&n.emit(\"error\",r)}(e,t,this),this._handleDisconnect(!1,t?t.message:void 0)}}]),n}(b.e),F=function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o=function r(){n.apply(void 0,i),e.removeEventListener(t,r)};e.addEventListener(t,o)};function H(){return M.apply(this,arguments)}function M(){return(M=Object(d.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",new Promise((function(e){\"loading\"!==document.readyState?e():F(document,\"DOMContentLoaded\",e)})));case 1:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}var B=function(e){var t=window.document.createElement(\"template\"),n=e.trim();return t.innerHTML=n,t.content.firstChild},G=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;Object(i.a)(this,n);var a=e.url,s=e.target,c=e.features;return r=t.call(this),h()(Object(o.a)(r),\"url\",void 0),h()(Object(o.a)(r),\"target\",void 0),h()(Object(o.a)(r),\"features\",void 0),h()(Object(o.a)(r),\"window\",void 0),h()(Object(o.a)(r),\"windowTimer\",void 0),h()(Object(o.a)(r),\"iClosedWindow\",void 0),r.url=a,r.target=s||\"_blank\",r.features=c||z(U),r.window=void 0,r.windowTimer=void 0,r.iClosedWindow=!1,r._setupTimer(),r}return Object(a.a)(n,[{key:\"_setupTimer\",value:function(){var e=this;this.windowTimer=Number(setInterval((function(){e.window&&e.window.closed&&(clearInterval(e.windowTimer),e.iClosedWindow||e.emit(\"close\"),e.iClosedWindow=!1,e.window=void 0),void 0===e.window&&clearInterval(e.windowTimer)}),500))}},{key:\"open\",value:function(){var e;return this.window=window.open(this.url.href,this.target,this.features),null!==(e=this.window)&&void 0!==e&&e.focus&&this.window.focus(),Promise.resolve()}},{key:\"close\",value:function(){this.iClosedWindow=!0,this.window&&this.window.close()}},{key:\"redirect\",value:function(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}}]),n}(b.e);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Y=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var a;Object(i.a)(this,n);var s=r.maxEventListeners,c=void 0===s?100:s,u=r.jsonRpcStreamName,d=void 0===u?\"provider\":u;a=t.call(this,e,{maxEventListeners:c,jsonRpcStreamName:d}),h()(Object(o.a)(a),\"embedTranslations\",void 0),h()(Object(o.a)(a),\"torusUrl\",void 0),h()(Object(o.a)(a),\"dappStorageKey\",void 0),h()(Object(o.a)(a),\"windowRefs\",void 0),h()(Object(o.a)(a),\"tryWindowHandle\",void 0),h()(Object(o.a)(a),\"torusAlertContainer\",void 0),h()(Object(o.a)(a),\"torusIframe\",void 0),a._state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n._defaultState),a.torusUrl=\"\",a.dappStorageKey=\"\";var l=T.translations[function(){var e=window.navigator.language||\"en-US\",t=e.split(\"-\");return Object.prototype.hasOwnProperty.call(T.translations,t[0])?t[0]:\"en\"}()];a.embedTranslations=l.embed,a.windowRefs={},a.on(\"connect\",(function(){a._state.isConnected=!0}));return a.jsonRpcConnectionEvents.on(\"notification\",(function(e){var t=e.method,n=e.params;if(t===f.c.IFRAME_STATUS){var r=n.isFullScreen,i=n.rid;a._displayIframe({isFull:r,rid:i})}else if(t===f.c.CREATE_WINDOW){var o=n.windowId,s=n.url;a._createPopupBlockAlert(o,s)}else if(t===f.c.CLOSE_WINDOW)a._handleCloseWindow(n);else if(t===f.c.USER_LOGGED_IN){var c=n.currentLoginProvider;a._state.isLoggedIn=!0,a._state.currentLoginProvider=c}else t===f.c.USER_LOGGED_OUT&&(a._state.isLoggedIn=!1,a._state.currentLoginProvider=null,a._displayIframe())})),a}return Object(a.a)(n,[{key:\"isLoggedIn\",get:function(){return this._state.isLoggedIn}},{key:\"isIFrameFullScreen\",get:function(){return this._state.isIFrameFullScreen}},{key:\"isConnected\",value:function(){return this._state.isConnected}},{key:\"_initializeState\",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){var n,r,i,a,o,s,c,d=this;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.torusUrl,r=t.dappStorageKey,i=t.torusAlertContainer,a=t.torusIframe,this.torusUrl=n,this.dappStorageKey=r,this.torusAlertContainer=i,this.torusIframe=a,this.torusIframe.addEventListener(\"load\",(function(){d._state.isIFrameFullScreen||d._displayIframe()})),e.next=9,this.request({method:f.b.GET_PROVIDER_STATE,params:[]});case 9:o=e.sent,s=o.currentLoginProvider,c=o.isLoggedIn,this._handleConnect(s,c),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),R.error(\"Torus: Failed to get initial state. Please report this bug.\",e.t0);case 18:return e.prev=18,R.info(\"initialized communication state\"),this._state.initialized=!0,this.emit(\"_initialized\"),e.finish(18);case 23:case\"end\":return e.stop()}}),e,this,[[0,15,18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:\"_handleWindow\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.url,i=n.target,a=n.features,o=new URL(r||\"\".concat(this.torusUrl,\"/redirect?windowId=\").concat(e));this.dappStorageKey&&(o.hash?o.hash+=\"&dappStorageKey=\".concat(this.dappStorageKey):o.hash=\"#dappStorageKey=\".concat(this.dappStorageKey));var s=new G({url:o,target:i,features:a});s.open(),s.window?(this.windowRefs[e]=s,this.request({method:f.b.OPENED_WINDOW,params:{windowId:e}}),s.once(\"close\",(function(){delete t.windowRefs[e],t.request({method:f.b.CLOSED_WINDOW,params:{windowId:e}})}))):this._createPopupBlockAlert(e,o.href)}},{key:\"_displayIframe\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isFull,n=void 0!==t&&t,r=e.rid,i=void 0===r?\"\":r,a={};if(n)a.display=\"block\",a.width=\"100%\",a.height=\"100%\",a.top=\"0px\",a.right=\"0px\",a.left=\"0px\",a.bottom=\"0px\";else switch(a.display=this._state.torusWidgetVisibility?\"block\":\"none\",a.height=\"70px\",a.width=\"70px\",this._state.buttonPosition){case P:a.top=\"0px\",a.left=\"0px\",a.right=\"auto\",a.bottom=\"auto\";break;case A:a.top=\"0px\",a.right=\"0px\",a.left=\"auto\",a.bottom=\"auto\";break;case E:a.bottom=\"0px\",a.right=\"0px\",a.top=\"auto\",a.left=\"auto\";break;default:a.bottom=\"0px\",a.left=\"0px\",a.top=\"auto\",a.right=\"auto\"}Object.assign(this.torusIframe.style,a),this._state.isIFrameFullScreen=n,this.request({method:f.b.IFRAME_STATUS,params:{isIFrameFullScreen:n,rid:i}})}},{key:\"hideTorusButton\",value:function(){this._state.torusWidgetVisibility=!1,this._displayIframe()}},{key:\"showTorusButton\",value:function(){this._state.torusWidgetVisibility=!0,this._displayIframe()}},{key:\"_rpcRequest\",value:function(e,t){var n=t,r=e;Array.isArray(r)||r.jsonrpc||(r.jsonrpc=\"2.0\"),this.tryWindowHandle(r,n)}},{key:\"_handleConnect\",value:function(e,t){this._state.isConnected||(this._state.isConnected=!0,this.emit(\"connect\",{currentLoginProvider:e,isLoggedIn:t}),R.debug(C.connected(e)))}},{key:\"_handleDisconnect\",value:function(e,t){var n;(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e)&&(this._state.isConnected=!1,e?(n=new m.EthereumRpcError(1013,t||x.disconnected()),R.debug(n)):(n=new m.EthereumRpcError(1011,t||x.permanentlyDisconnected()),R.error(n),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit(\"disconnect\",n))}},{key:\"_handleCloseWindow\",value:function(e){var t=e.windowId;this.windowRefs[t]&&(this.windowRefs[t].close(),delete this.windowRefs[t])}},{key:\"_createPopupBlockAlert\",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(t,n){var r,i,a,o,s,c,d=this;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getLogoUrl(),i=B('<div id=\"torusAlert\" class=\"torus-alert--v2\">'+'<div id=\"torusAlert__logo\"><img src=\"'.concat(r,'\" /></div>')+\"<div>\"+'<h1 id=\"torusAlert__title\">'.concat(this.embedTranslations.actionRequired,\"</h1>\")+'<p id=\"torusAlert__desc\">'.concat(this.embedTranslations.pendingAction,\"</p>\")+\"</div></div>\"),a=B('<div><a id=\"torusAlert__btn\">'.concat(this.embedTranslations.continue,\"</a></div>\")),(o=B('<div id=\"torusAlert__btn-container\"></div>')).appendChild(a),i.appendChild(o),s=function(){a.addEventListener(\"click\",(function(){d._handleWindow(t,{url:n,target:\"_blank\",features:z(W)}),i.remove(),0===d.torusAlertContainer.children.length&&(d.torusAlertContainer.style.display=\"none\")}))},c=function(){d.torusAlertContainer.appendChild(i)},e.next=10,H();case 10:c(),s(),this.torusAlertContainer.style.display=\"block\";case 13:case\"end\":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:\"getLogoUrl\",value:function(){return\"\".concat(this.torusUrl,\"/images/torus_icon-blue.svg\")}}]),n}(K);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}h()(Y,\"_defaultState\",{buttonPosition:\"bottom-left\",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});var J=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var a;Object(i.a)(this,n);var s=r.maxEventListeners,c=void 0===s?100:s,u=r.jsonRpcStreamName,d=void 0===u?\"provider\":u;a=t.call(this,e,{maxEventListeners:c,jsonRpcStreamName:d}),h()(Object(o.a)(a),\"chainId\",void 0),h()(Object(o.a)(a),\"selectedAddress\",void 0),h()(Object(o.a)(a),\"tryWindowHandle\",void 0),a._state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n._defaultState),a.selectedAddress=null,a.chainId=null,a._handleAccountsChanged=a._handleAccountsChanged.bind(Object(o.a)(a)),a._handleChainChanged=a._handleChainChanged.bind(Object(o.a)(a)),a._handleUnlockStateChanged=a._handleUnlockStateChanged.bind(Object(o.a)(a)),a.on(\"connect\",(function(){a._state.isConnected=!0}));return a.jsonRpcConnectionEvents.on(\"notification\",(function(e){var t=e.method,n=e.params;t===f.e.ACCOUNTS_CHANGED?a._handleAccountsChanged(n):t===f.e.UNLOCK_STATE_CHANGED?a._handleUnlockStateChanged(n):t===f.e.CHAIN_CHANGED&&a._handleChainChanged(n)})),a}return Object(a.a)(n,[{key:\"isConnected\",value:function(){return this._state.isConnected}},{key:\"_initializeState\",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(){var t,n,r,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.request({method:f.d.GET_PROVIDER_STATE,params:[]});case 3:t=e.sent,n=t.accounts,r=t.chainId,i=t.isUnlocked,this.emit(\"connect\",{chainId:r}),this._handleChainChanged({chainId:r}),this._handleUnlockStateChanged({accounts:n,isUnlocked:i}),this._handleAccountsChanged(n),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),R.error(\"Torus: Failed to get initial state. Please report this bug.\",e.t0);case 16:return e.prev=16,R.info(\"initialized provider state\"),this._state.initialized=!0,this.emit(\"_initialized\"),e.finish(16);case 21:case\"end\":return e.stop()}}),e,this,[[0,13,16,21]])})));return function(){return e.apply(this,arguments)}}()},{key:\"_rpcRequest\",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t,a=e;if(!Array.isArray(a))if(a.jsonrpc||(a.jsonrpc=\"2.0\"),\"solana_accounts\"===a.method||\"solana_requestAccounts\"===a.method)i=function(e,i){n._handleAccountsChanged(i.result||[],\"solana_accounts\"===a.method,r),t(e,i)};else if(\"wallet_getProviderState\"===a.method)return void this._rpcEngine.handle(e,i);this.tryWindowHandle(a,i)}},{key:\"_handleConnect\",value:function(e){this._state.isConnected||(this._state.isConnected=!0,this.emit(\"connect\",{chainId:e}),R.debug(C.connected(e)))}},{key:\"_handleDisconnect\",value:function(e,t){var n;(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e)&&(this._state.isConnected=!1,e?(n=new m.EthereumRpcError(1013,t||x.disconnected()),R.debug(n)):(n=new m.EthereumRpcError(1011,t||x.permanentlyDisconnected()),R.error(n),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit(\"disconnect\",n))}},{key:\"_handleAccountsChanged\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e;Array.isArray(i)||(R.error(\"Torus: Received non-array accounts parameter. Please report this bug.\",i),i=[]);var a,o=Object(r.a)(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(\"string\"!==typeof s){R.error(\"Torus: Received non-string account. Please report this bug.\",e),i=[];break}}}catch(c){o.e(c)}finally{o.f()}_()(this._state.accounts,i)||(t&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!n&&R.error('Torus: \"solana_accounts\" unexpectedly updated accounts. Please report this bug.',i),this._state.accounts=i,this.emit(\"accountsChanged\",i)),this.selectedAddress!==i[0]&&(this.selectedAddress=i[0]||null)}},{key:\"_handleChainChanged\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.chainId;t?\"loading\"===t?this._handleDisconnect(!0):(this._handleConnect(t),t!==this.chainId&&(this.chainId=t,this._state.initialized&&this.emit(\"chainChanged\",this.chainId))):R.error(\"Torus: Received invalid network parameters. Please report this bug.\",{chainId:t})}},{key:\"_handleUnlockStateChanged\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.accounts,n=e.isUnlocked;\"boolean\"===typeof n?n!==this._state.isUnlocked&&(this._state.isUnlocked=n,this._handleAccountsChanged(t||[])):R.error(\"Torus: Received invalid isUnlocked parameter. Please report this bug.\",{isUnlocked:n})}}]),n}(K);function Q(e){return new Promise((function(t,n){try{var r=document.createElement(\"img\");r.onload=function(){return t(!0)},r.onerror=function(){return t(!1)},r.src=e}catch(i){n(i)}}))}h()(J,\"_defaultState\",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});var X=function(e){var t=e.document,n=t.querySelector('head > meta[property=\"og:site_name\"]');if(n)return n.content;var r=t.querySelector('head > meta[name=\"title\"]');return r?r.content:t.title&&t.title.length>0?t.title:e.location.hostname};function $(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(d.a)(Object(u.a)().mark((function e(t){var n,r;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.document,r=n.querySelector('head > link[rel=\"shortcut icon\"]'),e.t0=r,!e.t0){e.next=8;break}return e.next=7,Q(r.href);case 7:e.t0=e.sent;case 8:if(!e.t0){e.next=10;break}return e.abrupt(\"return\",r.href);case 10:if(r=Array.from(n.querySelectorAll('head > link[rel=\"icon\"]')).find((function(e){return Boolean(e.href)})),e.t1=r,!e.t1){e.next=16;break}return e.next=15,Q(r.href);case 15:e.t1=e.sent;case 16:if(!e.t1){e.next=18;break}return e.abrupt(\"return\",r.href);case 18:return e.abrupt(\"return\",\"\");case 21:return e.prev=21,e.t2=e.catch(0),e.abrupt(\"return\",\"\");case 24:case\"end\":return e.stop()}}),e,null,[[0,21]])})))).apply(this,arguments)}var te=function(){var e=Object(d.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=X(window),e.next=3,$(window);case 3:return e.t1=e.sent,e.abrupt(\"return\",{name:e.t0,icon:e.t1});case 5:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie=[\"send_transaction\",\"sign_transaction\",\"sign_all_transactions\",\"sign_message\",\"connect\"],ae=[f.b.SET_PROVIDER],oe=function(e){var t;try{t=window[e];var n=\"__storage_test__\";return t.setItem(n,n),t.removeItem(n),!0}catch(r){return r&&(22===r.code||1014===r.code||\"QuotaExceededError\"===r.name||\"NS_ERROR_DOM_QUOTA_REACHED\"===r.name)&&t&&0!==t.length}}(\"localStorage\");!function(){var e=Object(d.a)(Object(u.a)().mark((function e(){var t,n,r;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,\"undefined\"!==typeof document){e.next=3;break}return e.abrupt(\"return\");case 3:return t=document.createElement(\"link\"),e.next=6,D(\"production\");case 6:n=e.sent,r=n.torusUrl,t.href=\"\".concat(r,\"/frame\"),t.crossOrigin=\"anonymous\",t.type=\"text/html\",t.rel=\"prefetch\",t.relList&&t.relList.supports&&t.relList.supports(\"prefetch\")&&document.head.appendChild(t),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),R.warn(e.t0);case 18:case\"end\":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}()();var se=function(){function t(){Object(i.a)(this,t);var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.modalZIndex,r=void 0===n?99999:n;h()(this,\"isInitialized\",void 0),h()(this,\"torusAlert\",void 0),h()(this,\"modalZIndex\",void 0),h()(this,\"alertZIndex\",void 0),h()(this,\"requestedLoginProvider\",void 0),h()(this,\"provider\",void 0),h()(this,\"communicationProvider\",void 0),h()(this,\"dappStorageKey\",void 0),h()(this,\"torusAlertContainer\",void 0),h()(this,\"torusUrl\",void 0),h()(this,\"torusIframe\",void 0),h()(this,\"styleLink\",void 0),this.torusUrl=\"\",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=r,this.alertZIndex=r+1e3,this.dappStorageKey=\"\"}return Object(a.a)(t,[{key:\"isLoggedIn\",get:function(){return!!this.communicationProvider&&this.communicationProvider.isLoggedIn}},{key:\"init\",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(){var t,n,r,i,a,o,s,c,l,h,p,f,b,m,g,w,y,O,j,k,_,x,C,P=this,E=arguments;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=E.length>0&&void 0!==E[0]?E[0]:{},n=t.buildEnv,r=void 0===n?I:n,i=t.enableLogging,a=void 0!==i&&i,o=t.network,s=t.showTorusButton,c=void 0!==s&&s,l=t.useLocalStorage,h=void 0!==l&&l,p=t.buttonPosition,f=void 0===p?S:p,b=t.apiKey,m=void 0===b?\"torus-default\":b,g=t.extraParams,w=void 0===g?{}:g,!this.isInitialized){e.next=3;break}throw new Error(\"Already initialized\");case 3:return Object(v.e)(m),e.next=6,D(r);case 6:return y=e.sent,O=y.torusUrl,j=y.logLevel,R.info(O,\"url loaded\"),this.torusUrl=O,R.setDefaultLevel(j),a?R.enableAll():R.disableAll(),k=this.handleDappStorageKey(h),(_=new URL(O)).pathname.endsWith(\"/\")?_.pathname+=\"frame\":_.pathname+=\"/frame\",x=new URLSearchParams,k&&x.append(\"dappStorageKey\",k),x.append(\"origin\",window.location.origin),_.hash=x.toString(),this.torusIframe=B('<iframe\\n        id=\"torusIframe\"\\n        class=\"torusIframe\"\\n        src=\"'.concat(_.href,'\"\\n        style=\"display: none; position: fixed; top: 0; right: 0; width: 100%;\\n        height: 100%; border: none; border-radius: 0; z-index: ').concat(this.modalZIndex.toString(),'\"\\n      ></iframe>')),this.torusAlertContainer=B('<div id=\"torusAlertContainer\" style=\"display:none; z-index: '.concat(this.alertZIndex.toString(),'\"></div>')),this.styleLink=B('<link href=\"'.concat(O,'/css/widget.css\" rel=\"stylesheet\" type=\"text/css\">')),C=function(){var e=Object(d.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",new Promise((function(e,t){try{window.document.head.appendChild(P.styleLink),window.document.body.appendChild(P.torusIframe),window.document.body.appendChild(P.torusAlertContainer),P.torusIframe.addEventListener(\"load\",Object(d.a)(Object(u.a)().mark((function t(){var n;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te();case 2:return n=t.sent,P.torusIframe.contentWindow.postMessage({buttonPosition:f,apiKey:m,network:o,dappMetadata:n,extraParams:w},_.origin),t.next=6,P._setupWeb3({torusUrl:O});case 6:c?P.showTorusButton():P.hideTorusButton(),P.isInitialized=!0,window.torus=P,e();case 10:case\"end\":return t.stop()}}),t)}))))}catch(n){t(n)}})));case 1:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=26,H();case 26:return e.next=28,C();case 28:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"login\",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(){var t,n,r=this,i=arguments;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},this.isInitialized){e.next=3;break}throw new Error(\"Call init() first\");case 3:return e.prev=3,this.requestedLoginProvider=t.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0}),e.next=8,new Promise((function(e,n){r.provider._rpcRequest({method:\"solana_requestAccounts\",params:[r.requestedLoginProvider,t.login_hint]},Object(b.j)(e,n))}));case 8:if(n=e.sent,!(Array.isArray(n)&&n.length>0)){e.next=11;break}return e.abrupt(\"return\",n);case 11:throw new Error(\"Login failed\");case 14:throw e.prev=14,e.t0=e.catch(3),R.error(\"login failed\",e.t0),e.t0;case 18:return e.prev=18,this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe(),e.finish(18);case 21:case\"end\":return e.stop()}}),e,this,[[3,14,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:\"loginWithPrivateKey\",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){var n,r,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isInitialized){e.next=2;break}throw new Error(\"Call init() first\");case 2:return n=t.privateKey,r=t.userInfo,e.next=5,this.communicationProvider.request({method:\"login_with_private_key\",params:{privateKey:n,userInfo:r}});case 5:if(i=e.sent,i.success){e.next=9;break}throw new Error(\"Login Failed\");case 9:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"logout\",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.communicationProvider.isLoggedIn){e.next=2;break}throw new Error(\"Not logged in\");case 2:return e.next=4,this.communicationProvider.request({method:f.b.LOGOUT,params:[]});case 4:this.requestedLoginProvider=null;case 5:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"cleanUp\",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.communicationProvider.isLoggedIn){e.next=3;break}return e.next=3,this.logout();case 3:this.clearInit();case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"clearInit\",value:function(){function e(e){return e instanceof Element||e instanceof Document}e(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),e(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),e(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}},{key:\"hideTorusButton\",value:function(){this.communicationProvider.hideTorusButton()}},{key:\"showTorusButton\",value:function(){this.communicationProvider.showTorusButton()}},{key:\"setProvider\",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.communicationProvider.request({method:f.b.SET_PROVIDER,params:re({},t)});case 2:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"showWallet\",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){var n,r,i,a,o=arguments;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.communicationProvider.request({method:f.b.WALLET_INSTANCE_ID,params:[]});case 3:r=e.sent,i=t?\"/\".concat(t):\"\",(a=new URL(\"\".concat(this.torusUrl,\"/wallet\").concat(i))).searchParams.append(\"instanceId\",r),Object.keys(n).forEach((function(e){a.searchParams.append(e,n[e])})),this.dappStorageKey&&(a.hash=\"#dappStorageKey=\".concat(this.dappStorageKey)),new G({url:a,features:z(N)}).open();case 11:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"getUserInfo\",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.communicationProvider.request({method:f.b.USER_INFO,params:[]});case 2:return t=e.sent,e.abrupt(\"return\",t);case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"initiateTopup\",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(t,n){var r,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isInitialized){e.next=2;break}throw new Error(\"Torus is not initialized\");case 2:return r=L(),this.communicationProvider._handleWindow(r),e.next=6,this.communicationProvider.request({method:f.b.TOPUP,params:{provider:t,params:n,windowId:r}});case 6:return i=e.sent,e.abrupt(\"return\",i);case 8:case\"end\":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:\"getAccounts\",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request({method:\"getAccounts\",params:[]});case 2:return t=e.sent,e.abrupt(\"return\",t);case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"sendTransaction\",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request({method:\"send_transaction\",params:{message:t.serialize({requireAllSignatures:!1}).toString(\"hex\")}});case 2:return n=e.sent,e.abrupt(\"return\",n);case 4:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"signTransaction\",value:function(){var t=Object(d.a)(Object(u.a)().mark((function t(n){var r,i,a;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.provider.request({method:\"sign_transaction\",params:{message:n.serializeMessage().toString(\"hex\"),messageOnly:!0}});case 2:return r=t.sent,i=JSON.parse(r),a={publicKey:new p.c(i.publicKey),signature:e.from(i.signature,\"hex\")},n.addSignature(a.publicKey,a.signature),t.abrupt(\"return\",n);case 7:case\"end\":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:\"signAllTransactions\",value:function(){var t=Object(d.a)(Object(u.a)().mark((function t(n){var r,i,a;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.map((function(e){return e.serializeMessage().toString(\"hex\")})),t.next=3,this.provider.request({method:\"sign_all_transactions\",params:{message:r,messageOnly:!0}});case 3:return i=t.sent,a=i.map((function(t){var n=JSON.parse(t);return{publicKey:new p.c(n.publicKey),signature:e.from(n.signature,\"hex\")}})),n.forEach((function(e,t){return e.addSignature(a[t].publicKey,a[t].signature),e})),t.abrupt(\"return\",n);case 7:case\"end\":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:\"signMessage\",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){var n;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request({method:\"sign_message\",params:{data:t}});case 2:return n=e.sent,e.abrupt(\"return\",n);case 4:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"getGaslessPublicKey\",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request({method:\"get_gasless_public_key\",params:[]});case 2:return t=e.sent,e.abrupt(\"return\",t);case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"handleDappStorageKey\",value:function(e){var t=\"\";if(oe&&e){var n=window.localStorage.getItem(T.localStorageKey);if(n)t=n;else{var r=\"torus-app-\".concat(L());window.localStorage.setItem(T.localStorageKey,r),t=r}}return this.dappStorageKey=t,t}},{key:\"_setupWeb3\",value:function(){var e=Object(d.a)(Object(u.a)().mark((function e(t){var n,r,i,a,o,s,c,d=this;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.info(\"setupWeb3 running\"),n=new b.a({name:\"embed_torus\",target:\"iframe_torus\",targetWindow:this.torusIframe.contentWindow}),r=new b.a({name:\"embed_communication\",target:\"iframe_communication\",targetWindow:this.torusIframe.contentWindow}),i=new J(n,{}),a=new Y(r,{}),i.tryWindowHandle=function(e,t){var n=e;if(!Array.isArray(n)&&ie.includes(n.method)){if(!d.communicationProvider.isLoggedIn)throw new Error(\"User Not Logged In\");var r=L();a._handleWindow(r,{target:\"_blank\",features:z(W)}),n.windowId=r}i._rpcEngine.handle(n,t)},a.tryWindowHandle=function(e,t){var n=e;if(!Array.isArray(n)&&ae.includes(n.method)){var r=L();a._handleWindow(r,{target:\"_blank\",features:z(q)}),n.params.windowId=r}a._rpcEngine.handle(n,t)},(o=function(e){var t=i[e],n=d;i[e]=function(e,r){var i=e.method,a=e.params,o=void 0===a?[]:a;if(\"solana_requestAccounts\"===i){if(!r)return n.login({loginProvider:o[0]});n.login({loginProvider:o[0]}).then((function(e){return r(null,e)})).catch((function(e){return r(e)}))}return t.apply(this,[e,r])}})(\"request\"),o(\"sendAsync\"),o(\"send\"),s=new Proxy(i,{deleteProperty:function(){return!0}}),c=new Proxy(a,{deleteProperty:function(){return!0}}),this.provider=s,this.communicationProvider=c,e.next=17,Promise.all([i._initializeState(),a._initializeState(re(re({},t),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]);case 17:R.debug(\"Torus - injected provider\");case 18:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}()}).call(this,n(19).Buffer)},1600:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"SolanaWalletAdapter\",(function(){return O}));var r=n(1),i=n(11),a=n(6),o=n(7),s=n(12),c=n(45),u=n(35),d=n(9),l=n(10),h=n(14),p=n.n(h),f=n(1498),v=n(13),b=n(1408),m=n(29),g=n.n(m);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(a.a)(this,n);var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=t.call(this),p()(Object(s.a)(e),\"name\",v.i.TORUS_SOLANA),p()(Object(s.a)(e),\"adapterNamespace\",v.c.SOLANA),p()(Object(s.a)(e),\"currentChainNamespace\",v.f.SOLANA),p()(Object(s.a)(e),\"type\",v.a.EXTERNAL),p()(Object(s.a)(e),\"status\",v.d.NOT_READY),p()(Object(s.a)(e),\"torusInstance\",null),p()(Object(s.a)(e),\"torusWalletOptions\",void 0),p()(Object(s.a)(e),\"initParams\",void 0),p()(Object(s.a)(e),\"loginSettings\",{}),p()(Object(s.a)(e),\"solanaProvider\",null),p()(Object(s.a)(e),\"rehydrated\",!1),e.torusWalletOptions=r.adapterSettings||{},e.initParams=r.initParams||{},e.loginSettings=r.loginSettings||{},e.chainConfig=r.chainConfig||null,e}return Object(o.a)(n,[{key:\"provider\",get:function(){var e;return this.status===v.d.CONNECTED&&this.solanaProvider&&(null===(e=this.solanaProvider)||void 0===e?void 0:e.provider)||null},set:function(e){throw new Error(\"Not implemented\")}},{key:\"init\",value:function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var i,a,o,s,d,l,h,p,m,w,O,j,k,_,x;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(c.a)(Object(u.a)(n.prototype),\"checkInitializationRequirements\",this).call(this),this.chainConfig?(m=this.chainConfig,w=m.chainId,O=m.blockExplorer,j=m.displayName,k=m.rpcTarget,_=m.ticker,x=m.tickerName,i={chainId:w,rpcTarget:k,blockExplorerUrl:O,displayName:j,tickerName:x,ticker:_,logo:\"\"}):(this.chainConfig=Object(v.m)(v.f.SOLANA,\"0x1\"),a=this.chainConfig,o=a.blockExplorer,s=a.displayName,d=a.ticker,l=a.tickerName,h=a.rpcTarget,p=a.chainId,i={chainId:p,rpcTarget:h,blockExplorerUrl:o,displayName:s,ticker:d,tickerName:l,logo:\"\"}),this.torusInstance=new f.a(this.torusWalletOptions),e.next=5,this.torusInstance.init(y(y({showTorusButton:!1},this.initParams),{},{network:i}));case 5:if(this.solanaProvider=new b.TorusInjectedProvider({config:{chainConfig:this.chainConfig}}),this.status=v.d.READY,this.emit(v.b.READY,v.i.TORUS_SOLANA),e.prev=8,!t.autoConnect){e.next=13;break}return this.rehydrated=!0,e.next=13,this.connect();case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(8),g.a.error(\"Failed to connect with cached torus solana provider\",e.t0),this.emit(v.b.ERRORED,e.t0);case 19:case\"end\":return e.stop()}}),e,this,[[8,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:\"connect\",value:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(c.a)(Object(u.a)(n.prototype),\"checkConnectionRequirements\",this).call(this),this.torusInstance){e.next=3;break}throw v.j.notReady(\"Torus wallet is not initialized\");case 3:if(this.solanaProvider){e.next=5;break}throw v.j.notReady(\"Torus wallet is not initialized\");case 5:return this.status=v.d.CONNECTING,this.emit(v.b.CONNECTING,{adapter:v.i.TORUS_SOLANA}),e.prev=7,e.next=10,this.torusInstance.login(this.loginSettings);case 10:return e.next=12,this.solanaProvider.setupProvider(this.torusInstance.provider);case 12:return this.status=v.d.CONNECTED,this.torusInstance.showTorusButton(),this.emit(v.d.CONNECTED,{adapter:v.i.TORUS_SOLANA,reconnected:this.rehydrated}),e.abrupt(\"return\",this.provider);case 18:throw e.prev=18,e.t0=e.catch(7),this.status=v.d.READY,this.rehydrated=!1,this.emit(v.b.ERRORED,e.t0),v.k.connectionError(\"Failed to login with torus solana wallet\");case 24:case\"end\":return e.stop()}}),e,this,[[7,18]])})));return function(){return e.apply(this,arguments)}}()},{key:\"disconnect\",value:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,n=arguments;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:{cleanup:!1},this.status===v.d.CONNECTED){e.next=3;break}throw v.k.notConnectedError(\"Not connected with wallet\");case 3:if(this.torusInstance){e.next=5;break}throw v.j.notReady(\"Torus wallet is not initialized\");case 5:return e.next=7,this.torusInstance.logout();case 7:t.cleanup?(this.status=v.d.NOT_READY,this.torusInstance=null,this.solanaProvider=null):this.status=v.d.READY,this.emit(v.b.DISCONNECTED);case 9:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"getUserInfo\",value:function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===v.d.CONNECTED){e.next=2;break}throw v.k.notConnectedError(\"Not connected with wallet\");case 2:if(this.torusInstance){e.next=4;break}throw v.j.notReady(\"Torus wallet is not initialized\");case 4:return e.next=6,this.torusInstance.getUserInfo();case 6:return t=e.sent,e.abrupt(\"return\",t);case 8:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"setAdapterSettings\",value:function(e){}}]),n}(v.e)}}]);","name":"static/js/9.f51ce1d8.chunk.js","map":{"version":3,"names":["this","push","module","exports","__webpack_require__","equal","a","b","constructor","length","i","keys","Array","isArray","RegExp","source","flags","valueOf","Object","prototype","toString","hasOwnProperty","call","key","isStream","stream","pipe","writable","_write","_writableState","readable","_read","_readableState","duplex","transform","_transform","__webpack_exports__","Buffer","d","Torus","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_4__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_5__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default","n","_solana_web3_js__WEBPACK_IMPORTED_MODULE_9__","_toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__","_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_11__","_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__","eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__","is_stream__WEBPACK_IMPORTED_MODULE_14__","pump__WEBPACK_IMPORTED_MODULE_15__","pump__WEBPACK_IMPORTED_MODULE_15___default","loglevel__WEBPACK_IMPORTED_MODULE_16__","loglevel__WEBPACK_IMPORTED_MODULE_16___default","fast_deep_equal__WEBPACK_IMPORTED_MODULE_17__","fast_deep_equal__WEBPACK_IMPORTED_MODULE_17___default","messages","disconnected","permanentlyDisconnected","unsupportedSync","method","concat","invalidDuplexStream","invalidOptions","maxEventListeners","invalidRequestArgs","invalidRequestMethod","invalidRequestParams","invalidLoggerObject","invalidLoggerMethod","connected","chainId","TORUS_BUILD_ENV","BUTTON_POSITION","configuration","supportedVerifierList","api","translations","en","embed","continue","actionRequired","pendingAction","cookiesRequired","enableCookies","clickHere","de","ja","ko","zh","prodTorusUrl","localStorageKey","window","location","hostname","log","getLogger","getWindowId","Math","random","slice","getTorusUrl","_ref2","mark","_callee","buildEnv","torusUrl","logLevel","wrap","_context","prev","next","t0","abrupt","stop","_x","apply","arguments","FEATURES_PROVIDER_CHANGE_WINDOW","height","width","FEATURES_DEFAULT_WALLET_WINDOW","FEATURES_DEFAULT_POPUP_WINDOW","FEATURES_CONFIRM_WINDOW","getPopupFeatures","_ref","w","h","dualScreenLeft","undefined","screenLeft","screenX","dualScreenTop","screenTop","screenY","innerWidth","document","documentElement","clientWidth","screen","innerHeight","clientHeight","left","abs","top","BaseProvider","_SafeEventEmitter","_super","connectionStream","_this","_ref$maxEventListener","_ref$jsonRpcStreamNam","jsonRpcStreamName","Error","isTorus","setMaxListeners","_handleConnect","bind","_handleDisconnect","_handleStreamDisconnect","_rpcRequest","_initializeState","request","sendAsync","mux","ignoreStream","jsonRpcConnection","createStream","rpcEngine","req","res","error","rpc","invalidRequest","message","data","done","origin","middleware","_rpcEngine","jsonRpcConnectionEvents","events","value","_request","_callee2","args","params","_this2","_context2","Promise","resolve","reject","_x2","payload","callback","_this3","streamName","remoteLabel","emitter","warningMsg","stack","warn","listenerCount","emit","logStreamDisconnectWarning","handleEvent","handle","eventName","handler","_len","handlerArgs","_key","handlerWrapper","removeEventListener","addEventListener","documentReady","_documentReady","_callee26","_context26","readyState","htmlToElement","html","template","createElement","trimmedHtml","trim","innerHTML","content","firstChild","PopupHandler","_SafeEventEmitter2","_super2","_this4","url","target","features","windowTimer","iClosedWindow","_setupTimer","_this5","Number","setInterval","closed","clearInterval","_this$window","open","href","focus","close","locationReplaceOnRedirect","replace","ownKeys$2","object","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","TorusCommunicationProvider","_BaseProvider","_super3","_this6","_ref$maxEventListener2","_ref$jsonRpcStreamNam2","_state","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","_objectSpread$2","_defaultState","dappStorageKey","languageTranslations","userLanguage","navigator","language","userLanguages","split","getUserLanguage","embedTranslations","windowRefs","on","isConnected","IFRAME_STATUS","isFullScreen","rid","_displayIframe","isFull","CREATE_WINDOW","windowId","_createPopupBlockAlert","CLOSE_WINDOW","_handleCloseWindow","USER_LOGGED_IN","currentLoginProvider","isLoggedIn","USER_LOGGED_OUT","get","isIFrameFullScreen","_initializeState2","_callee3","torusAlertContainer","torusIframe","_yield$this$request","_this7","_context3","GET_PROVIDER_STATE","sent","info","initialized","finish","_x3","_this8","_ref3","finalUrl","URL","hash","handledWindow","OPENED_WINDOW","once","CLOSED_WINDOW","_ref4","_ref4$isFull","_ref4$rid","style","display","right","bottom","torusWidgetVisibility","buttonPosition","assign","cb","_payload","jsonrpc","tryWindowHandle","debug","isRecoverable","errorMessage","isPermanentlyDisconnected","_createPopupBlockAlert2","_callee4","logoUrl","torusAlert","successAlert","btnContainer","bindOnLoad","attachOnLoad","_this9","_context4","getLogoUrl","appendChild","_handleWindow","remove","children","_x4","_x5","ownKeys$1","hasEmittedConnection","TorusInPageProvider","_BaseProvider2","_super4","_this10","_ref$maxEventListener3","_ref$jsonRpcStreamNam3","_objectSpread$1","selectedAddress","_handleAccountsChanged","_handleChainChanged","_handleUnlockStateChanged","ACCOUNTS_CHANGED","UNLOCK_STATE_CHANGED","CHAIN_CHANGED","_initializeState3","_callee5","_yield$this$request2","accounts","isUnlocked","_context5","_this11","isInternal","err","result","isEthAccounts","finalAccounts","_step","_iterator","s","account","e","f","_ref5","_ref6","imgExists","img","onload","onerror","src","getSiteName","siteName","querySelector","metaTitle","title","getSiteIcon","_x6","_getSiteIcon","_callee27","_document","icon","_context27","from","querySelectorAll","find","_icon","Boolean","t1","t2","getSiteMetadata","_ref7","_callee6","_context6","name","ownKeys","_objectSpread","PROVIDER_UNSAFE_METHODS","COMMUNICATION_UNSAFE_METHODS","SET_PROVIDER","isLocalStorageAvailable","type","storage","x","setItem","removeItem","code","storageAvailable","_preLoadIframe","_callee7","torusIframeHtml","_yield$getTorusUrl","_context7","crossOrigin","rel","relList","supports","head","_ref8","_ref8$modalZIndex","modalZIndex","isInitialized","requestedLoginProvider","alertZIndex","communicationProvider","_init","_callee10","_ref9","_ref9$buildEnv","_ref9$enableLogging","enableLogging","network","_ref9$showTorusButton","showTorusButton","_ref9$useLocalStorage","useLocalStorage","_ref9$buttonPosition","_ref9$apiKey","apiKey","_ref9$extraParams","extraParams","_yield$getTorusUrl2","torusIframeUrl","hashParams","handleSetup","_this12","_args10","_context10","setDefaultLevel","enableAll","disableAll","handleDappStorageKey","pathname","endsWith","URLSearchParams","append","styleLink","_ref10","_callee9","_context9","body","_callee8","dappMetadata","_context8","contentWindow","postMessage","_setupWeb3","hideTorusButton","torus","_login","_callee11","_this13","_args11","_context11","loginProvider","provider","login_hint","_loginWithPrivateKey","_callee12","loginParams","privateKey","userInfo","_yield$this$communica","_context12","success","_x7","_logout","_callee13","_context13","LOGOUT","_cleanUp","_callee14","_context14","logout","clearInit","isElement","element","Element","Document","contains","_setProvider","_callee15","_context15","_x8","_showWallet","_callee16","path","instanceId","finalPath","_args16","_context16","WALLET_INSTANCE_ID","searchParams","_x9","_getUserInfo","_callee17","userInfoResponse","_context17","USER_INFO","_initiateTopup","_callee18","topupResponse","_context18","TOPUP","_x10","_x11","_getAccounts","_callee19","response","_context19","_sendTransaction","_callee20","transaction","_context20","serialize","requireAllSignatures","_x12","_signTransaction","_callee21","parsed","signature","_context21","serializeMessage","messageOnly","JSON","parse","publicKey","addSignature","_x13","_signAllTransactions","_callee22","transactions","encodedMessage","responses","signatures","_context22","map","tx","item","idx","_x14","_signMessage","_callee23","_context23","_x15","_getGaslessPublicKey","_callee24","_context24","storedKey","localStorage","getItem","generatedKey","_setupWeb","_callee25","providerParams","providerStream","communicationStream","inPageProvider","detectAccountRequestPrototypeModifier","proxiedInPageProvider","proxiedCommunicationProvider","_this14","_context25","targetWindow","includes","m","originalMethod","self","_request$params","login","then","catch","Proxy","deleteProperty","all","_x16","r","SolanaWalletAdapter","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_get_js__WEBPACK_IMPORTED_MODULE_5__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_6__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_7__","C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_8__","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default","_toruslabs_solana_embed__WEBPACK_IMPORTED_MODULE_10__","_web3auth_base__WEBPACK_IMPORTED_MODULE_11__","_web3auth_solana_provider__WEBPACK_IMPORTED_MODULE_12__","loglevel__WEBPACK_IMPORTED_MODULE_13__","loglevel__WEBPACK_IMPORTED_MODULE_13___default","_BaseAdapter","TORUS_SOLANA","SOLANA","EXTERNAL","NOT_READY","torusWalletOptions","adapterSettings","initParams","loginSettings","chainConfig","_this$solanaProvider","status","CONNECTED","solanaProvider","set","_","options","_this$chainConfig","blockExplorer","displayName","ticker","tickerName","rpcTarget","_this$chainConfig2","_chainId","_blockExplorer","_displayName","_rpcTarget","_ticker","_tickerName","blockExplorerUrl","logo","torusInstance","init","config","READY","autoConnect","rehydrated","connect","ERRORED","_connect","notReady","CONNECTING","adapter","setupProvider","reconnected","connectionError","_disconnect","_args3","cleanup","notConnectedError","DISCONNECTED","getUserInfo"],"sources":["static/js/9.f51ce1d8.chunk.js"],"mappings":"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"},"input":"(this[\"webpackJsonponline-polling\"] = this[\"webpackJsonponline-polling\"] || []).push([[9,11],{\n\n/***/ 1377:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 1385:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 1392:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 1400:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n // do not edit .js files directly - edit src/index.jst\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n    var length, i, keys;\n\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n\n      for (i = length; i-- !== 0;) {\n        if (!equal(a[i], b[i])) return false;\n      }\n\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;) {\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    }\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  } // true if both NaN, false otherwise\n\n\n  return a !== a && b !== b;\n};\n\n/***/ }),\n\n/***/ 1401:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar isStream = function isStream(stream) {\n  return stream !== null && typeof stream === 'object' && typeof stream.pipe === 'function';\n};\n\nisStream.writable = function (stream) {\n  return isStream(stream) && stream.writable !== false && typeof stream._write === 'function' && typeof stream._writableState === 'object';\n};\n\nisStream.readable = function (stream) {\n  return isStream(stream) && stream.readable !== false && typeof stream._read === 'function' && typeof stream._readableState === 'object';\n};\n\nisStream.duplex = function (stream) {\n  return isStream.writable(stream) && isStream.readable(stream);\n};\n\nisStream.transform = function (stream) {\n  return isStream.duplex(stream) && typeof stream._transform === 'function';\n};\n\nmodule.exports = isStream;\n\n/***/ }),\n\n/***/ 1402:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 1403:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 1405:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 1498:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(Buffer) {/* unused harmony export BUTTON_POSITION */\n/* unused harmony export LOGIN_PROVIDER */\n/* unused harmony export PAYMENT_PROVIDER */\n/* unused harmony export TORUS_BUILD_ENV */\n/* unused harmony export TorusInPageProvider */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Torus; });\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(203);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(12);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(9);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(10);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(11);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(14);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _solana_web3_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1438);\n/* harmony import */ var _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(1388);\n/* harmony import */ var _toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(291);\n/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(85);\n/* harmony import */ var eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(234);\n/* harmony import */ var eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var is_stream__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(1401);\n/* harmony import */ var is_stream__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(is_stream__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var pump__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(242);\n/* harmony import */ var pump__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(pump__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(29);\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var fast_deep_equal__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(1400);\n/* harmony import */ var fast_deep_equal__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(fast_deep_equal__WEBPACK_IMPORTED_MODULE_17__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar messages = {\n  errors: {\n    disconnected: function disconnected() {\n      return \"Torus: Lost connection to Torus.\";\n    },\n    permanentlyDisconnected: function permanentlyDisconnected() {\n      return \"Torus: Disconnected from iframe. Page reload required.\";\n    },\n    unsupportedSync: function unsupportedSync(method) {\n      return \"Torus: The Torus Ethereum provider does not support synchronous methods like \".concat(method, \" without a callback parameter.\");\n    },\n    invalidDuplexStream: function invalidDuplexStream() {\n      return \"Must provide a Node.js-style duplex stream.\";\n    },\n    invalidOptions: function invalidOptions(maxEventListeners) {\n      return \"Invalid options. Received: { maxEventListeners: \".concat(maxEventListeners, \"}\");\n    },\n    invalidRequestArgs: function invalidRequestArgs() {\n      return \"Expected a single, non-array, object argument.\";\n    },\n    invalidRequestMethod: function invalidRequestMethod() {\n      return \"'args.method' must be a non-empty string.\";\n    },\n    invalidRequestParams: function invalidRequestParams() {\n      return \"'args.params' must be an object or array if provided.\";\n    },\n    invalidLoggerObject: function invalidLoggerObject() {\n      return \"'args.logger' must be an object if provided.\";\n    },\n    invalidLoggerMethod: function invalidLoggerMethod(method) {\n      return \"'args.logger' must include required method '\".concat(method, \"'.\");\n    }\n  },\n  info: {\n    connected: function connected(chainId) {\n      return \"Torus: Connected to chain with ID \\\"\".concat(chainId, \"\\\".\");\n    }\n  },\n  warnings: {}\n};\nvar PAYMENT_PROVIDER = {\n  MOONPAY: \"moonpay\",\n  WYRE: \"wyre\",\n  RAMPNETWORK: \"rampnetwork\",\n  XANPOOL: \"xanpool\",\n  MERCURYO: \"mercuryo\",\n  TRANSAK: \"transak\"\n};\nvar TORUS_BUILD_ENV = {\n  PRODUCTION: \"production\",\n  DEVELOPMENT: \"development\",\n  TESTING: \"testing\"\n};\nvar BUTTON_POSITION = {\n  BOTTOM_LEFT: \"bottom-left\",\n  TOP_LEFT: \"top-left\",\n  BOTTOM_RIGHT: \"bottom-right\",\n  TOP_RIGHT: \"top-right\"\n};\nvar LOGIN_PROVIDER = {\n  GOOGLE: \"google\",\n  FACEBOOK: \"facebook\",\n  REDDIT: \"reddit\",\n  DISCORD: \"discord\",\n  TWITCH: \"twitch\",\n  APPLE: \"apple\",\n  LINE: \"line\",\n  GITHUB: \"github\",\n  KAKAO: \"kakao\",\n  LINKEDIN: \"linkedin\",\n  TWITTER: \"twitter\",\n  WEIBO: \"weibo\",\n  WECHAT: \"wechat\",\n  EMAIL_PASSWORDLESS: \"email_passwordless\"\n};\nvar translations = {\n  en: {\n    embed: {\n      continue: \"Continue\",\n      actionRequired: \"Authorization required\",\n      pendingAction: \"Click continue to proceed with your request in a popup\",\n      cookiesRequired: \"Cookies Required\",\n      enableCookies: \"Please enable cookies in your browser preferences to access Torus\",\n      clickHere: \"More Info\"\n    }\n  },\n  de: {\n    embed: {\n      continue: \"Fortsetzen\",\n      actionRequired: \"Autorisierung erforderlich\",\n      pendingAction: \"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren\",\n      cookiesRequired: \"Cookies bentigt\",\n      enableCookies: \"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen\",\n      clickHere: \"Mehr Info\"\n    }\n  },\n  ja: {\n    embed: {\n      continue: \"\",\n      actionRequired: \"\",\n      pendingAction: \"\",\n      cookiesRequired: \"\",\n      enableCookies: \"TorusCookie\",\n      clickHere: \"\"\n    }\n  },\n  ko: {\n    embed: {\n      continue: \"\",\n      actionRequired: \" \",\n      pendingAction: \"    .\",\n      cookiesRequired: \" \",\n      enableCookies: \"     Torus .\",\n      clickHere: \"  \"\n    }\n  },\n  zh: {\n    embed: {\n      continue: \"\",\n      actionRequired: \"\",\n      pendingAction: \"\",\n      cookiesRequired: \"Cookie\",\n      enableCookies: \"cookieTorus\",\n      clickHere: \"\"\n    }\n  }\n};\nvar configuration = {\n  supportedVerifierList: [LOGIN_PROVIDER.GOOGLE, LOGIN_PROVIDER.REDDIT, LOGIN_PROVIDER.DISCORD],\n  api: \"https://api.tor.us\",\n  translations: translations,\n  prodTorusUrl: \"\",\n  localStorageKey: \"torus-\".concat(window.location.hostname)\n};\nvar log = loglevel__WEBPACK_IMPORTED_MODULE_16___default.a.getLogger(\"solana-embed\");\n/**\n * json-rpc-engine middleware that logs RPC errors and and validates req.method.\n *\n * @param log - The logging API to use.\n * @returns  json-rpc-engine middleware function\n */\n\nfunction createErrorMiddleware() {\n  return function (req, res, next) {\n    // json-rpc-engine will terminate the request when it notices this error\n    if (typeof req.method !== \"string\" || !req.method) {\n      res.error = eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__[\"ethErrors\"].rpc.invalidRequest({\n        message: \"The request 'method' must be a non-empty string.\",\n        data: req\n      });\n    }\n\n    next(function (done) {\n      var error = res.error;\n\n      if (!error) {\n        return done();\n      }\n\n      log.error(\"Torus - RPC Error: \".concat(error.message), error);\n      return done();\n    });\n  };\n}\n/**\n * Logs a stream disconnection error. Emits an 'error' if given an\n * EventEmitter that has listeners for the 'error' event.\n *\n * @param log - The logging API to use.\n * @param remoteLabel - The label of the disconnected stream.\n * @param error - The associated error to log.\n * @param emitter - The logging API to use.\n */\n\n\nfunction logStreamDisconnectWarning(remoteLabel, error, emitter) {\n  var warningMsg = \"Torus: Lost connection to \\\"\".concat(remoteLabel, \"\\\".\");\n\n  if (error !== null && error !== void 0 && error.stack) {\n    warningMsg += \"\\n\".concat(error.stack);\n  }\n\n  log.warn(warningMsg);\n\n  if (emitter && emitter.listenerCount(\"error\") > 0) {\n    emitter.emit(\"error\", warningMsg);\n  }\n}\n\nvar getWindowId = function getWindowId() {\n  return Math.random().toString(36).slice(2);\n};\n\nvar getTorusUrl = /*#__PURE__*/function () {\n  var _ref2 = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee(buildEnv) {\n    var torusUrl, logLevel;\n    return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.t0 = buildEnv;\n            _context.next = _context.t0 === \"testing\" ? 3 : _context.t0 === \"development\" ? 6 : 9;\n            break;\n\n          case 3:\n            torusUrl = \"https://solana-testing.tor.us\";\n            logLevel = \"debug\";\n            return _context.abrupt(\"break\", 12);\n\n          case 6:\n            torusUrl = \"http://localhost:8080\";\n            logLevel = \"debug\";\n            return _context.abrupt(\"break\", 12);\n\n          case 9:\n            torusUrl = \"https://solana.tor.us\";\n            logLevel = \"error\";\n            return _context.abrupt(\"break\", 12);\n\n          case 12:\n            return _context.abrupt(\"return\", {\n              torusUrl: torusUrl,\n              logLevel: logLevel\n            });\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getTorusUrl(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar getUserLanguage = function getUserLanguage() {\n  var userLanguage = window.navigator.language || \"en-US\";\n  var userLanguages = userLanguage.split(\"-\");\n  userLanguage = Object.prototype.hasOwnProperty.call(configuration.translations, userLanguages[0]) ? userLanguages[0] : \"en\";\n  return userLanguage;\n};\n\nvar FEATURES_PROVIDER_CHANGE_WINDOW = {\n  height: 660,\n  width: 375\n};\nvar FEATURES_DEFAULT_WALLET_WINDOW = {\n  height: 740,\n  width: 1315\n};\nvar FEATURES_DEFAULT_POPUP_WINDOW = {\n  height: 700,\n  width: 1200\n};\nvar FEATURES_CONFIRM_WINDOW = {\n  height: 600,\n  width: 400\n};\n\nfunction storageAvailable(type) {\n  var storage;\n\n  try {\n    storage = window[type];\n    var x = \"__storage_test__\";\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (e) {\n    return e && ( // everything except Firefox\n    e.code === 22 || // Firefox\n    e.code === 1014 || // test name field too, because code might not be present\n    // everything except Firefox\n    e.name === \"QuotaExceededError\" || // Firefox\n    e.name === \"NS_ERROR_DOM_QUOTA_REACHED\") && // acknowledge QuotaExceededError only if there's something already stored\n    storage && storage.length !== 0;\n  }\n}\n/**\n * popup handler utils\n */\n\n\nfunction getPopupFeatures(_ref) {\n  var w = _ref.width,\n      h = _ref.height; // Fixes dual-screen position                             Most browsers      Firefox\n\n  var dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX;\n  var dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;\n  var width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : window.screen.width;\n  var height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : window.screen.height;\n  var systemZoom = 1; // No reliable estimate\n\n  var left = Math.abs((width - w) / 2 / systemZoom + dualScreenLeft);\n  var top = Math.abs((height - h) / 2 / systemZoom + dualScreenTop);\n  var features = \"titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=\".concat(h / systemZoom, \",width=\").concat(w / systemZoom, \",top=\").concat(top, \",left=\").concat(left);\n  return features;\n}\n\nvar BaseProvider = /*#__PURE__*/function (_SafeEventEmitter) {\n  Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(BaseProvider, _SafeEventEmitter);\n\n  var _super = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(BaseProvider);\n\n  /**\n   * Indicating that this provider is a Torus provider.\n   */\n  function BaseProvider(connectionStream, _ref) {\n    var _this;\n\n    Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(this, BaseProvider);\n\n    var _ref$maxEventListener = _ref.maxEventListeners,\n        maxEventListeners = _ref$maxEventListener === void 0 ? 100 : _ref$maxEventListener,\n        _ref$jsonRpcStreamNam = _ref.jsonRpcStreamName,\n        jsonRpcStreamName = _ref$jsonRpcStreamNam === void 0 ? \"provider\" : _ref$jsonRpcStreamNam;\n    _this = _super.call(this);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"isTorus\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"_rpcEngine\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"jsonRpcConnectionEvents\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"_state\", void 0);\n\n    if (!Object(is_stream__WEBPACK_IMPORTED_MODULE_14__[\"duplex\"])(connectionStream)) {\n      throw new Error(messages.errors.invalidDuplexStream());\n    }\n\n    _this.isTorus = true;\n\n    _this.setMaxListeners(maxEventListeners);\n\n    _this._handleConnect = _this._handleConnect.bind(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this));\n    _this._handleDisconnect = _this._handleDisconnect.bind(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this));\n    _this._handleStreamDisconnect = _this._handleStreamDisconnect.bind(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this));\n    _this._rpcRequest = _this._rpcRequest.bind(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this));\n    _this._initializeState = _this._initializeState.bind(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this));\n    _this.request = _this.request.bind(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this));\n    _this.sendAsync = _this.sendAsync.bind(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this)); // this.enable = this.enable.bind(this);\n    // setup connectionStream multiplexing\n\n    var mux = new _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* ObjectMultiplex */ \"c\"]();\n    pump__WEBPACK_IMPORTED_MODULE_15___default()(connectionStream, mux, connectionStream, _this._handleStreamDisconnect.bind(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"Torus\")); // ignore phishing warning message (handled elsewhere)\n\n    mux.ignoreStream(\"phishing\"); // setup own event listeners\n    // connect to async provider\n\n    var jsonRpcConnection = Object(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* createStreamMiddleware */ \"i\"])();\n    pump__WEBPACK_IMPORTED_MODULE_15___default()(jsonRpcConnection.stream, mux.createStream(jsonRpcStreamName), jsonRpcConnection.stream, _this._handleStreamDisconnect.bind(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"Torus RpcProvider\")); // handle RPC requests via dapp-side rpc engine\n\n    var rpcEngine = new _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* JRPCEngine */ \"b\"]();\n    rpcEngine.push(Object(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* createIdRemapMiddleware */ \"g\"])());\n    rpcEngine.push(createErrorMiddleware());\n    rpcEngine.push(Object(_toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* createLoggerMiddleware */ \"h\"])({\n      origin: location.origin\n    }));\n    rpcEngine.push(jsonRpcConnection.middleware);\n    _this._rpcEngine = rpcEngine;\n    _this.jsonRpcConnectionEvents = jsonRpcConnection.events;\n    return _this;\n  }\n  /**\n   * Submits an RPC request for the given method, with the given params.\n   * Resolves with the result of the method call, or rejects on error.\n   */\n\n\n  Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(BaseProvider, [{\n    key: \"request\",\n    value: function () {\n      var _request = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee2(args) {\n        var _this2 = this;\n\n        var method, params;\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(!args || typeof args !== \"object\" || Array.isArray(args))) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__[\"ethErrors\"].rpc.invalidRequest({\n                  message: messages.errors.invalidRequestArgs(),\n                  data: args\n                });\n\n              case 2:\n                method = args.method, params = args.params;\n\n                if (!(typeof method !== \"string\" || method.length === 0)) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__[\"ethErrors\"].rpc.invalidRequest({\n                  message: messages.errors.invalidRequestMethod(),\n                  data: args\n                });\n\n              case 5:\n                if (!(params !== undefined && !Array.isArray(params) && (typeof params !== \"object\" || params === null))) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__[\"ethErrors\"].rpc.invalidRequest({\n                  message: messages.errors.invalidRequestParams(),\n                  data: args\n                });\n\n              case 7:\n                return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this2._rpcRequest({\n                    method: method,\n                    params: params\n                  }, Object(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* getRpcPromiseCallback */ \"j\"])(resolve, reject));\n                }));\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function request(_x2) {\n        return _request.apply(this, arguments);\n      }\n\n      return request;\n    }()\n    /**\n     * Submits an RPC request per the given JSON-RPC request object.\n     */\n\n  }, {\n    key: \"send\",\n    value: function send(payload, callback) {\n      this._rpcRequest(payload, callback);\n    }\n    /**\n     * Submits an RPC request per the given JSON-RPC request object.\n     */\n\n  }, {\n    key: \"sendAsync\",\n    value: function sendAsync(payload) {\n      var _this3 = this;\n\n      return new Promise(function (resolve, reject) {\n        _this3._rpcRequest(payload, Object(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* getRpcPromiseCallback */ \"j\"])(resolve, reject));\n      });\n    }\n    /**\n     * Called when connection is lost to critical streams.\n     *\n     * emits TorusInpageProvider#disconnect\n     */\n\n  }, {\n    key: \"_handleStreamDisconnect\",\n    value: function _handleStreamDisconnect(streamName, error) {\n      logStreamDisconnectWarning(streamName, error, this);\n\n      this._handleDisconnect(false, error ? error.message : undefined);\n    }\n  }]);\n\n  return BaseProvider;\n}(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* SafeEventEmitter */ \"e\"]);\n\nvar handleEvent = function handleEvent(handle, eventName, handler) {\n  for (var _len = arguments.length, handlerArgs = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    handlerArgs[_key - 3] = arguments[_key];\n  }\n\n  var handlerWrapper = function handlerWrapper() {\n    handler.apply(void 0, handlerArgs);\n    handle.removeEventListener(eventName, handlerWrapper);\n  };\n\n  handle.addEventListener(eventName, handlerWrapper);\n};\n\nfunction documentReady() {\n  return _documentReady.apply(this, arguments);\n}\n\nfunction _documentReady() {\n  _documentReady = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee26() {\n    return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee26$(_context26) {\n      while (1) {\n        switch (_context26.prev = _context26.next) {\n          case 0:\n            return _context26.abrupt(\"return\", new Promise(function (resolve) {\n              if (document.readyState !== \"loading\") {\n                resolve();\n              } else {\n                handleEvent(document, \"DOMContentLoaded\", resolve);\n              }\n            }));\n\n          case 1:\n          case \"end\":\n            return _context26.stop();\n        }\n      }\n    }, _callee26);\n  }));\n  return _documentReady.apply(this, arguments);\n}\n\nvar htmlToElement = function htmlToElement(html) {\n  var template = window.document.createElement(\"template\");\n  var trimmedHtml = html.trim(); // Never return a text node of whitespace as the result\n\n  template.innerHTML = trimmedHtml;\n  return template.content.firstChild;\n};\n\nvar PopupHandler = /*#__PURE__*/function (_SafeEventEmitter2) {\n  Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(PopupHandler, _SafeEventEmitter2);\n\n  var _super2 = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(PopupHandler);\n\n  function PopupHandler(_ref) {\n    var _this4;\n\n    Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(this, PopupHandler);\n\n    var url = _ref.url,\n        target = _ref.target,\n        features = _ref.features;\n    _this4 = _super2.call(this);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this4), \"url\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this4), \"target\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this4), \"features\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this4), \"window\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this4), \"windowTimer\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this4), \"iClosedWindow\", void 0);\n\n    _this4.url = url;\n    _this4.target = target || \"_blank\";\n    _this4.features = features || getPopupFeatures(FEATURES_DEFAULT_POPUP_WINDOW);\n    _this4.window = undefined;\n    _this4.windowTimer = undefined;\n    _this4.iClosedWindow = false;\n\n    _this4._setupTimer();\n\n    return _this4;\n  }\n\n  Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(PopupHandler, [{\n    key: \"_setupTimer\",\n    value: function _setupTimer() {\n      var _this5 = this;\n\n      this.windowTimer = Number(setInterval(function () {\n        if (_this5.window && _this5.window.closed) {\n          clearInterval(_this5.windowTimer);\n\n          if (!_this5.iClosedWindow) {\n            _this5.emit(\"close\");\n          }\n\n          _this5.iClosedWindow = false;\n          _this5.window = undefined;\n        }\n\n        if (_this5.window === undefined) clearInterval(_this5.windowTimer);\n      }, 500));\n    }\n  }, {\n    key: \"open\",\n    value: function open() {\n      var _this$window;\n\n      this.window = window.open(this.url.href, this.target, this.features);\n      if ((_this$window = this.window) !== null && _this$window !== void 0 && _this$window.focus) this.window.focus();\n      return Promise.resolve();\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.iClosedWindow = true;\n      if (this.window) this.window.close();\n    }\n  }, {\n    key: \"redirect\",\n    value: function redirect(locationReplaceOnRedirect) {\n      if (locationReplaceOnRedirect) {\n        window.location.replace(this.url.href);\n      } else {\n        window.location.href = this.url.href;\n      }\n    }\n  }]);\n\n  return PopupHandler;\n}(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* SafeEventEmitter */ \"e\"]);\n\nfunction ownKeys$2(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys$2(Object(source), !0).forEach(function (key) {\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$2(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nvar TorusCommunicationProvider = /*#__PURE__*/function (_BaseProvider) {\n  Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(TorusCommunicationProvider, _BaseProvider);\n\n  var _super3 = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(TorusCommunicationProvider);\n\n  function TorusCommunicationProvider(connectionStream, _ref) {\n    var _this6;\n\n    Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(this, TorusCommunicationProvider);\n\n    var _ref$maxEventListener2 = _ref.maxEventListeners,\n        maxEventListeners = _ref$maxEventListener2 === void 0 ? 100 : _ref$maxEventListener2,\n        _ref$jsonRpcStreamNam2 = _ref.jsonRpcStreamName,\n        jsonRpcStreamName = _ref$jsonRpcStreamNam2 === void 0 ? \"provider\" : _ref$jsonRpcStreamNam2;\n    _this6 = _super3.call(this, connectionStream, {\n      maxEventListeners: maxEventListeners,\n      jsonRpcStreamName: jsonRpcStreamName\n    }); // private state\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this6), \"embedTranslations\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this6), \"torusUrl\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this6), \"dappStorageKey\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this6), \"windowRefs\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this6), \"tryWindowHandle\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this6), \"torusAlertContainer\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this6), \"torusIframe\", void 0);\n\n    _this6._state = _objectSpread$2({}, TorusCommunicationProvider._defaultState); // public state\n\n    _this6.torusUrl = \"\";\n    _this6.dappStorageKey = \"\";\n    var languageTranslations = configuration.translations[getUserLanguage()];\n    _this6.embedTranslations = languageTranslations.embed;\n    _this6.windowRefs = {}; // setup own event listeners\n    // EIP-1193 connect\n\n    _this6.on(\"connect\", function () {\n      _this6._state.isConnected = true;\n    });\n\n    var notificationHandler = function notificationHandler(payload) {\n      var method = payload.method,\n          params = payload.params;\n\n      if (method === _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_NOTIFICATIONS */ \"c\"].IFRAME_STATUS) {\n        var isFullScreen = params.isFullScreen,\n            rid = params.rid;\n\n        _this6._displayIframe({\n          isFull: isFullScreen,\n          rid: rid\n        });\n      } else if (method === _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_NOTIFICATIONS */ \"c\"].CREATE_WINDOW) {\n        var windowId = params.windowId,\n            url = params.url;\n\n        _this6._createPopupBlockAlert(windowId, url);\n      } else if (method === _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_NOTIFICATIONS */ \"c\"].CLOSE_WINDOW) {\n        _this6._handleCloseWindow(params);\n      } else if (method === _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_NOTIFICATIONS */ \"c\"].USER_LOGGED_IN) {\n        var currentLoginProvider = params.currentLoginProvider;\n        _this6._state.isLoggedIn = true;\n        _this6._state.currentLoginProvider = currentLoginProvider;\n      } else if (method === _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_NOTIFICATIONS */ \"c\"].USER_LOGGED_OUT) {\n        _this6._state.isLoggedIn = false;\n        _this6._state.currentLoginProvider = null;\n\n        _this6._displayIframe();\n      }\n    };\n\n    _this6.jsonRpcConnectionEvents.on(\"notification\", notificationHandler);\n\n    return _this6;\n  }\n\n  Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(TorusCommunicationProvider, [{\n    key: \"isLoggedIn\",\n    get: function get() {\n      return this._state.isLoggedIn;\n    }\n  }, {\n    key: \"isIFrameFullScreen\",\n    get: function get() {\n      return this._state.isIFrameFullScreen;\n    }\n    /**\n     * Returns whether the inPage provider is connected to Torus.\n     */\n\n  }, {\n    key: \"isConnected\",\n    value: function isConnected() {\n      return this._state.isConnected;\n    }\n  }, {\n    key: \"_initializeState\",\n    value: function () {\n      var _initializeState2 = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee3(params) {\n        var _this7 = this;\n\n        var torusUrl, dappStorageKey, torusAlertContainer, torusIframe, _yield$this$request, currentLoginProvider, isLoggedIn;\n\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                torusUrl = params.torusUrl, dappStorageKey = params.dappStorageKey, torusAlertContainer = params.torusAlertContainer, torusIframe = params.torusIframe;\n                this.torusUrl = torusUrl;\n                this.dappStorageKey = dappStorageKey;\n                this.torusAlertContainer = torusAlertContainer;\n                this.torusIframe = torusIframe;\n                this.torusIframe.addEventListener(\"load\", function () {\n                  // only do this if iframe is not full screen\n                  if (!_this7._state.isIFrameFullScreen) _this7._displayIframe();\n                });\n                _context3.next = 9;\n                return this.request({\n                  method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].GET_PROVIDER_STATE,\n                  params: []\n                });\n\n              case 9:\n                _yield$this$request = _context3.sent;\n                currentLoginProvider = _yield$this$request.currentLoginProvider;\n                isLoggedIn = _yield$this$request.isLoggedIn;\n\n                // indicate that we've connected, for EIP-1193 compliance\n                this._handleConnect(currentLoginProvider, isLoggedIn);\n\n                _context3.next = 18;\n                break;\n\n              case 15:\n                _context3.prev = 15;\n                _context3.t0 = _context3[\"catch\"](0);\n                log.error(\"Torus: Failed to get initial state. Please report this bug.\", _context3.t0);\n\n              case 18:\n                _context3.prev = 18;\n                log.info(\"initialized communication state\");\n                this._state.initialized = true;\n                this.emit(\"_initialized\");\n                return _context3.finish(18);\n\n              case 23:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 15, 18, 23]]);\n      }));\n\n      function _initializeState(_x3) {\n        return _initializeState2.apply(this, arguments);\n      }\n\n      return _initializeState;\n    }()\n  }, {\n    key: \"_handleWindow\",\n    value: function _handleWindow(windowId) {\n      var _this8 = this;\n\n      var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          url = _ref3.url,\n          target = _ref3.target,\n          features = _ref3.features;\n\n      var finalUrl = new URL(url || \"\".concat(this.torusUrl, \"/redirect?windowId=\").concat(windowId));\n\n      if (this.dappStorageKey) {\n        // If multiple instances, it returns the first one\n        if (finalUrl.hash) finalUrl.hash += \"&dappStorageKey=\".concat(this.dappStorageKey);else finalUrl.hash = \"#dappStorageKey=\".concat(this.dappStorageKey);\n      }\n\n      var handledWindow = new PopupHandler({\n        url: finalUrl,\n        target: target,\n        features: features\n      });\n      handledWindow.open();\n\n      if (!handledWindow.window) {\n        this._createPopupBlockAlert(windowId, finalUrl.href);\n\n        return;\n      } // Add to collection only if window is opened\n\n\n      this.windowRefs[windowId] = handledWindow; // We tell the iframe that the window has been successfully opened\n\n      this.request({\n        method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].OPENED_WINDOW,\n        params: {\n          windowId: windowId\n        }\n      });\n      handledWindow.once(\"close\", function () {\n        // user closed the window\n        delete _this8.windowRefs[windowId];\n\n        _this8.request({\n          method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].CLOSED_WINDOW,\n          params: {\n            windowId: windowId\n          }\n        });\n      });\n    }\n  }, {\n    key: \"_displayIframe\",\n    value: function _displayIframe() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref4$isFull = _ref4.isFull,\n          isFull = _ref4$isFull === void 0 ? false : _ref4$isFull,\n          _ref4$rid = _ref4.rid,\n          rid = _ref4$rid === void 0 ? \"\" : _ref4$rid;\n\n      var style = {}; // set phase\n\n      if (!isFull) {\n        style.display = this._state.torusWidgetVisibility ? \"block\" : \"none\";\n        style.height = \"70px\";\n        style.width = \"70px\";\n\n        switch (this._state.buttonPosition) {\n          case BUTTON_POSITION.TOP_LEFT:\n            style.top = \"0px\";\n            style.left = \"0px\";\n            style.right = \"auto\";\n            style.bottom = \"auto\";\n            break;\n\n          case BUTTON_POSITION.TOP_RIGHT:\n            style.top = \"0px\";\n            style.right = \"0px\";\n            style.left = \"auto\";\n            style.bottom = \"auto\";\n            break;\n\n          case BUTTON_POSITION.BOTTOM_RIGHT:\n            style.bottom = \"0px\";\n            style.right = \"0px\";\n            style.top = \"auto\";\n            style.left = \"auto\";\n            break;\n\n          case BUTTON_POSITION.BOTTOM_LEFT:\n          default:\n            style.bottom = \"0px\";\n            style.left = \"0px\";\n            style.top = \"auto\";\n            style.right = \"auto\";\n            break;\n        }\n      } else {\n        style.display = \"block\";\n        style.width = \"100%\";\n        style.height = \"100%\";\n        style.top = \"0px\";\n        style.right = \"0px\";\n        style.left = \"0px\";\n        style.bottom = \"0px\";\n      }\n\n      Object.assign(this.torusIframe.style, style);\n      this._state.isIFrameFullScreen = isFull;\n      this.request({\n        method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].IFRAME_STATUS,\n        params: {\n          isIFrameFullScreen: isFull,\n          rid: rid\n        }\n      });\n    }\n  }, {\n    key: \"hideTorusButton\",\n    value: function hideTorusButton() {\n      this._state.torusWidgetVisibility = false;\n\n      this._displayIframe();\n    }\n  }, {\n    key: \"showTorusButton\",\n    value: function showTorusButton() {\n      this._state.torusWidgetVisibility = true;\n\n      this._displayIframe();\n    }\n    /**\n     * Internal RPC method. Forwards requests to background via the RPC engine.\n     * Also remap ids inbound and outbound\n     */\n\n  }, {\n    key: \"_rpcRequest\",\n    value: function _rpcRequest(payload, callback) {\n      var cb = callback;\n      var _payload = payload;\n\n      if (!Array.isArray(_payload)) {\n        if (!_payload.jsonrpc) {\n          _payload.jsonrpc = \"2.0\";\n        }\n      }\n\n      this.tryWindowHandle(_payload, cb);\n    }\n    /**\n     * When the provider becomes connected, updates internal state and emits\n     * required events. Idempotent.\n     *\n     * @param currentLoginProvider - The login Provider\n     * emits TorusInpageProvider#connect\n     */\n\n  }, {\n    key: \"_handleConnect\",\n    value: function _handleConnect(currentLoginProvider, isLoggedIn) {\n      if (!this._state.isConnected) {\n        this._state.isConnected = true;\n        this.emit(\"connect\", {\n          currentLoginProvider: currentLoginProvider,\n          isLoggedIn: isLoggedIn\n        });\n        log.debug(messages.info.connected(currentLoginProvider));\n      }\n    }\n    /**\n     * When the provider becomes disconnected, updates internal state and emits\n     * required events. Idempotent with respect to the isRecoverable parameter.\n     *\n     * Error codes per the CloseEvent status codes as required by EIP-1193:\n     * https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes\n     *\n     * @param isRecoverable - Whether the disconnection is recoverable.\n     * @param errorMessage - A custom error message.\n     * emits TorusInpageProvider#disconnect\n     */\n\n  }, {\n    key: \"_handleDisconnect\",\n    value: function _handleDisconnect(isRecoverable, errorMessage) {\n      if (this._state.isConnected || !this._state.isPermanentlyDisconnected && !isRecoverable) {\n        this._state.isConnected = false;\n        var error;\n\n        if (isRecoverable) {\n          error = new eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__[\"EthereumRpcError\"](1013, // Try again later\n          errorMessage || messages.errors.disconnected());\n          log.debug(error);\n        } else {\n          error = new eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__[\"EthereumRpcError\"](1011, // Internal error\n          errorMessage || messages.errors.permanentlyDisconnected());\n          log.error(error);\n          this._state.currentLoginProvider = null;\n          this._state.isLoggedIn = false;\n          this._state.torusWidgetVisibility = false;\n          this._state.isIFrameFullScreen = false;\n          this._state.isPermanentlyDisconnected = true;\n        }\n\n        this.emit(\"disconnect\", error);\n      }\n    } // Called if the iframe wants to close the window cause it is done processing the request\n\n  }, {\n    key: \"_handleCloseWindow\",\n    value: function _handleCloseWindow(params) {\n      var windowId = params.windowId;\n\n      if (this.windowRefs[windowId]) {\n        this.windowRefs[windowId].close();\n        delete this.windowRefs[windowId];\n      }\n    }\n  }, {\n    key: \"_createPopupBlockAlert\",\n    value: function () {\n      var _createPopupBlockAlert2 = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee4(windowId, url) {\n        var _this9 = this;\n\n        var logoUrl, torusAlert, successAlert, btnContainer, bindOnLoad, attachOnLoad;\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                logoUrl = this.getLogoUrl();\n                torusAlert = htmlToElement('<div id=\"torusAlert\" class=\"torus-alert--v2\">' + \"<div id=\\\"torusAlert__logo\\\"><img src=\\\"\".concat(logoUrl, \"\\\" /></div>\") + \"<div>\" + \"<h1 id=\\\"torusAlert__title\\\">\".concat(this.embedTranslations.actionRequired, \"</h1>\") + \"<p id=\\\"torusAlert__desc\\\">\".concat(this.embedTranslations.pendingAction, \"</p>\") + \"</div>\" + \"</div>\");\n                successAlert = htmlToElement(\"<div><a id=\\\"torusAlert__btn\\\">\".concat(this.embedTranslations.continue, \"</a></div>\"));\n                btnContainer = htmlToElement('<div id=\"torusAlert__btn-container\"></div>');\n                btnContainer.appendChild(successAlert);\n                torusAlert.appendChild(btnContainer);\n\n                bindOnLoad = function bindOnLoad() {\n                  successAlert.addEventListener(\"click\", function () {\n                    _this9._handleWindow(windowId, {\n                      url: url,\n                      target: \"_blank\",\n                      features: getPopupFeatures(FEATURES_CONFIRM_WINDOW)\n                    });\n\n                    torusAlert.remove();\n                    if (_this9.torusAlertContainer.children.length === 0) _this9.torusAlertContainer.style.display = \"none\";\n                  });\n                };\n\n                attachOnLoad = function attachOnLoad() {\n                  _this9.torusAlertContainer.appendChild(torusAlert);\n                };\n\n                _context4.next = 10;\n                return documentReady();\n\n              case 10:\n                attachOnLoad();\n                bindOnLoad();\n                this.torusAlertContainer.style.display = \"block\";\n\n              case 13:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function _createPopupBlockAlert(_x4, _x5) {\n        return _createPopupBlockAlert2.apply(this, arguments);\n      }\n\n      return _createPopupBlockAlert;\n    }()\n  }, {\n    key: \"getLogoUrl\",\n    value: function getLogoUrl() {\n      var logoUrl = \"\".concat(this.torusUrl, \"/images/torus_icon-blue.svg\");\n      return logoUrl;\n    }\n  }]);\n\n  return TorusCommunicationProvider;\n}(BaseProvider);\n\n_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(TorusCommunicationProvider, \"_defaultState\", {\n  buttonPosition: \"bottom-left\",\n  currentLoginProvider: null,\n  isIFrameFullScreen: false,\n  hasEmittedConnection: false,\n  torusWidgetVisibility: false,\n  initialized: false,\n  isLoggedIn: false,\n  isPermanentlyDisconnected: false,\n  isConnected: false\n});\n\nfunction ownKeys$1(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) {\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nvar TorusInPageProvider = /*#__PURE__*/function (_BaseProvider2) {\n  Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(TorusInPageProvider, _BaseProvider2);\n\n  var _super4 = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(TorusInPageProvider);\n\n  /**\n   * The chain ID of the currently connected Solana chain.\n   * See [chainId.network]{@link https://chainid.network} for more information.\n   */\n\n  /**\n   * The user's currently selected Solana address.\n   * If null, Torus is either locked or the user has not permitted any\n   * addresses to be viewed.\n   */\n  function TorusInPageProvider(connectionStream, _ref) {\n    var _this10;\n\n    Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(this, TorusInPageProvider);\n\n    var _ref$maxEventListener3 = _ref.maxEventListeners,\n        maxEventListeners = _ref$maxEventListener3 === void 0 ? 100 : _ref$maxEventListener3,\n        _ref$jsonRpcStreamNam3 = _ref.jsonRpcStreamName,\n        jsonRpcStreamName = _ref$jsonRpcStreamNam3 === void 0 ? \"provider\" : _ref$jsonRpcStreamNam3;\n    _this10 = _super4.call(this, connectionStream, {\n      maxEventListeners: maxEventListeners,\n      jsonRpcStreamName: jsonRpcStreamName\n    }); // private state\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this10), \"chainId\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this10), \"selectedAddress\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this10), \"tryWindowHandle\", void 0);\n\n    _this10._state = _objectSpread$1({}, TorusInPageProvider._defaultState); // public state\n\n    _this10.selectedAddress = null;\n    _this10.chainId = null;\n    _this10._handleAccountsChanged = _this10._handleAccountsChanged.bind(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this10));\n    _this10._handleChainChanged = _this10._handleChainChanged.bind(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this10));\n    _this10._handleUnlockStateChanged = _this10._handleUnlockStateChanged.bind(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this10)); // setup own event listeners\n    // EIP-1193 connect\n\n    _this10.on(\"connect\", function () {\n      _this10._state.isConnected = true;\n    });\n\n    var jsonRpcNotificationHandler = function jsonRpcNotificationHandler(payload) {\n      var method = payload.method,\n          params = payload.params;\n\n      if (method === _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* PROVIDER_NOTIFICATIONS */ \"e\"].ACCOUNTS_CHANGED) {\n        _this10._handleAccountsChanged(params);\n      } else if (method === _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* PROVIDER_NOTIFICATIONS */ \"e\"].UNLOCK_STATE_CHANGED) {\n        _this10._handleUnlockStateChanged(params);\n      } else if (method === _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* PROVIDER_NOTIFICATIONS */ \"e\"].CHAIN_CHANGED) {\n        _this10._handleChainChanged(params);\n      }\n    }; // json rpc notification listener\n\n\n    _this10.jsonRpcConnectionEvents.on(\"notification\", jsonRpcNotificationHandler);\n\n    return _this10;\n  }\n  /**\n   * Returns whether the inpage provider is connected to Torus.\n   */\n\n\n  Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(TorusInPageProvider, [{\n    key: \"isConnected\",\n    value: function isConnected() {\n      return this._state.isConnected;\n    } // Private Methods\n    //= ===================\n\n    /**\n     * Constructor helper.\n     * Populates initial state by calling 'wallet_getProviderState' and emits\n     * necessary events.\n     */\n\n  }, {\n    key: \"_initializeState\",\n    value: function () {\n      var _initializeState3 = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee5() {\n        var _yield$this$request2, accounts, chainId, isUnlocked;\n\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return this.request({\n                  method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* PROVIDER_JRPC_METHODS */ \"d\"].GET_PROVIDER_STATE,\n                  params: []\n                });\n\n              case 3:\n                _yield$this$request2 = _context5.sent;\n                accounts = _yield$this$request2.accounts;\n                chainId = _yield$this$request2.chainId;\n                isUnlocked = _yield$this$request2.isUnlocked;\n                // indicate that we've connected, for EIP-1193 compliance\n                this.emit(\"connect\", {\n                  chainId: chainId\n                });\n\n                this._handleChainChanged({\n                  chainId: chainId\n                });\n\n                this._handleUnlockStateChanged({\n                  accounts: accounts,\n                  isUnlocked: isUnlocked\n                });\n\n                this._handleAccountsChanged(accounts);\n\n                _context5.next = 16;\n                break;\n\n              case 13:\n                _context5.prev = 13;\n                _context5.t0 = _context5[\"catch\"](0);\n                log.error(\"Torus: Failed to get initial state. Please report this bug.\", _context5.t0);\n\n              case 16:\n                _context5.prev = 16;\n                log.info(\"initialized provider state\");\n                this._state.initialized = true;\n                this.emit(\"_initialized\");\n                return _context5.finish(16);\n\n              case 21:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[0, 13, 16, 21]]);\n      }));\n\n      function _initializeState() {\n        return _initializeState3.apply(this, arguments);\n      }\n\n      return _initializeState;\n    }()\n    /**\n     * Internal RPC method. Forwards requests to background via the RPC engine.\n     * Also remap ids inbound and outbound\n     */\n\n  }, {\n    key: \"_rpcRequest\",\n    value: function _rpcRequest(payload, callback) {\n      var _this11 = this;\n\n      var isInternal = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var cb = callback;\n      var _payload = payload;\n\n      if (!Array.isArray(_payload)) {\n        if (!_payload.jsonrpc) {\n          _payload.jsonrpc = \"2.0\";\n        }\n\n        if (_payload.method === \"solana_accounts\" || _payload.method === \"solana_requestAccounts\") {\n          // handle accounts changing\n          cb = function cb(err, res) {\n            _this11._handleAccountsChanged(res.result || [], _payload.method === \"solana_accounts\", isInternal);\n\n            callback(err, res);\n          };\n        } else if (_payload.method === \"wallet_getProviderState\") {\n          this._rpcEngine.handle(payload, cb);\n\n          return;\n        }\n      }\n\n      this.tryWindowHandle(_payload, cb);\n    }\n    /**\n     * When the provider becomes connected, updates internal state and emits\n     * required events. Idempotent.\n     *\n     * @param chainId - The ID of the newly connected chain.\n     * emits TorusInpageProvider#connect\n     */\n\n  }, {\n    key: \"_handleConnect\",\n    value: function _handleConnect(chainId) {\n      if (!this._state.isConnected) {\n        this._state.isConnected = true;\n        this.emit(\"connect\", {\n          chainId: chainId\n        });\n        log.debug(messages.info.connected(chainId));\n      }\n    }\n    /**\n     * When the provider becomes disconnected, updates internal state and emits\n     * required events. Idempotent with respect to the isRecoverable parameter.\n     *\n     * Error codes per the CloseEvent status codes as required by EIP-1193:\n     * https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes\n     *\n     * @param isRecoverable - Whether the disconnection is recoverable.\n     * @param errorMessage - A custom error message.\n     * emits TorusInpageProvider#disconnect\n     */\n\n  }, {\n    key: \"_handleDisconnect\",\n    value: function _handleDisconnect(isRecoverable, errorMessage) {\n      if (this._state.isConnected || !this._state.isPermanentlyDisconnected && !isRecoverable) {\n        this._state.isConnected = false;\n        var error;\n\n        if (isRecoverable) {\n          error = new eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__[\"EthereumRpcError\"](1013, // Try again later\n          errorMessage || messages.errors.disconnected());\n          log.debug(error);\n        } else {\n          error = new eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__[\"EthereumRpcError\"](1011, // Internal error\n          errorMessage || messages.errors.permanentlyDisconnected());\n          log.error(error);\n          this.chainId = null;\n          this._state.accounts = null;\n          this.selectedAddress = null;\n          this._state.isUnlocked = false;\n          this._state.isPermanentlyDisconnected = true;\n        }\n\n        this.emit(\"disconnect\", error);\n      }\n    }\n    /**\n     * Called when accounts may have changed.\n     */\n\n  }, {\n    key: \"_handleAccountsChanged\",\n    value: function _handleAccountsChanged(accounts) {\n      var isEthAccounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var isInternal = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false; // defensive programming\n\n      var finalAccounts = accounts;\n\n      if (!Array.isArray(finalAccounts)) {\n        log.error(\"Torus: Received non-array accounts parameter. Please report this bug.\", finalAccounts);\n        finalAccounts = [];\n      }\n\n      var _iterator = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(accounts),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var account = _step.value;\n\n          if (typeof account !== \"string\") {\n            log.error(\"Torus: Received non-string account. Please report this bug.\", accounts);\n            finalAccounts = [];\n            break;\n          }\n        } // emit accountsChanged if anything about the accounts array has changed\n\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      if (!fast_deep_equal__WEBPACK_IMPORTED_MODULE_17___default()(this._state.accounts, finalAccounts)) {\n        // we should always have the correct accounts even before solana_accounts\n        // returns, except in cases where isInternal is true\n        if (isEthAccounts && Array.isArray(this._state.accounts) && this._state.accounts.length > 0 && !isInternal) {\n          log.error('Torus: \"solana_accounts\" unexpectedly updated accounts. Please report this bug.', finalAccounts);\n        }\n\n        this._state.accounts = finalAccounts;\n        this.emit(\"accountsChanged\", finalAccounts);\n      } // handle selectedAddress\n\n\n      if (this.selectedAddress !== finalAccounts[0]) {\n        this.selectedAddress = finalAccounts[0] || null;\n      }\n    }\n    /**\n     * Upon receipt of a new chainId and networkVersion, emits corresponding\n     * events and sets relevant public state.\n     * Does nothing if neither the chainId nor the networkVersion are different\n     * from existing values.\n     *\n     * emits TorusInpageProvider#chainChanged\n     * @param networkInfo - An object with network info.\n     */\n\n  }, {\n    key: \"_handleChainChanged\",\n    value: function _handleChainChanged() {\n      var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          chainId = _ref5.chainId;\n\n      if (!chainId) {\n        log.error(\"Torus: Received invalid network parameters. Please report this bug.\", {\n          chainId: chainId\n        });\n        return;\n      }\n\n      if (chainId === \"loading\") {\n        this._handleDisconnect(true);\n      } else {\n        this._handleConnect(chainId);\n\n        if (chainId !== this.chainId) {\n          this.chainId = chainId;\n\n          if (this._state.initialized) {\n            this.emit(\"chainChanged\", this.chainId);\n          }\n        }\n      }\n    }\n    /**\n     * Upon receipt of a new isUnlocked state, sets relevant public state.\n     * Calls the accounts changed handler with the received accounts, or an empty\n     * array.\n     *\n     * Does nothing if the received value is equal to the existing value.\n     * There are no lock/unlock events.\n     *\n     * @param opts - Options bag.\n     */\n\n  }, {\n    key: \"_handleUnlockStateChanged\",\n    value: function _handleUnlockStateChanged() {\n      var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          accounts = _ref6.accounts,\n          isUnlocked = _ref6.isUnlocked;\n\n      if (typeof isUnlocked !== \"boolean\") {\n        log.error(\"Torus: Received invalid isUnlocked parameter. Please report this bug.\", {\n          isUnlocked: isUnlocked\n        });\n        return;\n      }\n\n      if (isUnlocked !== this._state.isUnlocked) {\n        this._state.isUnlocked = isUnlocked;\n\n        this._handleAccountsChanged(accounts || []);\n      }\n    }\n  }]);\n\n  return TorusInPageProvider;\n}(BaseProvider);\n\n_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(TorusInPageProvider, \"_defaultState\", {\n  accounts: null,\n  isConnected: false,\n  isUnlocked: false,\n  initialized: false,\n  isPermanentlyDisconnected: false,\n  hasEmittedConnection: false\n});\n/**\n * Returns whether the given image URL exists\n */\n\n\nfunction imgExists(url) {\n  return new Promise(function (resolve, reject) {\n    try {\n      var img = document.createElement(\"img\");\n\n      img.onload = function () {\n        return resolve(true);\n      };\n\n      img.onerror = function () {\n        return resolve(false);\n      };\n\n      img.src = url;\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n/**\n * Extracts a name for the site from the DOM\n */\n\n\nvar getSiteName = function getSiteName(window) {\n  var document = window.document;\n  var siteName = document.querySelector('head > meta[property=\"og:site_name\"]');\n\n  if (siteName) {\n    return siteName.content;\n  }\n\n  var metaTitle = document.querySelector('head > meta[name=\"title\"]');\n\n  if (metaTitle) {\n    return metaTitle.content;\n  }\n\n  if (document.title && document.title.length > 0) {\n    return document.title;\n  }\n\n  return window.location.hostname;\n};\n/**\n * Extracts an icon for the site from the DOM\n */\n\n\nfunction getSiteIcon(_x6) {\n  return _getSiteIcon.apply(this, arguments);\n}\n/**\n * Gets site metadata and returns it\n *\n */\n\n\nfunction _getSiteIcon() {\n  _getSiteIcon = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee27(window) {\n    var _document, icon;\n\n    return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee27$(_context27) {\n      while (1) {\n        switch (_context27.prev = _context27.next) {\n          case 0:\n            _context27.prev = 0;\n            _document = window.document; // Use the site's favicon if it exists\n\n            icon = _document.querySelector('head > link[rel=\"shortcut icon\"]');\n            _context27.t0 = icon;\n\n            if (!_context27.t0) {\n              _context27.next = 8;\n              break;\n            }\n\n            _context27.next = 7;\n            return imgExists(icon.href);\n\n          case 7:\n            _context27.t0 = _context27.sent;\n\n          case 8:\n            if (!_context27.t0) {\n              _context27.next = 10;\n              break;\n            }\n\n            return _context27.abrupt(\"return\", icon.href);\n\n          case 10:\n            // Search through available icons in no particular order\n            icon = Array.from(_document.querySelectorAll('head > link[rel=\"icon\"]')).find(function (_icon) {\n              return Boolean(_icon.href);\n            });\n            _context27.t1 = icon;\n\n            if (!_context27.t1) {\n              _context27.next = 16;\n              break;\n            }\n\n            _context27.next = 15;\n            return imgExists(icon.href);\n\n          case 15:\n            _context27.t1 = _context27.sent;\n\n          case 16:\n            if (!_context27.t1) {\n              _context27.next = 18;\n              break;\n            }\n\n            return _context27.abrupt(\"return\", icon.href);\n\n          case 18:\n            return _context27.abrupt(\"return\", \"\");\n\n          case 21:\n            _context27.prev = 21;\n            _context27.t2 = _context27[\"catch\"](0);\n            return _context27.abrupt(\"return\", \"\");\n\n          case 24:\n          case \"end\":\n            return _context27.stop();\n        }\n      }\n    }, _callee27, null, [[0, 21]]);\n  }));\n  return _getSiteIcon.apply(this, arguments);\n}\n\nvar getSiteMetadata = /*#__PURE__*/function () {\n  var _ref7 = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee6() {\n    return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.t0 = getSiteName(window);\n            _context6.next = 3;\n            return getSiteIcon(window);\n\n          case 3:\n            _context6.t1 = _context6.sent;\n            return _context6.abrupt(\"return\", {\n              name: _context6.t0,\n              icon: _context6.t1\n            });\n\n          case 5:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n\n  return function getSiteMetadata() {\n    return _ref7.apply(this, arguments);\n  };\n}();\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nvar PROVIDER_UNSAFE_METHODS = [\"send_transaction\", \"sign_transaction\", \"sign_all_transactions\", \"sign_message\", \"connect\"];\nvar COMMUNICATION_UNSAFE_METHODS = [_toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].SET_PROVIDER];\nvar isLocalStorageAvailable = storageAvailable(\"localStorage\"); // preload for iframe doesn't work https://bugs.chromium.org/p/chromium/issues/detail?id=593267\n\n(function () {\n  var _preLoadIframe = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee7() {\n    var torusIframeHtml, _yield$getTorusUrl, torusUrl;\n\n    return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.prev = 0;\n\n            if (!(typeof document === \"undefined\")) {\n              _context7.next = 3;\n              break;\n            }\n\n            return _context7.abrupt(\"return\");\n\n          case 3:\n            torusIframeHtml = document.createElement(\"link\");\n            _context7.next = 6;\n            return getTorusUrl(\"production\");\n\n          case 6:\n            _yield$getTorusUrl = _context7.sent;\n            torusUrl = _yield$getTorusUrl.torusUrl;\n            torusIframeHtml.href = \"\".concat(torusUrl, \"/frame\");\n            torusIframeHtml.crossOrigin = \"anonymous\";\n            torusIframeHtml.type = \"text/html\";\n            torusIframeHtml.rel = \"prefetch\";\n\n            if (torusIframeHtml.relList && torusIframeHtml.relList.supports) {\n              if (torusIframeHtml.relList.supports(\"prefetch\")) {\n                document.head.appendChild(torusIframeHtml);\n              }\n            }\n\n            _context7.next = 18;\n            break;\n\n          case 15:\n            _context7.prev = 15;\n            _context7.t0 = _context7[\"catch\"](0);\n            log.warn(_context7.t0);\n\n          case 18:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7, null, [[0, 15]]);\n  }));\n\n  function preLoadIframe() {\n    return _preLoadIframe.apply(this, arguments);\n  }\n\n  return preLoadIframe;\n})()();\n\nvar Torus = /*#__PURE__*/function () {\n  function Torus() {\n    Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(this, Torus);\n\n    var _ref8 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref8$modalZIndex = _ref8.modalZIndex,\n        modalZIndex = _ref8$modalZIndex === void 0 ? 99999 : _ref8$modalZIndex;\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"isInitialized\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"torusAlert\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"modalZIndex\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"alertZIndex\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"requestedLoginProvider\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"provider\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"communicationProvider\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"dappStorageKey\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"torusAlertContainer\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"torusUrl\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"torusIframe\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"styleLink\", void 0);\n\n    this.torusUrl = \"\";\n    this.isInitialized = false; // init done\n\n    this.requestedLoginProvider = null;\n    this.modalZIndex = modalZIndex;\n    this.alertZIndex = modalZIndex + 1000;\n    this.dappStorageKey = \"\";\n  }\n\n  Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(Torus, [{\n    key: \"isLoggedIn\",\n    get: function get() {\n      if (!this.communicationProvider) return false;\n      return this.communicationProvider.isLoggedIn;\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee10() {\n        var _this12 = this;\n\n        var _ref9,\n            _ref9$buildEnv,\n            buildEnv,\n            _ref9$enableLogging,\n            enableLogging,\n            network,\n            _ref9$showTorusButton,\n            showTorusButton,\n            _ref9$useLocalStorage,\n            useLocalStorage,\n            _ref9$buttonPosition,\n            buttonPosition,\n            _ref9$apiKey,\n            apiKey,\n            _ref9$extraParams,\n            extraParams,\n            _yield$getTorusUrl2,\n            torusUrl,\n            logLevel,\n            dappStorageKey,\n            torusIframeUrl,\n            hashParams,\n            handleSetup,\n            _args10 = arguments;\n\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _ref9 = _args10.length > 0 && _args10[0] !== undefined ? _args10[0] : {}, _ref9$buildEnv = _ref9.buildEnv, buildEnv = _ref9$buildEnv === void 0 ? TORUS_BUILD_ENV.PRODUCTION : _ref9$buildEnv, _ref9$enableLogging = _ref9.enableLogging, enableLogging = _ref9$enableLogging === void 0 ? false : _ref9$enableLogging, network = _ref9.network, _ref9$showTorusButton = _ref9.showTorusButton, showTorusButton = _ref9$showTorusButton === void 0 ? false : _ref9$showTorusButton, _ref9$useLocalStorage = _ref9.useLocalStorage, useLocalStorage = _ref9$useLocalStorage === void 0 ? false : _ref9$useLocalStorage, _ref9$buttonPosition = _ref9.buttonPosition, buttonPosition = _ref9$buttonPosition === void 0 ? BUTTON_POSITION.BOTTOM_LEFT : _ref9$buttonPosition, _ref9$apiKey = _ref9.apiKey, apiKey = _ref9$apiKey === void 0 ? \"torus-default\" : _ref9$apiKey, _ref9$extraParams = _ref9.extraParams, extraParams = _ref9$extraParams === void 0 ? {} : _ref9$extraParams;\n\n                if (!this.isInitialized) {\n                  _context10.next = 3;\n                  break;\n                }\n\n                throw new Error(\"Already initialized\");\n\n              case 3:\n                Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_11__[/* setAPIKey */ \"e\"])(apiKey);\n                _context10.next = 6;\n                return getTorusUrl(buildEnv);\n\n              case 6:\n                _yield$getTorusUrl2 = _context10.sent;\n                torusUrl = _yield$getTorusUrl2.torusUrl;\n                logLevel = _yield$getTorusUrl2.logLevel;\n                log.info(torusUrl, \"url loaded\");\n                this.torusUrl = torusUrl;\n                log.setDefaultLevel(logLevel);\n                if (enableLogging) log.enableAll();else log.disableAll();\n                dappStorageKey = this.handleDappStorageKey(useLocalStorage);\n                torusIframeUrl = new URL(torusUrl);\n                if (torusIframeUrl.pathname.endsWith(\"/\")) torusIframeUrl.pathname += \"frame\";else torusIframeUrl.pathname += \"/frame\";\n                hashParams = new URLSearchParams();\n                if (dappStorageKey) hashParams.append(\"dappStorageKey\", dappStorageKey);\n                hashParams.append(\"origin\", window.location.origin);\n                torusIframeUrl.hash = hashParams.toString(); // Iframe code\n\n                this.torusIframe = htmlToElement(\"<iframe\\n        id=\\\"torusIframe\\\"\\n        class=\\\"torusIframe\\\"\\n        src=\\\"\".concat(torusIframeUrl.href, \"\\\"\\n        style=\\\"display: none; position: fixed; top: 0; right: 0; width: 100%;\\n        height: 100%; border: none; border-radius: 0; z-index: \").concat(this.modalZIndex.toString(), \"\\\"\\n      ></iframe>\"));\n                this.torusAlertContainer = htmlToElement(\"<div id=\\\"torusAlertContainer\\\" style=\\\"display:none; z-index: \".concat(this.alertZIndex.toString(), \"\\\"></div>\"));\n                this.styleLink = htmlToElement(\"<link href=\\\"\".concat(torusUrl, \"/css/widget.css\\\" rel=\\\"stylesheet\\\" type=\\\"text/css\\\">\"));\n\n                handleSetup = /*#__PURE__*/function () {\n                  var _ref10 = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee9() {\n                    return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee9$(_context9) {\n                      while (1) {\n                        switch (_context9.prev = _context9.next) {\n                          case 0:\n                            return _context9.abrupt(\"return\", new Promise(function (resolve, reject) {\n                              try {\n                                window.document.head.appendChild(_this12.styleLink);\n                                window.document.body.appendChild(_this12.torusIframe);\n                                window.document.body.appendChild(_this12.torusAlertContainer);\n\n                                _this12.torusIframe.addEventListener(\"load\", /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee8() {\n                                  var dappMetadata;\n                                  return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee8$(_context8) {\n                                    while (1) {\n                                      switch (_context8.prev = _context8.next) {\n                                        case 0:\n                                          _context8.next = 2;\n                                          return getSiteMetadata();\n\n                                        case 2:\n                                          dappMetadata = _context8.sent;\n\n                                          // send init params here\n                                          _this12.torusIframe.contentWindow.postMessage({\n                                            buttonPosition: buttonPosition,\n                                            apiKey: apiKey,\n                                            network: network,\n                                            dappMetadata: dappMetadata,\n                                            extraParams: extraParams\n                                          }, torusIframeUrl.origin);\n\n                                          _context8.next = 6;\n                                          return _this12._setupWeb3({\n                                            torusUrl: torusUrl\n                                          });\n\n                                        case 6:\n                                          if (showTorusButton) _this12.showTorusButton();else _this12.hideTorusButton();\n                                          _this12.isInitialized = true;\n                                          window.torus = _this12;\n                                          resolve();\n\n                                        case 10:\n                                        case \"end\":\n                                          return _context8.stop();\n                                      }\n                                    }\n                                  }, _callee8);\n                                })));\n                              } catch (error) {\n                                reject(error);\n                              }\n                            }));\n\n                          case 1:\n                          case \"end\":\n                            return _context9.stop();\n                        }\n                      }\n                    }, _callee9);\n                  }));\n\n                  return function handleSetup() {\n                    return _ref10.apply(this, arguments);\n                  };\n                }();\n\n                _context10.next = 26;\n                return documentReady();\n\n              case 26:\n                _context10.next = 28;\n                return handleSetup();\n\n              case 28:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"login\",\n    value: function () {\n      var _login = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee11() {\n        var _this13 = this;\n\n        var params,\n            res,\n            _args11 = arguments;\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                params = _args11.length > 0 && _args11[0] !== undefined ? _args11[0] : {};\n\n                if (this.isInitialized) {\n                  _context11.next = 3;\n                  break;\n                }\n\n                throw new Error(\"Call init() first\");\n\n              case 3:\n                _context11.prev = 3;\n                this.requestedLoginProvider = params.loginProvider || null;\n\n                if (!this.requestedLoginProvider) {\n                  this.communicationProvider._displayIframe({\n                    isFull: true\n                  });\n                } // If user is already logged in, we assume they have given access to the website\n\n\n                _context11.next = 8;\n                return new Promise(function (resolve, reject) {\n                  // We use this method because we want to update inPage provider state with account info\n                  _this13.provider._rpcRequest({\n                    method: \"solana_requestAccounts\",\n                    params: [_this13.requestedLoginProvider, params.login_hint]\n                  }, Object(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* getRpcPromiseCallback */ \"j\"])(resolve, reject));\n                });\n\n              case 8:\n                res = _context11.sent;\n\n                if (!(Array.isArray(res) && res.length > 0)) {\n                  _context11.next = 11;\n                  break;\n                }\n\n                return _context11.abrupt(\"return\", res);\n\n              case 11:\n                throw new Error(\"Login failed\");\n\n              case 14:\n                _context11.prev = 14;\n                _context11.t0 = _context11[\"catch\"](3);\n                log.error(\"login failed\", _context11.t0);\n                throw _context11.t0;\n\n              case 18:\n                _context11.prev = 18;\n                if (this.communicationProvider.isIFrameFullScreen) this.communicationProvider._displayIframe();\n                return _context11.finish(18);\n\n              case 21:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this, [[3, 14, 18, 21]]);\n      }));\n\n      function login() {\n        return _login.apply(this, arguments);\n      }\n\n      return login;\n    }()\n  }, {\n    key: \"loginWithPrivateKey\",\n    value: function () {\n      var _loginWithPrivateKey = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee12(loginParams) {\n        var privateKey, userInfo, _yield$this$communica, success;\n\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                if (this.isInitialized) {\n                  _context12.next = 2;\n                  break;\n                }\n\n                throw new Error(\"Call init() first\");\n\n              case 2:\n                privateKey = loginParams.privateKey, userInfo = loginParams.userInfo;\n                _context12.next = 5;\n                return this.communicationProvider.request({\n                  method: \"login_with_private_key\",\n                  params: {\n                    privateKey: privateKey,\n                    userInfo: userInfo\n                  }\n                });\n\n              case 5:\n                _yield$this$communica = _context12.sent;\n                success = _yield$this$communica.success;\n\n                if (success) {\n                  _context12.next = 9;\n                  break;\n                }\n\n                throw new Error(\"Login Failed\");\n\n              case 9:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function loginWithPrivateKey(_x7) {\n        return _loginWithPrivateKey.apply(this, arguments);\n      }\n\n      return loginWithPrivateKey;\n    }()\n  }, {\n    key: \"logout\",\n    value: function () {\n      var _logout = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee13() {\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                if (this.communicationProvider.isLoggedIn) {\n                  _context13.next = 2;\n                  break;\n                }\n\n                throw new Error(\"Not logged in\");\n\n              case 2:\n                _context13.next = 4;\n                return this.communicationProvider.request({\n                  method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].LOGOUT,\n                  params: []\n                });\n\n              case 4:\n                this.requestedLoginProvider = null;\n\n              case 5:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this);\n      }));\n\n      function logout() {\n        return _logout.apply(this, arguments);\n      }\n\n      return logout;\n    }()\n  }, {\n    key: \"cleanUp\",\n    value: function () {\n      var _cleanUp = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee14() {\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                if (!this.communicationProvider.isLoggedIn) {\n                  _context14.next = 3;\n                  break;\n                }\n\n                _context14.next = 3;\n                return this.logout();\n\n              case 3:\n                this.clearInit();\n\n              case 4:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14, this);\n      }));\n\n      function cleanUp() {\n        return _cleanUp.apply(this, arguments);\n      }\n\n      return cleanUp;\n    }()\n  }, {\n    key: \"clearInit\",\n    value: function clearInit() {\n      function isElement(element) {\n        return element instanceof Element || element instanceof Document;\n      }\n\n      if (isElement(this.styleLink) && window.document.body.contains(this.styleLink)) {\n        this.styleLink.remove();\n        this.styleLink = undefined;\n      }\n\n      if (isElement(this.torusIframe) && window.document.body.contains(this.torusIframe)) {\n        this.torusIframe.remove();\n        this.torusIframe = undefined;\n      }\n\n      if (isElement(this.torusAlertContainer) && window.document.body.contains(this.torusAlertContainer)) {\n        this.torusAlert = undefined;\n        this.torusAlertContainer.remove();\n        this.torusAlertContainer = undefined;\n      }\n\n      this.isInitialized = false;\n    }\n  }, {\n    key: \"hideTorusButton\",\n    value: function hideTorusButton() {\n      this.communicationProvider.hideTorusButton();\n    }\n  }, {\n    key: \"showTorusButton\",\n    value: function showTorusButton() {\n      this.communicationProvider.showTorusButton();\n    }\n  }, {\n    key: \"setProvider\",\n    value: function () {\n      var _setProvider = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee15(params) {\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee15$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                _context15.next = 2;\n                return this.communicationProvider.request({\n                  method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].SET_PROVIDER,\n                  params: _objectSpread({}, params)\n                });\n\n              case 2:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee15, this);\n      }));\n\n      function setProvider(_x8) {\n        return _setProvider.apply(this, arguments);\n      }\n\n      return setProvider;\n    }()\n  }, {\n    key: \"showWallet\",\n    value: function () {\n      var _showWallet = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee16(path) {\n        var params,\n            instanceId,\n            finalPath,\n            finalUrl,\n            walletWindow,\n            _args16 = arguments;\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee16$(_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n                params = _args16.length > 1 && _args16[1] !== undefined ? _args16[1] : {};\n                _context16.next = 3;\n                return this.communicationProvider.request({\n                  method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].WALLET_INSTANCE_ID,\n                  params: []\n                });\n\n              case 3:\n                instanceId = _context16.sent;\n                finalPath = path ? \"/\".concat(path) : \"\";\n                finalUrl = new URL(\"\".concat(this.torusUrl, \"/wallet\").concat(finalPath)); // Using URL constructor to prevent js injection and allow parameter validation.!\n\n                finalUrl.searchParams.append(\"instanceId\", instanceId);\n                Object.keys(params).forEach(function (x) {\n                  finalUrl.searchParams.append(x, params[x]);\n                });\n\n                if (this.dappStorageKey) {\n                  finalUrl.hash = \"#dappStorageKey=\".concat(this.dappStorageKey);\n                } // No need to track this window state. Hence, no _handleWindow call.\n\n\n                walletWindow = new PopupHandler({\n                  url: finalUrl,\n                  features: getPopupFeatures(FEATURES_DEFAULT_WALLET_WINDOW)\n                });\n                walletWindow.open();\n\n              case 11:\n              case \"end\":\n                return _context16.stop();\n            }\n          }\n        }, _callee16, this);\n      }));\n\n      function showWallet(_x9) {\n        return _showWallet.apply(this, arguments);\n      }\n\n      return showWallet;\n    }()\n  }, {\n    key: \"getUserInfo\",\n    value: function () {\n      var _getUserInfo = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee17() {\n        var userInfoResponse;\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee17$(_context17) {\n          while (1) {\n            switch (_context17.prev = _context17.next) {\n              case 0:\n                _context17.next = 2;\n                return this.communicationProvider.request({\n                  method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].USER_INFO,\n                  params: []\n                });\n\n              case 2:\n                userInfoResponse = _context17.sent;\n                return _context17.abrupt(\"return\", userInfoResponse);\n\n              case 4:\n              case \"end\":\n                return _context17.stop();\n            }\n          }\n        }, _callee17, this);\n      }));\n\n      function getUserInfo() {\n        return _getUserInfo.apply(this, arguments);\n      }\n\n      return getUserInfo;\n    }()\n  }, {\n    key: \"initiateTopup\",\n    value: function () {\n      var _initiateTopup = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee18(provider, params) {\n        var windowId, topupResponse;\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee18$(_context18) {\n          while (1) {\n            switch (_context18.prev = _context18.next) {\n              case 0:\n                if (this.isInitialized) {\n                  _context18.next = 2;\n                  break;\n                }\n\n                throw new Error(\"Torus is not initialized\");\n\n              case 2:\n                windowId = getWindowId();\n\n                this.communicationProvider._handleWindow(windowId);\n\n                _context18.next = 6;\n                return this.communicationProvider.request({\n                  method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].TOPUP,\n                  params: {\n                    provider: provider,\n                    params: params,\n                    windowId: windowId\n                  }\n                });\n\n              case 6:\n                topupResponse = _context18.sent;\n                return _context18.abrupt(\"return\", topupResponse);\n\n              case 8:\n              case \"end\":\n                return _context18.stop();\n            }\n          }\n        }, _callee18, this);\n      }));\n\n      function initiateTopup(_x10, _x11) {\n        return _initiateTopup.apply(this, arguments);\n      }\n\n      return initiateTopup;\n    }() // Solana specific API\n\n  }, {\n    key: \"getAccounts\",\n    value: function () {\n      var _getAccounts = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee19() {\n        var response;\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee19$(_context19) {\n          while (1) {\n            switch (_context19.prev = _context19.next) {\n              case 0:\n                _context19.next = 2;\n                return this.provider.request({\n                  method: \"getAccounts\",\n                  params: []\n                });\n\n              case 2:\n                response = _context19.sent;\n                return _context19.abrupt(\"return\", response);\n\n              case 4:\n              case \"end\":\n                return _context19.stop();\n            }\n          }\n        }, _callee19, this);\n      }));\n\n      function getAccounts() {\n        return _getAccounts.apply(this, arguments);\n      }\n\n      return getAccounts;\n    }()\n  }, {\n    key: \"sendTransaction\",\n    value: function () {\n      var _sendTransaction = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee20(transaction) {\n        var response;\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee20$(_context20) {\n          while (1) {\n            switch (_context20.prev = _context20.next) {\n              case 0:\n                _context20.next = 2;\n                return this.provider.request({\n                  method: \"send_transaction\",\n                  params: {\n                    message: transaction.serialize({\n                      requireAllSignatures: false\n                    }).toString(\"hex\")\n                  }\n                });\n\n              case 2:\n                response = _context20.sent;\n                return _context20.abrupt(\"return\", response);\n\n              case 4:\n              case \"end\":\n                return _context20.stop();\n            }\n          }\n        }, _callee20, this);\n      }));\n\n      function sendTransaction(_x12) {\n        return _sendTransaction.apply(this, arguments);\n      }\n\n      return sendTransaction;\n    }()\n  }, {\n    key: \"signTransaction\",\n    value: function () {\n      var _signTransaction = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee21(transaction) {\n        var response, parsed, signature;\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee21$(_context21) {\n          while (1) {\n            switch (_context21.prev = _context21.next) {\n              case 0:\n                _context21.next = 2;\n                return this.provider.request({\n                  method: \"sign_transaction\",\n                  params: {\n                    message: transaction.serializeMessage().toString(\"hex\"),\n                    messageOnly: true\n                  }\n                });\n\n              case 2:\n                response = _context21.sent;\n                // reconstruct signature pair\n                parsed = JSON.parse(response);\n                signature = {\n                  publicKey: new _solana_web3_js__WEBPACK_IMPORTED_MODULE_9__[/* PublicKey */ \"c\"](parsed.publicKey),\n                  signature: Buffer.from(parsed.signature, \"hex\")\n                };\n                transaction.addSignature(signature.publicKey, signature.signature);\n                return _context21.abrupt(\"return\", transaction);\n\n              case 7:\n              case \"end\":\n                return _context21.stop();\n            }\n          }\n        }, _callee21, this);\n      }));\n\n      function signTransaction(_x13) {\n        return _signTransaction.apply(this, arguments);\n      }\n\n      return signTransaction;\n    }()\n  }, {\n    key: \"signAllTransactions\",\n    value: function () {\n      var _signAllTransactions = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee22(transactions) {\n        var encodedMessage, responses, signatures;\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee22$(_context22) {\n          while (1) {\n            switch (_context22.prev = _context22.next) {\n              case 0:\n                encodedMessage = transactions.map(function (tx) {\n                  return tx.serializeMessage().toString(\"hex\");\n                });\n                _context22.next = 3;\n                return this.provider.request({\n                  method: \"sign_all_transactions\",\n                  params: {\n                    message: encodedMessage,\n                    messageOnly: true\n                  }\n                });\n\n              case 3:\n                responses = _context22.sent;\n                // reconstruct signature pairs\n                signatures = responses.map(function (item) {\n                  var parsed = JSON.parse(item);\n                  return {\n                    publicKey: new _solana_web3_js__WEBPACK_IMPORTED_MODULE_9__[/* PublicKey */ \"c\"](parsed.publicKey),\n                    signature: Buffer.from(parsed.signature, \"hex\")\n                  };\n                });\n                transactions.forEach(function (tx, idx) {\n                  tx.addSignature(signatures[idx].publicKey, signatures[idx].signature);\n                  return tx;\n                });\n                return _context22.abrupt(\"return\", transactions);\n\n              case 7:\n              case \"end\":\n                return _context22.stop();\n            }\n          }\n        }, _callee22, this);\n      }));\n\n      function signAllTransactions(_x14) {\n        return _signAllTransactions.apply(this, arguments);\n      }\n\n      return signAllTransactions;\n    }()\n  }, {\n    key: \"signMessage\",\n    value: function () {\n      var _signMessage = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee23(data) {\n        var response;\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee23$(_context23) {\n          while (1) {\n            switch (_context23.prev = _context23.next) {\n              case 0:\n                _context23.next = 2;\n                return this.provider.request({\n                  method: \"sign_message\",\n                  params: {\n                    data: data\n                  }\n                });\n\n              case 2:\n                response = _context23.sent;\n                return _context23.abrupt(\"return\", response);\n\n              case 4:\n              case \"end\":\n                return _context23.stop();\n            }\n          }\n        }, _callee23, this);\n      }));\n\n      function signMessage(_x15) {\n        return _signMessage.apply(this, arguments);\n      }\n\n      return signMessage;\n    }()\n  }, {\n    key: \"getGaslessPublicKey\",\n    value: function () {\n      var _getGaslessPublicKey = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee24() {\n        var response;\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee24$(_context24) {\n          while (1) {\n            switch (_context24.prev = _context24.next) {\n              case 0:\n                _context24.next = 2;\n                return this.provider.request({\n                  method: \"get_gasless_public_key\",\n                  params: []\n                });\n\n              case 2:\n                response = _context24.sent;\n                return _context24.abrupt(\"return\", response);\n\n              case 4:\n              case \"end\":\n                return _context24.stop();\n            }\n          }\n        }, _callee24, this);\n      }));\n\n      function getGaslessPublicKey() {\n        return _getGaslessPublicKey.apply(this, arguments);\n      }\n\n      return getGaslessPublicKey;\n    }() // async connect(): Promise<boolean> {\n    //   const response = (await this.provider.request({\n    //     method: \"connect\",\n    //     params: {},\n    //   })) as boolean;\n    //   return response;\n    // }\n\n  }, {\n    key: \"handleDappStorageKey\",\n    value: function handleDappStorageKey(useLocalStorage) {\n      var dappStorageKey = \"\";\n\n      if (isLocalStorageAvailable && useLocalStorage) {\n        var storedKey = window.localStorage.getItem(configuration.localStorageKey);\n        if (storedKey) dappStorageKey = storedKey;else {\n          var generatedKey = \"torus-app-\".concat(getWindowId());\n          window.localStorage.setItem(configuration.localStorageKey, generatedKey);\n          dappStorageKey = generatedKey;\n        }\n      }\n\n      this.dappStorageKey = dappStorageKey;\n      return dappStorageKey;\n    }\n  }, {\n    key: \"_setupWeb3\",\n    value: function () {\n      var _setupWeb = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().mark(function _callee25(providerParams) {\n        var _this14 = this;\n\n        var providerStream, communicationStream, inPageProvider, communicationProvider, detectAccountRequestPrototypeModifier, proxiedInPageProvider, proxiedCommunicationProvider;\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])().wrap(function _callee25$(_context25) {\n          while (1) {\n            switch (_context25.prev = _context25.next) {\n              case 0:\n                log.info(\"setupWeb3 running\"); // setup background connection\n\n                providerStream = new _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* BasePostMessageStream */ \"a\"]({\n                  name: \"embed_torus\",\n                  target: \"iframe_torus\",\n                  targetWindow: this.torusIframe.contentWindow\n                }); // We create another LocalMessageDuplexStream for communication between dapp <> iframe\n\n                communicationStream = new _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* BasePostMessageStream */ \"a\"]({\n                  name: \"embed_communication\",\n                  target: \"iframe_communication\",\n                  targetWindow: this.torusIframe.contentWindow\n                }); // compose the inPage provider\n\n                inPageProvider = new TorusInPageProvider(providerStream, {});\n                communicationProvider = new TorusCommunicationProvider(communicationStream, {});\n\n                inPageProvider.tryWindowHandle = function (payload, cb) {\n                  var _payload = payload;\n\n                  if (!Array.isArray(_payload) && PROVIDER_UNSAFE_METHODS.includes(_payload.method)) {\n                    if (!_this14.communicationProvider.isLoggedIn) throw new Error(\"User Not Logged In\");\n                    var windowId = getWindowId();\n\n                    communicationProvider._handleWindow(windowId, {\n                      target: \"_blank\",\n                      features: getPopupFeatures(FEATURES_CONFIRM_WINDOW)\n                    }); // for inPageProvider methods sending windowId in request instead of params\n                    // as params might be positional.\n\n\n                    _payload.windowId = windowId;\n                  }\n\n                  inPageProvider._rpcEngine.handle(_payload, cb);\n                };\n\n                communicationProvider.tryWindowHandle = function (payload, cb) {\n                  var _payload = payload;\n\n                  if (!Array.isArray(_payload) && COMMUNICATION_UNSAFE_METHODS.includes(_payload.method)) {\n                    var windowId = getWindowId();\n\n                    communicationProvider._handleWindow(windowId, {\n                      target: \"_blank\",\n                      features: getPopupFeatures(FEATURES_PROVIDER_CHANGE_WINDOW) // todo: are these features generic for all\n\n                    }); // for communication methods sending window id in jrpc req params\n\n\n                    _payload.params.windowId = windowId;\n                  }\n\n                  communicationProvider._rpcEngine.handle(_payload, cb);\n                }; // detect solana_requestAccounts and pipe to enable for now\n\n\n                detectAccountRequestPrototypeModifier = function detectAccountRequestPrototypeModifier(m) {\n                  var originalMethod = inPageProvider[m]; // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n                  var self = _this14;\n\n                  inPageProvider[m] = function providerFunc(request, cb) {\n                    var method = request.method,\n                        _request$params = request.params,\n                        params = _request$params === void 0 ? [] : _request$params;\n\n                    if (method === \"solana_requestAccounts\") {\n                      if (!cb) return self.login({\n                        loginProvider: params[0]\n                      });\n                      self.login({\n                        loginProvider: params[0]\n                      }) // eslint-disable-next-line promise/no-callback-in-promise\n                      .then(function (res) {\n                        return cb(null, res);\n                      }) // eslint-disable-next-line promise/no-callback-in-promise\n                      .catch(function (err) {\n                        return cb(err);\n                      });\n                    }\n\n                    return originalMethod.apply(this, [request, cb]);\n                  };\n                }; // Detects call to solana_requestAccounts in request & sendAsync and passes to login\n\n\n                detectAccountRequestPrototypeModifier(\"request\");\n                detectAccountRequestPrototypeModifier(\"sendAsync\");\n                detectAccountRequestPrototypeModifier(\"send\");\n                proxiedInPageProvider = new Proxy(inPageProvider, {\n                  // straight up lie that we deleted the property so that it doesn't\n                  // throw an error in strict mode\n                  deleteProperty: function deleteProperty() {\n                    return true;\n                  }\n                });\n                proxiedCommunicationProvider = new Proxy(communicationProvider, {\n                  // straight up lie that we deleted the property so that it doesn't\n                  // throw an error in strict mode\n                  deleteProperty: function deleteProperty() {\n                    return true;\n                  }\n                });\n                this.provider = proxiedInPageProvider;\n                this.communicationProvider = proxiedCommunicationProvider;\n                _context25.next = 17;\n                return Promise.all([inPageProvider._initializeState(), communicationProvider._initializeState(_objectSpread(_objectSpread({}, providerParams), {}, {\n                  dappStorageKey: this.dappStorageKey,\n                  torusAlertContainer: this.torusAlertContainer,\n                  torusIframe: this.torusIframe\n                }))]);\n\n              case 17:\n                log.debug(\"Torus - injected provider\");\n\n              case 18:\n              case \"end\":\n                return _context25.stop();\n            }\n          }\n        }, _callee25, this);\n      }));\n\n      function _setupWeb3(_x16) {\n        return _setupWeb.apply(this, arguments);\n      }\n\n      return _setupWeb3;\n    }()\n  }]);\n\n  return Torus;\n}();\n\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(19).Buffer))\n\n/***/ }),\n\n/***/ 1600:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SolanaWalletAdapter\", function() { return SolanaWalletAdapter; });\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(11);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_get_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(45);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(35);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(9);\n/* harmony import */ var C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(10);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(14);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _toruslabs_solana_embed__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(1498);\n/* harmony import */ var _web3auth_base__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(13);\n/* harmony import */ var _web3auth_solana_provider__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(1408);\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(29);\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_13__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nvar SolanaWalletAdapter = /*#__PURE__*/function (_BaseAdapter) {\n  Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])(SolanaWalletAdapter, _BaseAdapter);\n\n  var _super = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"])(SolanaWalletAdapter);\n\n  function SolanaWalletAdapter() {\n    var _this;\n\n    Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(this, SolanaWalletAdapter);\n\n    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _this = _super.call(this);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this), \"name\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WALLET_ADAPTERS */ \"i\"].TORUS_SOLANA);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this), \"adapterNamespace\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_NAMESPACES */ \"c\"].SOLANA);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this), \"currentChainNamespace\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* CHAIN_NAMESPACES */ \"f\"].SOLANA);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this), \"type\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_CATEGORY */ \"a\"].EXTERNAL);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this), \"status\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].NOT_READY);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this), \"torusInstance\", null);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this), \"torusWalletOptions\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this), \"initParams\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this), \"loginSettings\", {});\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this), \"solanaProvider\", null);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(_this), \"rehydrated\", false);\n\n    _this.torusWalletOptions = params.adapterSettings || {};\n    _this.initParams = params.initParams || {};\n    _this.loginSettings = params.loginSettings || {};\n    _this.chainConfig = params.chainConfig || null;\n    return _this;\n  }\n\n  Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(SolanaWalletAdapter, [{\n    key: \"provider\",\n    get: function get() {\n      if (this.status === _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].CONNECTED && this.solanaProvider) {\n        var _this$solanaProvider;\n\n        return ((_this$solanaProvider = this.solanaProvider) === null || _this$solanaProvider === void 0 ? void 0 : _this$solanaProvider.provider) || null;\n      }\n\n      return null;\n    },\n    set: function set(_) {\n      throw new Error(\"Not implemented\");\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee(options) {\n        var network, _this$chainConfig, blockExplorer, displayName, ticker, tickerName, rpcTarget, chainId, _this$chainConfig2, _chainId, _blockExplorer, _displayName, _rpcTarget, _ticker, _tickerName;\n\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_get_js__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])(SolanaWalletAdapter.prototype), \"checkInitializationRequirements\", this).call(this); // set chainConfig for mainnet by default if not set\n\n\n                if (!this.chainConfig) {\n                  this.chainConfig = Object(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* getChainConfig */ \"m\"])(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* CHAIN_NAMESPACES */ \"f\"].SOLANA, \"0x1\");\n                  _this$chainConfig = this.chainConfig, blockExplorer = _this$chainConfig.blockExplorer, displayName = _this$chainConfig.displayName, ticker = _this$chainConfig.ticker, tickerName = _this$chainConfig.tickerName, rpcTarget = _this$chainConfig.rpcTarget, chainId = _this$chainConfig.chainId;\n                  network = {\n                    chainId: chainId,\n                    rpcTarget: rpcTarget,\n                    blockExplorerUrl: blockExplorer,\n                    displayName: displayName,\n                    ticker: ticker,\n                    tickerName: tickerName,\n                    logo: \"\"\n                  };\n                } else {\n                  _this$chainConfig2 = this.chainConfig, _chainId = _this$chainConfig2.chainId, _blockExplorer = _this$chainConfig2.blockExplorer, _displayName = _this$chainConfig2.displayName, _rpcTarget = _this$chainConfig2.rpcTarget, _ticker = _this$chainConfig2.ticker, _tickerName = _this$chainConfig2.tickerName;\n                  network = {\n                    chainId: _chainId,\n                    rpcTarget: _rpcTarget,\n                    blockExplorerUrl: _blockExplorer,\n                    displayName: _displayName,\n                    tickerName: _tickerName,\n                    ticker: _ticker,\n                    logo: \"\"\n                  };\n                }\n\n                this.torusInstance = new _toruslabs_solana_embed__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"](this.torusWalletOptions);\n                _context.next = 5;\n                return this.torusInstance.init(_objectSpread(_objectSpread({\n                  showTorusButton: false\n                }, this.initParams), {}, {\n                  network: network\n                }));\n\n              case 5:\n                this.solanaProvider = new _web3auth_solana_provider__WEBPACK_IMPORTED_MODULE_12__[\"TorusInjectedProvider\"]({\n                  config: {\n                    chainConfig: this.chainConfig\n                  }\n                });\n                this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].READY;\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_EVENTS */ \"b\"].READY, _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WALLET_ADAPTERS */ \"i\"].TORUS_SOLANA);\n                _context.prev = 8;\n\n                if (!options.autoConnect) {\n                  _context.next = 13;\n                  break;\n                }\n\n                this.rehydrated = true;\n                _context.next = 13;\n                return this.connect();\n\n              case 13:\n                _context.next = 19;\n                break;\n\n              case 15:\n                _context.prev = 15;\n                _context.t0 = _context[\"catch\"](8);\n                loglevel__WEBPACK_IMPORTED_MODULE_13___default.a.error(\"Failed to connect with cached torus solana provider\", _context.t0);\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_EVENTS */ \"b\"].ERRORED, _context.t0);\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[8, 15]]);\n      }));\n\n      function init(_x) {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"connect\",\n    value: function () {\n      var _connect = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee2() {\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_get_js__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])(SolanaWalletAdapter.prototype), \"checkConnectionRequirements\", this).call(this);\n\n                if (this.torusInstance) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletInitializationError */ \"j\"].notReady(\"Torus wallet is not initialized\");\n\n              case 3:\n                if (this.solanaProvider) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletInitializationError */ \"j\"].notReady(\"Torus wallet is not initialized\");\n\n              case 5:\n                this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].CONNECTING;\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_EVENTS */ \"b\"].CONNECTING, {\n                  adapter: _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WALLET_ADAPTERS */ \"i\"].TORUS_SOLANA\n                });\n                _context2.prev = 7;\n                _context2.next = 10;\n                return this.torusInstance.login(this.loginSettings);\n\n              case 10:\n                _context2.next = 12;\n                return this.solanaProvider.setupProvider(this.torusInstance.provider);\n\n              case 12:\n                this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].CONNECTED;\n                this.torusInstance.showTorusButton();\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].CONNECTED, {\n                  adapter: _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WALLET_ADAPTERS */ \"i\"].TORUS_SOLANA,\n                  reconnected: this.rehydrated\n                });\n                return _context2.abrupt(\"return\", this.provider);\n\n              case 18:\n                _context2.prev = 18;\n                _context2.t0 = _context2[\"catch\"](7);\n                // ready again to be connected\n                this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].READY;\n                this.rehydrated = false;\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_EVENTS */ \"b\"].ERRORED, _context2.t0);\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletLoginError */ \"k\"].connectionError(\"Failed to login with torus solana wallet\");\n\n              case 24:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[7, 18]]);\n      }));\n\n      function connect() {\n        return _connect.apply(this, arguments);\n      }\n\n      return connect;\n    }()\n  }, {\n    key: \"disconnect\",\n    value: function () {\n      var _disconnect = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee3() {\n        var options,\n            _args3 = arguments;\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                options = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : {\n                  cleanup: false\n                };\n\n                if (!(this.status !== _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].CONNECTED)) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletLoginError */ \"k\"].notConnectedError(\"Not connected with wallet\");\n\n              case 3:\n                if (this.torusInstance) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletInitializationError */ \"j\"].notReady(\"Torus wallet is not initialized\");\n\n              case 5:\n                _context3.next = 7;\n                return this.torusInstance.logout();\n\n              case 7:\n                if (options.cleanup) {\n                  // ready to connect again\n                  this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].NOT_READY;\n                  this.torusInstance = null;\n                  this.solanaProvider = null;\n                } else {\n                  // ready to connect again\n                  this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].READY;\n                }\n\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_EVENTS */ \"b\"].DISCONNECTED);\n\n              case 9:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function disconnect() {\n        return _disconnect.apply(this, arguments);\n      }\n\n      return disconnect;\n    }()\n  }, {\n    key: \"getUserInfo\",\n    value: function () {\n      var _getUserInfo = Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().mark(function _callee4() {\n        var userInfo;\n        return Object(C_Users_Bhargab_kalita_Downloads_DAO_DAO_PROJECTDAO_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(this.status !== _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].CONNECTED)) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletLoginError */ \"k\"].notConnectedError(\"Not connected with wallet\");\n\n              case 2:\n                if (this.torusInstance) {\n                  _context4.next = 4;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletInitializationError */ \"j\"].notReady(\"Torus wallet is not initialized\");\n\n              case 4:\n                _context4.next = 6;\n                return this.torusInstance.getUserInfo();\n\n              case 6:\n                userInfo = _context4.sent;\n                return _context4.abrupt(\"return\", userInfo);\n\n              case 8:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getUserInfo() {\n        return _getUserInfo.apply(this, arguments);\n      }\n\n      return getUserInfo;\n    }()\n  }, {\n    key: \"setAdapterSettings\",\n    value: function setAdapterSettings(_) {}\n  }]);\n\n  return SolanaWalletAdapter;\n}(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* BaseAdapter */ \"e\"]);\n\n\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["ignored C:\\Users\\Bhargab kalita\\Downloads\\DAO\\DAO\\PROJECTDAO\\node_modules\\ethereumjs-util\\node_modules\\bn.js\\lib buffer","ignored C:\\Users\\Bhargab kalita\\Downloads\\DAO\\DAO\\PROJECTDAO\\node_modules\\unload\\dist\\es ./node.js","ignored C:\\Users\\Bhargab kalita\\Downloads\\DAO\\DAO\\PROJECTDAO\\node_modules\\@toruslabs\\tweetnacl-js crypto","C:/Users/Bhargab kalita/Downloads/DAO/DAO/PROJECTDAO/node_modules/fast-deep-equal/index.js","C:/Users/Bhargab kalita/Downloads/DAO/DAO/PROJECTDAO/node_modules/is-stream/index.js","ignored C:\\Users\\Bhargab kalita\\Downloads\\DAO\\DAO\\PROJECTDAO\\node_modules\\@solana\\web3.js\\node_modules\\tweetnacl crypto","ignored C:\\Users\\Bhargab kalita\\Downloads\\DAO\\DAO\\PROJECTDAO\\node_modules\\@solana\\web3.js\\node_modules\\bn.js\\lib buffer","ignored C:\\Users\\Bhargab kalita\\Downloads\\DAO\\DAO\\PROJECTDAO\\node_modules\\borsh\\node_modules\\bn.js\\lib buffer","../src/messages.ts","../src/interfaces.ts","../src/config.ts","../src/loglevel.ts","../src/utils.ts","../src/baseProvider.ts","../src/embedUtils.ts","../src/PopupHandler.ts","../src/communicationProvider.ts","../src/inPageProvider.ts","../src/siteMetadata.ts","../src/embed.ts","../src/solanaWalletAdapter.ts"],"names":["module","exports","equal","a","b","constructor","length","i","keys","Array","isArray","RegExp","source","flags","valueOf","Object","prototype","toString","hasOwnProperty","call","key","isStream","stream","pipe","writable","_write","_writableState","readable","_read","_readableState","duplex","transform","_transform","errors","disconnected","permanentlyDisconnected","unsupportedSync","method","invalidDuplexStream","invalidOptions","maxEventListeners","invalidRequestArgs","invalidRequestMethod","invalidRequestParams","invalidLoggerObject","invalidLoggerMethod","info","connected","chainId","warnings","PAYMENT_PROVIDER","MOONPAY","WYRE","RAMPNETWORK","XANPOOL","MERCURYO","TRANSAK","TORUS_BUILD_ENV","PRODUCTION","DEVELOPMENT","TESTING","BUTTON_POSITION","BOTTOM_LEFT","TOP_LEFT","BOTTOM_RIGHT","TOP_RIGHT","LOGIN_PROVIDER","GOOGLE","FACEBOOK","REDDIT","DISCORD","TWITCH","APPLE","LINE","GITHUB","KAKAO","LINKEDIN","TWITTER","WEIBO","WECHAT","EMAIL_PASSWORDLESS","translations","en","embed","continue","actionRequired","pendingAction","cookiesRequired","enableCookies","clickHere","de","ja","ko","zh","supportedVerifierList","api","prodTorusUrl","localStorageKey","window","loglevel","createErrorMiddleware","req","res","message","data","next","done","error","log","logStreamDisconnectWarning","remoteLabel","emitter","warningMsg","getWindowId","Math","getTorusUrl","torusUrl","logLevel","getUserLanguage","userLanguage","userLanguages","config","FEATURES_PROVIDER_CHANGE_WINDOW","height","width","FEATURES_DEFAULT_WALLET_WINDOW","FEATURES_DEFAULT_POPUP_WINDOW","FEATURES_CONFIRM_WINDOW","storage","x","e","h","dualScreenLeft","dualScreenTop","document","systemZoom","left","top","features","w","jsonRpcStreamName","isDuplexStream","messages","isTorus","setMaxListeners","_handleConnect","_handleDisconnect","_handleStreamDisconnect","_rpcRequest","_initializeState","request","sendAsync","mux","pump","jsonRpcConnection","createStreamMiddleware","rpcEngine","createIdRemapMiddleware","createLoggerMiddleware","origin","location","_rpcEngine","args","params","getRpcPromiseCallback","send","handleEvent","handlerArgs","handlerWrapper","handler","handle","resolve","htmlToElement","html","template","trimmedHtml","url","target","getPopupFeatures","windowTimer","iClosedWindow","_setupTimer","Number","setInterval","clearInterval","emit","open","Promise","close","redirect","TorusCommunicationProvider","dappStorageKey","languageTranslations","configuration","notificationHandler","payload","COMMUNICATION_NOTIFICATIONS","rid","isFull","_handleCloseWindow","currentLoginProvider","isLoggedIn","isIFrameFullScreen","isConnected","torusIframe","torusAlertContainer","_state","COMMUNICATION_JRPC_METHODS","_handleWindow","finalUrl","handledWindow","windowId","windowRefs","_displayIframe","style","hideTorusButton","showTorusButton","cb","_payload","errorMessage","_createPopupBlockAlert","logoUrl","torusAlert","successAlert","btnContainer","bindOnLoad","attachOnLoad","documentReady","getLogoUrl","buttonPosition","hasEmittedConnection","torusWidgetVisibility","initialized","isPermanentlyDisconnected","TorusInPageProvider","selectedAddress","_handleAccountsChanged","_handleChainChanged","_handleUnlockStateChanged","jsonRpcNotificationHandler","PROVIDER_NOTIFICATIONS","PROVIDER_JRPC_METHODS","isUnlocked","accounts","isInternal","callback","isEthAccounts","finalAccounts","dequal","img","reject","getSiteName","siteName","metaTitle","icon","imgExists","_icon","Boolean","getSiteMetadata","getSiteIcon","name","PROVIDER_UNSAFE_METHODS","COMMUNICATION_UNSAFE_METHODS","isLocalStorageAvailable","storageAvailable","torusIframeHtml","modalZIndex","requestedLoginProvider","init","buildEnv","enableLogging","useLocalStorage","apiKey","extraParams","setAPIKey","torusIframeUrl","hashParams","handleSetup","dappMetadata","network","isInitialized","login","communicationProvider","provider","loginWithPrivateKey","userInfo","privateKey","success","logout","cleanUp","clearInit","isElement","element","styleLink","setProvider","showWallet","instanceId","finalPath","path","walletWindow","getUserInfo","userInfoResponse","initiateTopup","topupResponse","getAccounts","response","sendTransaction","requireAllSignatures","signTransaction","transaction","messageOnly","parsed","JSON","signature","publicKey","Buffer","signAllTransactions","encodedMessage","tx","responses","signatures","item","transactions","signMessage","getGaslessPublicKey","handleDappStorageKey","storedKey","generatedKey","_setupWeb3","providerStream","targetWindow","contentWindow","communicationStream","inPageProvider","detectAccountRequestPrototypeModifier","m","originalMethod","self","loginProvider","err","proxiedInPageProvider","deleteProperty","proxiedCommunicationProvider","SolanaWalletAdapter","WALLET_ADAPTERS","TORUS_SOLANA","ADAPTER_NAMESPACES","SOLANA","CHAIN_NAMESPACES","ADAPTER_CATEGORY","EXTERNAL","ADAPTER_STATUS","NOT_READY","getChainConfig","rpcTarget","blockExplorerUrl","displayName","ticker","tickerName","logo","chainConfig","ADAPTER_EVENTS","options","connect","WalletInitializationError","adapter","reconnected","rehydrated","WalletLoginError","disconnect","cleanup","setAdapterSettings","BaseAdapter"],"mappings":"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","file":"x","sourcesContent":["/* (ignored) */","/* (ignored) */","/* (ignored) */","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","'use strict';\n\nconst isStream = stream =>\n\tstream !== null &&\n\ttypeof stream === 'object' &&\n\ttypeof stream.pipe === 'function';\n\nisStream.writable = stream =>\n\tisStream(stream) &&\n\tstream.writable !== false &&\n\ttypeof stream._write === 'function' &&\n\ttypeof stream._writableState === 'object';\n\nisStream.readable = stream =>\n\tisStream(stream) &&\n\tstream.readable !== false &&\n\ttypeof stream._read === 'function' &&\n\ttypeof stream._readableState === 'object';\n\nisStream.duplex = stream =>\n\tisStream.writable(stream) &&\n\tisStream.readable(stream);\n\nisStream.transform = stream =>\n\tisStream.duplex(stream) &&\n\ttypeof stream._transform === 'function';\n\nmodule.exports = isStream;\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { PublicKey } from '@solana/web3.js';\nimport { createLoggerMiddleware, COMMUNICATION_JRPC_METHODS, COMMUNICATION_NOTIFICATIONS, PROVIDER_JRPC_METHODS, PROVIDER_NOTIFICATIONS } from '@toruslabs/base-controllers';\nimport { setAPIKey } from '@toruslabs/http-helpers';\nimport { SafeEventEmitter, ObjectMultiplex, createStreamMiddleware, JRPCEngine, createIdRemapMiddleware, getRpcPromiseCallback, BasePostMessageStream } from '@toruslabs/openlogin-jrpc';\nimport { ethErrors, EthereumRpcError } from 'eth-rpc-errors';\nimport { duplex } from 'is-stream';\nimport pump from 'pump';\nimport loglevel from 'loglevel';\nimport dequal from 'fast-deep-equal';\n\nvar messages = {\n  errors: {\n    disconnected: () => \"Torus: Lost connection to Torus.\",\n    permanentlyDisconnected: () => \"Torus: Disconnected from iframe. Page reload required.\",\n    unsupportedSync: method => \"Torus: The Torus Ethereum provider does not support synchronous methods like \".concat(method, \" without a callback parameter.\"),\n    invalidDuplexStream: () => \"Must provide a Node.js-style duplex stream.\",\n    invalidOptions: maxEventListeners => \"Invalid options. Received: { maxEventListeners: \".concat(maxEventListeners, \"}\"),\n    invalidRequestArgs: () => \"Expected a single, non-array, object argument.\",\n    invalidRequestMethod: () => \"'args.method' must be a non-empty string.\",\n    invalidRequestParams: () => \"'args.params' must be an object or array if provided.\",\n    invalidLoggerObject: () => \"'args.logger' must be an object if provided.\",\n    invalidLoggerMethod: method => \"'args.logger' must include required method '\".concat(method, \"'.\")\n  },\n  info: {\n    connected: chainId => \"Torus: Connected to chain with ID \\\"\".concat(chainId, \"\\\".\")\n  },\n  warnings: {}\n};\n\nconst PAYMENT_PROVIDER = {\n  MOONPAY: \"moonpay\",\n  WYRE: \"wyre\",\n  RAMPNETWORK: \"rampnetwork\",\n  XANPOOL: \"xanpool\",\n  MERCURYO: \"mercuryo\",\n  TRANSAK: \"transak\"\n};\nconst TORUS_BUILD_ENV = {\n  PRODUCTION: \"production\",\n  DEVELOPMENT: \"development\",\n  TESTING: \"testing\"\n};\nconst BUTTON_POSITION = {\n  BOTTOM_LEFT: \"bottom-left\",\n  TOP_LEFT: \"top-left\",\n  BOTTOM_RIGHT: \"bottom-right\",\n  TOP_RIGHT: \"top-right\"\n};\nconst LOGIN_PROVIDER = {\n  GOOGLE: \"google\",\n  FACEBOOK: \"facebook\",\n  REDDIT: \"reddit\",\n  DISCORD: \"discord\",\n  TWITCH: \"twitch\",\n  APPLE: \"apple\",\n  LINE: \"line\",\n  GITHUB: \"github\",\n  KAKAO: \"kakao\",\n  LINKEDIN: \"linkedin\",\n  TWITTER: \"twitter\",\n  WEIBO: \"weibo\",\n  WECHAT: \"wechat\",\n  EMAIL_PASSWORDLESS: \"email_passwordless\"\n};\n\nconst translations = {\n  en: {\n    embed: {\n      continue: \"Continue\",\n      actionRequired: \"Authorization required\",\n      pendingAction: \"Click continue to proceed with your request in a popup\",\n      cookiesRequired: \"Cookies Required\",\n      enableCookies: \"Please enable cookies in your browser preferences to access Torus\",\n      clickHere: \"More Info\"\n    }\n  },\n  de: {\n    embed: {\n      continue: \"Fortsetzen\",\n      actionRequired: \"Autorisierung erforderlich\",\n      pendingAction: \"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren\",\n      cookiesRequired: \"Cookies bentigt\",\n      enableCookies: \"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen\",\n      clickHere: \"Mehr Info\"\n    }\n  },\n  ja: {\n    embed: {\n      continue: \"\",\n      actionRequired: \"\",\n      pendingAction: \"\",\n      cookiesRequired: \"\",\n      enableCookies: \"TorusCookie\",\n      clickHere: \"\"\n    }\n  },\n  ko: {\n    embed: {\n      continue: \"\",\n      actionRequired: \" \",\n      pendingAction: \"    .\",\n      cookiesRequired: \" \",\n      enableCookies: \"     Torus .\",\n      clickHere: \"  \"\n    }\n  },\n  zh: {\n    embed: {\n      continue: \"\",\n      actionRequired: \"\",\n      pendingAction: \"\",\n      cookiesRequired: \"Cookie\",\n      enableCookies: \"cookieTorus\",\n      clickHere: \"\"\n    }\n  }\n};\nvar configuration = {\n  supportedVerifierList: [LOGIN_PROVIDER.GOOGLE, LOGIN_PROVIDER.REDDIT, LOGIN_PROVIDER.DISCORD],\n  api: \"https://api.tor.us\",\n  translations,\n  prodTorusUrl: \"\",\n  localStorageKey: \"torus-\".concat(window.location.hostname)\n};\n\nvar log = loglevel.getLogger(\"solana-embed\");\n\n/**\n * json-rpc-engine middleware that logs RPC errors and and validates req.method.\n *\n * @param log - The logging API to use.\n * @returns  json-rpc-engine middleware function\n */\n\nfunction createErrorMiddleware() {\n  return (req, res, next) => {\n    // json-rpc-engine will terminate the request when it notices this error\n    if (typeof req.method !== \"string\" || !req.method) {\n      res.error = ethErrors.rpc.invalidRequest({\n        message: \"The request 'method' must be a non-empty string.\",\n        data: req\n      });\n    }\n\n    next(done => {\n      const {\n        error\n      } = res;\n\n      if (!error) {\n        return done();\n      }\n\n      log.error(\"Torus - RPC Error: \".concat(error.message), error);\n      return done();\n    });\n  };\n}\n/**\n * Logs a stream disconnection error. Emits an 'error' if given an\n * EventEmitter that has listeners for the 'error' event.\n *\n * @param log - The logging API to use.\n * @param remoteLabel - The label of the disconnected stream.\n * @param error - The associated error to log.\n * @param emitter - The logging API to use.\n */\n\nfunction logStreamDisconnectWarning(remoteLabel, error, emitter) {\n  let warningMsg = \"Torus: Lost connection to \\\"\".concat(remoteLabel, \"\\\".\");\n\n  if (error !== null && error !== void 0 && error.stack) {\n    warningMsg += \"\\n\".concat(error.stack);\n  }\n\n  log.warn(warningMsg);\n\n  if (emitter && emitter.listenerCount(\"error\") > 0) {\n    emitter.emit(\"error\", warningMsg);\n  }\n}\nconst getWindowId = () => Math.random().toString(36).slice(2);\nconst getTorusUrl = async buildEnv => {\n  let torusUrl;\n  let logLevel; // const versionUsed = version;\n  // log.info(\"solana embed version used: \", versionUsed);\n\n  switch (buildEnv) {\n    case \"testing\":\n      torusUrl = \"https://solana-testing.tor.us\";\n      logLevel = \"debug\";\n      break;\n\n    case \"development\":\n      torusUrl = \"http://localhost:8080\";\n      logLevel = \"debug\";\n      break;\n\n    default:\n      torusUrl = \"https://solana.tor.us\";\n      logLevel = \"error\";\n      break;\n  }\n\n  return {\n    torusUrl,\n    logLevel\n  };\n};\nconst getUserLanguage = () => {\n  let userLanguage = window.navigator.language || \"en-US\";\n  const userLanguages = userLanguage.split(\"-\");\n  userLanguage = Object.prototype.hasOwnProperty.call(configuration.translations, userLanguages[0]) ? userLanguages[0] : \"en\";\n  return userLanguage;\n};\nconst FEATURES_PROVIDER_CHANGE_WINDOW = {\n  height: 660,\n  width: 375\n};\nconst FEATURES_DEFAULT_WALLET_WINDOW = {\n  height: 740,\n  width: 1315\n};\nconst FEATURES_DEFAULT_POPUP_WINDOW = {\n  height: 700,\n  width: 1200\n};\nconst FEATURES_CONFIRM_WINDOW = {\n  height: 600,\n  width: 400\n};\nfunction storageAvailable(type) {\n  let storage;\n\n  try {\n    storage = window[type];\n    const x = \"__storage_test__\";\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (e) {\n    return e && ( // everything except Firefox\n    e.code === 22 || // Firefox\n    e.code === 1014 || // test name field too, because code might not be present\n    // everything except Firefox\n    e.name === \"QuotaExceededError\" || // Firefox\n    e.name === \"NS_ERROR_DOM_QUOTA_REACHED\") && // acknowledge QuotaExceededError only if there's something already stored\n    storage && storage.length !== 0;\n  }\n}\n/**\n * popup handler utils\n */\n\nfunction getPopupFeatures(_ref) {\n  let {\n    width: w,\n    height: h\n  } = _ref;\n  // Fixes dual-screen position                             Most browsers      Firefox\n  const dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX;\n  const dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;\n  const width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : window.screen.width;\n  const height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : window.screen.height;\n  const systemZoom = 1; // No reliable estimate\n\n  const left = Math.abs((width - w) / 2 / systemZoom + dualScreenLeft);\n  const top = Math.abs((height - h) / 2 / systemZoom + dualScreenTop);\n  const features = \"titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=\".concat(h / systemZoom, \",width=\").concat(w / systemZoom, \",top=\").concat(top, \",left=\").concat(left);\n  return features;\n}\n\nclass BaseProvider extends SafeEventEmitter {\n  /**\n   * Indicating that this provider is a Torus provider.\n   */\n  constructor(connectionStream, _ref) {\n    let {\n      maxEventListeners = 100,\n      jsonRpcStreamName = \"provider\"\n    } = _ref;\n    super();\n\n    _defineProperty(this, \"isTorus\", void 0);\n\n    _defineProperty(this, \"_rpcEngine\", void 0);\n\n    _defineProperty(this, \"jsonRpcConnectionEvents\", void 0);\n\n    _defineProperty(this, \"_state\", void 0);\n\n    if (!duplex(connectionStream)) {\n      throw new Error(messages.errors.invalidDuplexStream());\n    }\n\n    this.isTorus = true;\n    this.setMaxListeners(maxEventListeners);\n    this._handleConnect = this._handleConnect.bind(this);\n    this._handleDisconnect = this._handleDisconnect.bind(this);\n    this._handleStreamDisconnect = this._handleStreamDisconnect.bind(this);\n    this._rpcRequest = this._rpcRequest.bind(this);\n    this._initializeState = this._initializeState.bind(this);\n    this.request = this.request.bind(this);\n    this.sendAsync = this.sendAsync.bind(this); // this.enable = this.enable.bind(this);\n    // setup connectionStream multiplexing\n\n    const mux = new ObjectMultiplex();\n    pump(connectionStream, mux, connectionStream, this._handleStreamDisconnect.bind(this, \"Torus\")); // ignore phishing warning message (handled elsewhere)\n\n    mux.ignoreStream(\"phishing\"); // setup own event listeners\n    // connect to async provider\n\n    const jsonRpcConnection = createStreamMiddleware();\n    pump(jsonRpcConnection.stream, mux.createStream(jsonRpcStreamName), jsonRpcConnection.stream, this._handleStreamDisconnect.bind(this, \"Torus RpcProvider\")); // handle RPC requests via dapp-side rpc engine\n\n    const rpcEngine = new JRPCEngine();\n    rpcEngine.push(createIdRemapMiddleware());\n    rpcEngine.push(createErrorMiddleware());\n    rpcEngine.push(createLoggerMiddleware({\n      origin: location.origin\n    }));\n    rpcEngine.push(jsonRpcConnection.middleware);\n    this._rpcEngine = rpcEngine;\n    this.jsonRpcConnectionEvents = jsonRpcConnection.events;\n  }\n  /**\n   * Submits an RPC request for the given method, with the given params.\n   * Resolves with the result of the method call, or rejects on error.\n   */\n\n\n  async request(args) {\n    if (!args || typeof args !== \"object\" || Array.isArray(args)) {\n      throw ethErrors.rpc.invalidRequest({\n        message: messages.errors.invalidRequestArgs(),\n        data: args\n      });\n    }\n\n    const {\n      method,\n      params\n    } = args;\n\n    if (typeof method !== \"string\" || method.length === 0) {\n      throw ethErrors.rpc.invalidRequest({\n        message: messages.errors.invalidRequestMethod(),\n        data: args\n      });\n    }\n\n    if (params !== undefined && !Array.isArray(params) && (typeof params !== \"object\" || params === null)) {\n      throw ethErrors.rpc.invalidRequest({\n        message: messages.errors.invalidRequestParams(),\n        data: args\n      });\n    }\n\n    return new Promise((resolve, reject) => {\n      this._rpcRequest({\n        method,\n        params\n      }, getRpcPromiseCallback(resolve, reject));\n    });\n  }\n  /**\n   * Submits an RPC request per the given JSON-RPC request object.\n   */\n\n\n  send(payload, callback) {\n    this._rpcRequest(payload, callback);\n  }\n  /**\n   * Submits an RPC request per the given JSON-RPC request object.\n   */\n\n\n  sendAsync(payload) {\n    return new Promise((resolve, reject) => {\n      this._rpcRequest(payload, getRpcPromiseCallback(resolve, reject));\n    });\n  }\n  /**\n   * Called when connection is lost to critical streams.\n   *\n   * emits TorusInpageProvider#disconnect\n   */\n\n\n  _handleStreamDisconnect(streamName, error) {\n    logStreamDisconnectWarning(streamName, error, this);\n\n    this._handleDisconnect(false, error ? error.message : undefined);\n  }\n\n}\n\nconst handleEvent = function (handle, eventName, handler) {\n  for (var _len = arguments.length, handlerArgs = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    handlerArgs[_key - 3] = arguments[_key];\n  }\n\n  const handlerWrapper = () => {\n    handler(...handlerArgs);\n    handle.removeEventListener(eventName, handlerWrapper);\n  };\n\n  handle.addEventListener(eventName, handlerWrapper);\n};\nasync function documentReady() {\n  return new Promise(resolve => {\n    if (document.readyState !== \"loading\") {\n      resolve();\n    } else {\n      handleEvent(document, \"DOMContentLoaded\", resolve);\n    }\n  });\n}\nconst htmlToElement = html => {\n  const template = window.document.createElement(\"template\");\n  const trimmedHtml = html.trim(); // Never return a text node of whitespace as the result\n\n  template.innerHTML = trimmedHtml;\n  return template.content.firstChild;\n};\n\nclass PopupHandler extends SafeEventEmitter {\n  constructor(_ref) {\n    let {\n      url,\n      target,\n      features\n    } = _ref;\n    super();\n\n    _defineProperty(this, \"url\", void 0);\n\n    _defineProperty(this, \"target\", void 0);\n\n    _defineProperty(this, \"features\", void 0);\n\n    _defineProperty(this, \"window\", void 0);\n\n    _defineProperty(this, \"windowTimer\", void 0);\n\n    _defineProperty(this, \"iClosedWindow\", void 0);\n\n    this.url = url;\n    this.target = target || \"_blank\";\n    this.features = features || getPopupFeatures(FEATURES_DEFAULT_POPUP_WINDOW);\n    this.window = undefined;\n    this.windowTimer = undefined;\n    this.iClosedWindow = false;\n\n    this._setupTimer();\n  }\n\n  _setupTimer() {\n    this.windowTimer = Number(setInterval(() => {\n      if (this.window && this.window.closed) {\n        clearInterval(this.windowTimer);\n\n        if (!this.iClosedWindow) {\n          this.emit(\"close\");\n        }\n\n        this.iClosedWindow = false;\n        this.window = undefined;\n      }\n\n      if (this.window === undefined) clearInterval(this.windowTimer);\n    }, 500));\n  }\n\n  open() {\n    var _this$window;\n\n    this.window = window.open(this.url.href, this.target, this.features);\n    if ((_this$window = this.window) !== null && _this$window !== void 0 && _this$window.focus) this.window.focus();\n    return Promise.resolve();\n  }\n\n  close() {\n    this.iClosedWindow = true;\n    if (this.window) this.window.close();\n  }\n\n  redirect(locationReplaceOnRedirect) {\n    if (locationReplaceOnRedirect) {\n      window.location.replace(this.url.href);\n    } else {\n      window.location.href = this.url.href;\n    }\n  }\n\n}\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$2(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nclass TorusCommunicationProvider extends BaseProvider {\n  constructor(connectionStream, _ref) {\n    let {\n      maxEventListeners = 100,\n      jsonRpcStreamName = \"provider\"\n    } = _ref;\n    super(connectionStream, {\n      maxEventListeners,\n      jsonRpcStreamName\n    }); // private state\n\n    _defineProperty(this, \"embedTranslations\", void 0);\n\n    _defineProperty(this, \"torusUrl\", void 0);\n\n    _defineProperty(this, \"dappStorageKey\", void 0);\n\n    _defineProperty(this, \"windowRefs\", void 0);\n\n    _defineProperty(this, \"tryWindowHandle\", void 0);\n\n    _defineProperty(this, \"torusAlertContainer\", void 0);\n\n    _defineProperty(this, \"torusIframe\", void 0);\n\n    this._state = _objectSpread$2({}, TorusCommunicationProvider._defaultState); // public state\n\n    this.torusUrl = \"\";\n    this.dappStorageKey = \"\";\n    const languageTranslations = configuration.translations[getUserLanguage()];\n    this.embedTranslations = languageTranslations.embed;\n    this.windowRefs = {}; // setup own event listeners\n    // EIP-1193 connect\n\n    this.on(\"connect\", () => {\n      this._state.isConnected = true;\n    });\n\n    const notificationHandler = payload => {\n      const {\n        method,\n        params\n      } = payload;\n\n      if (method === COMMUNICATION_NOTIFICATIONS.IFRAME_STATUS) {\n        const {\n          isFullScreen,\n          rid\n        } = params;\n\n        this._displayIframe({\n          isFull: isFullScreen,\n          rid: rid\n        });\n      } else if (method === COMMUNICATION_NOTIFICATIONS.CREATE_WINDOW) {\n        const {\n          windowId,\n          url\n        } = params;\n\n        this._createPopupBlockAlert(windowId, url);\n      } else if (method === COMMUNICATION_NOTIFICATIONS.CLOSE_WINDOW) {\n        this._handleCloseWindow(params);\n      } else if (method === COMMUNICATION_NOTIFICATIONS.USER_LOGGED_IN) {\n        const {\n          currentLoginProvider\n        } = params;\n        this._state.isLoggedIn = true;\n        this._state.currentLoginProvider = currentLoginProvider;\n      } else if (method === COMMUNICATION_NOTIFICATIONS.USER_LOGGED_OUT) {\n        this._state.isLoggedIn = false;\n        this._state.currentLoginProvider = null;\n\n        this._displayIframe();\n      }\n    };\n\n    this.jsonRpcConnectionEvents.on(\"notification\", notificationHandler);\n  }\n\n  get isLoggedIn() {\n    return this._state.isLoggedIn;\n  }\n\n  get isIFrameFullScreen() {\n    return this._state.isIFrameFullScreen;\n  }\n  /**\n   * Returns whether the inPage provider is connected to Torus.\n   */\n\n\n  isConnected() {\n    return this._state.isConnected;\n  }\n\n  async _initializeState(params) {\n    try {\n      const {\n        torusUrl,\n        dappStorageKey,\n        torusAlertContainer,\n        torusIframe\n      } = params;\n      this.torusUrl = torusUrl;\n      this.dappStorageKey = dappStorageKey;\n      this.torusAlertContainer = torusAlertContainer;\n      this.torusIframe = torusIframe;\n      this.torusIframe.addEventListener(\"load\", () => {\n        // only do this if iframe is not full screen\n        if (!this._state.isIFrameFullScreen) this._displayIframe();\n      });\n      const {\n        currentLoginProvider,\n        isLoggedIn\n      } = await this.request({\n        method: COMMUNICATION_JRPC_METHODS.GET_PROVIDER_STATE,\n        params: []\n      }); // indicate that we've connected, for EIP-1193 compliance\n\n      this._handleConnect(currentLoginProvider, isLoggedIn);\n    } catch (error) {\n      log.error(\"Torus: Failed to get initial state. Please report this bug.\", error);\n    } finally {\n      log.info(\"initialized communication state\");\n      this._state.initialized = true;\n      this.emit(\"_initialized\");\n    }\n  }\n\n  _handleWindow(windowId) {\n    let {\n      url,\n      target,\n      features\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const finalUrl = new URL(url || \"\".concat(this.torusUrl, \"/redirect?windowId=\").concat(windowId));\n\n    if (this.dappStorageKey) {\n      // If multiple instances, it returns the first one\n      if (finalUrl.hash) finalUrl.hash += \"&dappStorageKey=\".concat(this.dappStorageKey);else finalUrl.hash = \"#dappStorageKey=\".concat(this.dappStorageKey);\n    }\n\n    const handledWindow = new PopupHandler({\n      url: finalUrl,\n      target,\n      features\n    });\n    handledWindow.open();\n\n    if (!handledWindow.window) {\n      this._createPopupBlockAlert(windowId, finalUrl.href);\n\n      return;\n    } // Add to collection only if window is opened\n\n\n    this.windowRefs[windowId] = handledWindow; // We tell the iframe that the window has been successfully opened\n\n    this.request({\n      method: COMMUNICATION_JRPC_METHODS.OPENED_WINDOW,\n      params: {\n        windowId\n      }\n    });\n    handledWindow.once(\"close\", () => {\n      // user closed the window\n      delete this.windowRefs[windowId];\n      this.request({\n        method: COMMUNICATION_JRPC_METHODS.CLOSED_WINDOW,\n        params: {\n          windowId\n        }\n      });\n    });\n  }\n\n  _displayIframe() {\n    let {\n      isFull = false,\n      rid = \"\"\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const style = {}; // set phase\n\n    if (!isFull) {\n      style.display = this._state.torusWidgetVisibility ? \"block\" : \"none\";\n      style.height = \"70px\";\n      style.width = \"70px\";\n\n      switch (this._state.buttonPosition) {\n        case BUTTON_POSITION.TOP_LEFT:\n          style.top = \"0px\";\n          style.left = \"0px\";\n          style.right = \"auto\";\n          style.bottom = \"auto\";\n          break;\n\n        case BUTTON_POSITION.TOP_RIGHT:\n          style.top = \"0px\";\n          style.right = \"0px\";\n          style.left = \"auto\";\n          style.bottom = \"auto\";\n          break;\n\n        case BUTTON_POSITION.BOTTOM_RIGHT:\n          style.bottom = \"0px\";\n          style.right = \"0px\";\n          style.top = \"auto\";\n          style.left = \"auto\";\n          break;\n\n        case BUTTON_POSITION.BOTTOM_LEFT:\n        default:\n          style.bottom = \"0px\";\n          style.left = \"0px\";\n          style.top = \"auto\";\n          style.right = \"auto\";\n          break;\n      }\n    } else {\n      style.display = \"block\";\n      style.width = \"100%\";\n      style.height = \"100%\";\n      style.top = \"0px\";\n      style.right = \"0px\";\n      style.left = \"0px\";\n      style.bottom = \"0px\";\n    }\n\n    Object.assign(this.torusIframe.style, style);\n    this._state.isIFrameFullScreen = isFull;\n    this.request({\n      method: COMMUNICATION_JRPC_METHODS.IFRAME_STATUS,\n      params: {\n        isIFrameFullScreen: isFull,\n        rid\n      }\n    });\n  }\n\n  hideTorusButton() {\n    this._state.torusWidgetVisibility = false;\n\n    this._displayIframe();\n  }\n\n  showTorusButton() {\n    this._state.torusWidgetVisibility = true;\n\n    this._displayIframe();\n  }\n  /**\n   * Internal RPC method. Forwards requests to background via the RPC engine.\n   * Also remap ids inbound and outbound\n   */\n\n\n  _rpcRequest(payload, callback) {\n    const cb = callback;\n    const _payload = payload;\n\n    if (!Array.isArray(_payload)) {\n      if (!_payload.jsonrpc) {\n        _payload.jsonrpc = \"2.0\";\n      }\n    }\n\n    this.tryWindowHandle(_payload, cb);\n  }\n  /**\n   * When the provider becomes connected, updates internal state and emits\n   * required events. Idempotent.\n   *\n   * @param currentLoginProvider - The login Provider\n   * emits TorusInpageProvider#connect\n   */\n\n\n  _handleConnect(currentLoginProvider, isLoggedIn) {\n    if (!this._state.isConnected) {\n      this._state.isConnected = true;\n      this.emit(\"connect\", {\n        currentLoginProvider,\n        isLoggedIn\n      });\n      log.debug(messages.info.connected(currentLoginProvider));\n    }\n  }\n  /**\n   * When the provider becomes disconnected, updates internal state and emits\n   * required events. Idempotent with respect to the isRecoverable parameter.\n   *\n   * Error codes per the CloseEvent status codes as required by EIP-1193:\n   * https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes\n   *\n   * @param isRecoverable - Whether the disconnection is recoverable.\n   * @param errorMessage - A custom error message.\n   * emits TorusInpageProvider#disconnect\n   */\n\n\n  _handleDisconnect(isRecoverable, errorMessage) {\n    if (this._state.isConnected || !this._state.isPermanentlyDisconnected && !isRecoverable) {\n      this._state.isConnected = false;\n      let error;\n\n      if (isRecoverable) {\n        error = new EthereumRpcError(1013, // Try again later\n        errorMessage || messages.errors.disconnected());\n        log.debug(error);\n      } else {\n        error = new EthereumRpcError(1011, // Internal error\n        errorMessage || messages.errors.permanentlyDisconnected());\n        log.error(error);\n        this._state.currentLoginProvider = null;\n        this._state.isLoggedIn = false;\n        this._state.torusWidgetVisibility = false;\n        this._state.isIFrameFullScreen = false;\n        this._state.isPermanentlyDisconnected = true;\n      }\n\n      this.emit(\"disconnect\", error);\n    }\n  } // Called if the iframe wants to close the window cause it is done processing the request\n\n\n  _handleCloseWindow(params) {\n    const {\n      windowId\n    } = params;\n\n    if (this.windowRefs[windowId]) {\n      this.windowRefs[windowId].close();\n      delete this.windowRefs[windowId];\n    }\n  }\n\n  async _createPopupBlockAlert(windowId, url) {\n    const logoUrl = this.getLogoUrl();\n    const torusAlert = htmlToElement('<div id=\"torusAlert\" class=\"torus-alert--v2\">' + \"<div id=\\\"torusAlert__logo\\\"><img src=\\\"\".concat(logoUrl, \"\\\" /></div>\") + \"<div>\" + \"<h1 id=\\\"torusAlert__title\\\">\".concat(this.embedTranslations.actionRequired, \"</h1>\") + \"<p id=\\\"torusAlert__desc\\\">\".concat(this.embedTranslations.pendingAction, \"</p>\") + \"</div>\" + \"</div>\");\n    const successAlert = htmlToElement(\"<div><a id=\\\"torusAlert__btn\\\">\".concat(this.embedTranslations.continue, \"</a></div>\"));\n    const btnContainer = htmlToElement('<div id=\"torusAlert__btn-container\"></div>');\n    btnContainer.appendChild(successAlert);\n    torusAlert.appendChild(btnContainer);\n\n    const bindOnLoad = () => {\n      successAlert.addEventListener(\"click\", () => {\n        this._handleWindow(windowId, {\n          url,\n          target: \"_blank\",\n          features: getPopupFeatures(FEATURES_CONFIRM_WINDOW)\n        });\n\n        torusAlert.remove();\n        if (this.torusAlertContainer.children.length === 0) this.torusAlertContainer.style.display = \"none\";\n      });\n    };\n\n    const attachOnLoad = () => {\n      this.torusAlertContainer.appendChild(torusAlert);\n    };\n\n    await documentReady();\n    attachOnLoad();\n    bindOnLoad();\n    this.torusAlertContainer.style.display = \"block\";\n  }\n\n  getLogoUrl() {\n    const logoUrl = \"\".concat(this.torusUrl, \"/images/torus_icon-blue.svg\");\n    return logoUrl;\n  }\n\n}\n\n_defineProperty(TorusCommunicationProvider, \"_defaultState\", {\n  buttonPosition: \"bottom-left\",\n  currentLoginProvider: null,\n  isIFrameFullScreen: false,\n  hasEmittedConnection: false,\n  torusWidgetVisibility: false,\n  initialized: false,\n  isLoggedIn: false,\n  isPermanentlyDisconnected: false,\n  isConnected: false\n});\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nclass TorusInPageProvider extends BaseProvider {\n  /**\n   * The chain ID of the currently connected Solana chain.\n   * See [chainId.network]{@link https://chainid.network} for more information.\n   */\n\n  /**\n   * The user's currently selected Solana address.\n   * If null, Torus is either locked or the user has not permitted any\n   * addresses to be viewed.\n   */\n  constructor(connectionStream, _ref) {\n    let {\n      maxEventListeners = 100,\n      jsonRpcStreamName = \"provider\"\n    } = _ref;\n    super(connectionStream, {\n      maxEventListeners,\n      jsonRpcStreamName\n    }); // private state\n\n    _defineProperty(this, \"chainId\", void 0);\n\n    _defineProperty(this, \"selectedAddress\", void 0);\n\n    _defineProperty(this, \"tryWindowHandle\", void 0);\n\n    this._state = _objectSpread$1({}, TorusInPageProvider._defaultState); // public state\n\n    this.selectedAddress = null;\n    this.chainId = null;\n    this._handleAccountsChanged = this._handleAccountsChanged.bind(this);\n    this._handleChainChanged = this._handleChainChanged.bind(this);\n    this._handleUnlockStateChanged = this._handleUnlockStateChanged.bind(this); // setup own event listeners\n    // EIP-1193 connect\n\n    this.on(\"connect\", () => {\n      this._state.isConnected = true;\n    });\n\n    const jsonRpcNotificationHandler = payload => {\n      const {\n        method,\n        params\n      } = payload;\n\n      if (method === PROVIDER_NOTIFICATIONS.ACCOUNTS_CHANGED) {\n        this._handleAccountsChanged(params);\n      } else if (method === PROVIDER_NOTIFICATIONS.UNLOCK_STATE_CHANGED) {\n        this._handleUnlockStateChanged(params);\n      } else if (method === PROVIDER_NOTIFICATIONS.CHAIN_CHANGED) {\n        this._handleChainChanged(params);\n      }\n    }; // json rpc notification listener\n\n\n    this.jsonRpcConnectionEvents.on(\"notification\", jsonRpcNotificationHandler);\n  }\n  /**\n   * Returns whether the inpage provider is connected to Torus.\n   */\n\n\n  isConnected() {\n    return this._state.isConnected;\n  } // Private Methods\n  //= ===================\n\n  /**\n   * Constructor helper.\n   * Populates initial state by calling 'wallet_getProviderState' and emits\n   * necessary events.\n   */\n\n\n  async _initializeState() {\n    try {\n      const {\n        accounts,\n        chainId,\n        isUnlocked\n      } = await this.request({\n        method: PROVIDER_JRPC_METHODS.GET_PROVIDER_STATE,\n        params: []\n      }); // indicate that we've connected, for EIP-1193 compliance\n\n      this.emit(\"connect\", {\n        chainId\n      });\n\n      this._handleChainChanged({\n        chainId\n      });\n\n      this._handleUnlockStateChanged({\n        accounts,\n        isUnlocked\n      });\n\n      this._handleAccountsChanged(accounts);\n    } catch (error) {\n      log.error(\"Torus: Failed to get initial state. Please report this bug.\", error);\n    } finally {\n      log.info(\"initialized provider state\");\n      this._state.initialized = true;\n      this.emit(\"_initialized\");\n    }\n  }\n  /**\n   * Internal RPC method. Forwards requests to background via the RPC engine.\n   * Also remap ids inbound and outbound\n   */\n\n\n  _rpcRequest(payload, callback) {\n    let isInternal = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    let cb = callback;\n    const _payload = payload;\n\n    if (!Array.isArray(_payload)) {\n      if (!_payload.jsonrpc) {\n        _payload.jsonrpc = \"2.0\";\n      }\n\n      if (_payload.method === \"solana_accounts\" || _payload.method === \"solana_requestAccounts\") {\n        // handle accounts changing\n        cb = (err, res) => {\n          this._handleAccountsChanged(res.result || [], _payload.method === \"solana_accounts\", isInternal);\n\n          callback(err, res);\n        };\n      } else if (_payload.method === \"wallet_getProviderState\") {\n        this._rpcEngine.handle(payload, cb);\n\n        return;\n      }\n    }\n\n    this.tryWindowHandle(_payload, cb);\n  }\n  /**\n   * When the provider becomes connected, updates internal state and emits\n   * required events. Idempotent.\n   *\n   * @param chainId - The ID of the newly connected chain.\n   * emits TorusInpageProvider#connect\n   */\n\n\n  _handleConnect(chainId) {\n    if (!this._state.isConnected) {\n      this._state.isConnected = true;\n      this.emit(\"connect\", {\n        chainId\n      });\n      log.debug(messages.info.connected(chainId));\n    }\n  }\n  /**\n   * When the provider becomes disconnected, updates internal state and emits\n   * required events. Idempotent with respect to the isRecoverable parameter.\n   *\n   * Error codes per the CloseEvent status codes as required by EIP-1193:\n   * https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes\n   *\n   * @param isRecoverable - Whether the disconnection is recoverable.\n   * @param errorMessage - A custom error message.\n   * emits TorusInpageProvider#disconnect\n   */\n\n\n  _handleDisconnect(isRecoverable, errorMessage) {\n    if (this._state.isConnected || !this._state.isPermanentlyDisconnected && !isRecoverable) {\n      this._state.isConnected = false;\n      let error;\n\n      if (isRecoverable) {\n        error = new EthereumRpcError(1013, // Try again later\n        errorMessage || messages.errors.disconnected());\n        log.debug(error);\n      } else {\n        error = new EthereumRpcError(1011, // Internal error\n        errorMessage || messages.errors.permanentlyDisconnected());\n        log.error(error);\n        this.chainId = null;\n        this._state.accounts = null;\n        this.selectedAddress = null;\n        this._state.isUnlocked = false;\n        this._state.isPermanentlyDisconnected = true;\n      }\n\n      this.emit(\"disconnect\", error);\n    }\n  }\n  /**\n   * Called when accounts may have changed.\n   */\n\n\n  _handleAccountsChanged(accounts) {\n    let isEthAccounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    let isInternal = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    // defensive programming\n    let finalAccounts = accounts;\n\n    if (!Array.isArray(finalAccounts)) {\n      log.error(\"Torus: Received non-array accounts parameter. Please report this bug.\", finalAccounts);\n      finalAccounts = [];\n    }\n\n    for (const account of accounts) {\n      if (typeof account !== \"string\") {\n        log.error(\"Torus: Received non-string account. Please report this bug.\", accounts);\n        finalAccounts = [];\n        break;\n      }\n    } // emit accountsChanged if anything about the accounts array has changed\n\n\n    if (!dequal(this._state.accounts, finalAccounts)) {\n      // we should always have the correct accounts even before solana_accounts\n      // returns, except in cases where isInternal is true\n      if (isEthAccounts && Array.isArray(this._state.accounts) && this._state.accounts.length > 0 && !isInternal) {\n        log.error('Torus: \"solana_accounts\" unexpectedly updated accounts. Please report this bug.', finalAccounts);\n      }\n\n      this._state.accounts = finalAccounts;\n      this.emit(\"accountsChanged\", finalAccounts);\n    } // handle selectedAddress\n\n\n    if (this.selectedAddress !== finalAccounts[0]) {\n      this.selectedAddress = finalAccounts[0] || null;\n    }\n  }\n  /**\n   * Upon receipt of a new chainId and networkVersion, emits corresponding\n   * events and sets relevant public state.\n   * Does nothing if neither the chainId nor the networkVersion are different\n   * from existing values.\n   *\n   * emits TorusInpageProvider#chainChanged\n   * @param networkInfo - An object with network info.\n   */\n\n\n  _handleChainChanged() {\n    let {\n      chainId\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (!chainId) {\n      log.error(\"Torus: Received invalid network parameters. Please report this bug.\", {\n        chainId\n      });\n      return;\n    }\n\n    if (chainId === \"loading\") {\n      this._handleDisconnect(true);\n    } else {\n      this._handleConnect(chainId);\n\n      if (chainId !== this.chainId) {\n        this.chainId = chainId;\n\n        if (this._state.initialized) {\n          this.emit(\"chainChanged\", this.chainId);\n        }\n      }\n    }\n  }\n  /**\n   * Upon receipt of a new isUnlocked state, sets relevant public state.\n   * Calls the accounts changed handler with the received accounts, or an empty\n   * array.\n   *\n   * Does nothing if the received value is equal to the existing value.\n   * There are no lock/unlock events.\n   *\n   * @param opts - Options bag.\n   */\n\n\n  _handleUnlockStateChanged() {\n    let {\n      accounts,\n      isUnlocked\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (typeof isUnlocked !== \"boolean\") {\n      log.error(\"Torus: Received invalid isUnlocked parameter. Please report this bug.\", {\n        isUnlocked\n      });\n      return;\n    }\n\n    if (isUnlocked !== this._state.isUnlocked) {\n      this._state.isUnlocked = isUnlocked;\n\n      this._handleAccountsChanged(accounts || []);\n    }\n  }\n\n}\n\n_defineProperty(TorusInPageProvider, \"_defaultState\", {\n  accounts: null,\n  isConnected: false,\n  isUnlocked: false,\n  initialized: false,\n  isPermanentlyDisconnected: false,\n  hasEmittedConnection: false\n});\n\n/**\n * Returns whether the given image URL exists\n */\nfunction imgExists(url) {\n  return new Promise((resolve, reject) => {\n    try {\n      const img = document.createElement(\"img\");\n\n      img.onload = () => resolve(true);\n\n      img.onerror = () => resolve(false);\n\n      img.src = url;\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n/**\n * Extracts a name for the site from the DOM\n */\n\n\nconst getSiteName = window => {\n  const {\n    document\n  } = window;\n  const siteName = document.querySelector('head > meta[property=\"og:site_name\"]');\n\n  if (siteName) {\n    return siteName.content;\n  }\n\n  const metaTitle = document.querySelector('head > meta[name=\"title\"]');\n\n  if (metaTitle) {\n    return metaTitle.content;\n  }\n\n  if (document.title && document.title.length > 0) {\n    return document.title;\n  }\n\n  return window.location.hostname;\n};\n/**\n * Extracts an icon for the site from the DOM\n */\n\n\nasync function getSiteIcon(window) {\n  try {\n    const {\n      document\n    } = window; // Use the site's favicon if it exists\n\n    let icon = document.querySelector('head > link[rel=\"shortcut icon\"]');\n\n    if (icon && (await imgExists(icon.href))) {\n      return icon.href;\n    } // Search through available icons in no particular order\n\n\n    icon = Array.from(document.querySelectorAll('head > link[rel=\"icon\"]')).find(_icon => Boolean(_icon.href));\n\n    if (icon && (await imgExists(icon.href))) {\n      return icon.href;\n    }\n\n    return \"\";\n  } catch (error) {\n    return \"\";\n  }\n}\n/**\n * Gets site metadata and returns it\n *\n */\n\n\nconst getSiteMetadata = async () => ({\n  name: getSiteName(window),\n  icon: await getSiteIcon(window)\n});\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nconst PROVIDER_UNSAFE_METHODS = [\"send_transaction\", \"sign_transaction\", \"sign_all_transactions\", \"sign_message\", \"connect\"];\nconst COMMUNICATION_UNSAFE_METHODS = [COMMUNICATION_JRPC_METHODS.SET_PROVIDER];\nconst isLocalStorageAvailable = storageAvailable(\"localStorage\"); // preload for iframe doesn't work https://bugs.chromium.org/p/chromium/issues/detail?id=593267\n\n(async function preLoadIframe() {\n  try {\n    if (typeof document === \"undefined\") return;\n    const torusIframeHtml = document.createElement(\"link\");\n    const {\n      torusUrl\n    } = await getTorusUrl(\"production\");\n    torusIframeHtml.href = \"\".concat(torusUrl, \"/frame\");\n    torusIframeHtml.crossOrigin = \"anonymous\";\n    torusIframeHtml.type = \"text/html\";\n    torusIframeHtml.rel = \"prefetch\";\n\n    if (torusIframeHtml.relList && torusIframeHtml.relList.supports) {\n      if (torusIframeHtml.relList.supports(\"prefetch\")) {\n        document.head.appendChild(torusIframeHtml);\n      }\n    }\n  } catch (error) {\n    log.warn(error);\n  }\n})();\n\nclass Torus {\n  constructor() {\n    let {\n      modalZIndex = 99999\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _defineProperty(this, \"isInitialized\", void 0);\n\n    _defineProperty(this, \"torusAlert\", void 0);\n\n    _defineProperty(this, \"modalZIndex\", void 0);\n\n    _defineProperty(this, \"alertZIndex\", void 0);\n\n    _defineProperty(this, \"requestedLoginProvider\", void 0);\n\n    _defineProperty(this, \"provider\", void 0);\n\n    _defineProperty(this, \"communicationProvider\", void 0);\n\n    _defineProperty(this, \"dappStorageKey\", void 0);\n\n    _defineProperty(this, \"torusAlertContainer\", void 0);\n\n    _defineProperty(this, \"torusUrl\", void 0);\n\n    _defineProperty(this, \"torusIframe\", void 0);\n\n    _defineProperty(this, \"styleLink\", void 0);\n\n    this.torusUrl = \"\";\n    this.isInitialized = false; // init done\n\n    this.requestedLoginProvider = null;\n    this.modalZIndex = modalZIndex;\n    this.alertZIndex = modalZIndex + 1000;\n    this.dappStorageKey = \"\";\n  }\n\n  get isLoggedIn() {\n    if (!this.communicationProvider) return false;\n    return this.communicationProvider.isLoggedIn;\n  }\n\n  async init() {\n    let {\n      buildEnv = TORUS_BUILD_ENV.PRODUCTION,\n      enableLogging = false,\n      network,\n      showTorusButton = false,\n      useLocalStorage = false,\n      buttonPosition = BUTTON_POSITION.BOTTOM_LEFT,\n      apiKey = \"torus-default\",\n      extraParams = {}\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (this.isInitialized) throw new Error(\"Already initialized\");\n    setAPIKey(apiKey);\n    const {\n      torusUrl,\n      logLevel\n    } = await getTorusUrl(buildEnv);\n    log.info(torusUrl, \"url loaded\");\n    this.torusUrl = torusUrl;\n    log.setDefaultLevel(logLevel);\n    if (enableLogging) log.enableAll();else log.disableAll();\n    const dappStorageKey = this.handleDappStorageKey(useLocalStorage);\n    const torusIframeUrl = new URL(torusUrl);\n    if (torusIframeUrl.pathname.endsWith(\"/\")) torusIframeUrl.pathname += \"frame\";else torusIframeUrl.pathname += \"/frame\";\n    const hashParams = new URLSearchParams();\n    if (dappStorageKey) hashParams.append(\"dappStorageKey\", dappStorageKey);\n    hashParams.append(\"origin\", window.location.origin);\n    torusIframeUrl.hash = hashParams.toString(); // Iframe code\n\n    this.torusIframe = htmlToElement(\"<iframe\\n        id=\\\"torusIframe\\\"\\n        class=\\\"torusIframe\\\"\\n        src=\\\"\".concat(torusIframeUrl.href, \"\\\"\\n        style=\\\"display: none; position: fixed; top: 0; right: 0; width: 100%;\\n        height: 100%; border: none; border-radius: 0; z-index: \").concat(this.modalZIndex.toString(), \"\\\"\\n      ></iframe>\"));\n    this.torusAlertContainer = htmlToElement(\"<div id=\\\"torusAlertContainer\\\" style=\\\"display:none; z-index: \".concat(this.alertZIndex.toString(), \"\\\"></div>\"));\n    this.styleLink = htmlToElement(\"<link href=\\\"\".concat(torusUrl, \"/css/widget.css\\\" rel=\\\"stylesheet\\\" type=\\\"text/css\\\">\"));\n\n    const handleSetup = async () => {\n      return new Promise((resolve, reject) => {\n        try {\n          window.document.head.appendChild(this.styleLink);\n          window.document.body.appendChild(this.torusIframe);\n          window.document.body.appendChild(this.torusAlertContainer);\n          this.torusIframe.addEventListener(\"load\", async () => {\n            const dappMetadata = await getSiteMetadata(); // send init params here\n\n            this.torusIframe.contentWindow.postMessage({\n              buttonPosition,\n              apiKey,\n              network,\n              dappMetadata,\n              extraParams\n            }, torusIframeUrl.origin);\n            await this._setupWeb3({\n              torusUrl\n            });\n            if (showTorusButton) this.showTorusButton();else this.hideTorusButton();\n            this.isInitialized = true;\n            window.torus = this;\n            resolve();\n          });\n        } catch (error) {\n          reject(error);\n        }\n      });\n    };\n\n    await documentReady();\n    await handleSetup();\n  }\n\n  async login() {\n    let params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (!this.isInitialized) throw new Error(\"Call init() first\");\n\n    try {\n      this.requestedLoginProvider = params.loginProvider || null;\n\n      if (!this.requestedLoginProvider) {\n        this.communicationProvider._displayIframe({\n          isFull: true\n        });\n      } // If user is already logged in, we assume they have given access to the website\n\n\n      const res = await new Promise((resolve, reject) => {\n        // We use this method because we want to update inPage provider state with account info\n        this.provider._rpcRequest({\n          method: \"solana_requestAccounts\",\n          params: [this.requestedLoginProvider, params.login_hint]\n        }, getRpcPromiseCallback(resolve, reject));\n      });\n\n      if (Array.isArray(res) && res.length > 0) {\n        return res;\n      } // This would never happen, but just in case\n\n\n      throw new Error(\"Login failed\");\n    } catch (error) {\n      log.error(\"login failed\", error);\n      throw error;\n    } finally {\n      if (this.communicationProvider.isIFrameFullScreen) this.communicationProvider._displayIframe();\n    }\n  }\n\n  async loginWithPrivateKey(loginParams) {\n    if (!this.isInitialized) throw new Error(\"Call init() first\");\n    const {\n      privateKey,\n      userInfo\n    } = loginParams;\n    const {\n      success\n    } = await this.communicationProvider.request({\n      method: \"login_with_private_key\",\n      params: {\n        privateKey,\n        userInfo\n      }\n    });\n    if (!success) throw new Error(\"Login Failed\");\n  }\n\n  async logout() {\n    if (!this.communicationProvider.isLoggedIn) throw new Error(\"Not logged in\");\n    await this.communicationProvider.request({\n      method: COMMUNICATION_JRPC_METHODS.LOGOUT,\n      params: []\n    });\n    this.requestedLoginProvider = null;\n  }\n\n  async cleanUp() {\n    if (this.communicationProvider.isLoggedIn) {\n      await this.logout();\n    }\n\n    this.clearInit();\n  }\n\n  clearInit() {\n    function isElement(element) {\n      return element instanceof Element || element instanceof Document;\n    }\n\n    if (isElement(this.styleLink) && window.document.body.contains(this.styleLink)) {\n      this.styleLink.remove();\n      this.styleLink = undefined;\n    }\n\n    if (isElement(this.torusIframe) && window.document.body.contains(this.torusIframe)) {\n      this.torusIframe.remove();\n      this.torusIframe = undefined;\n    }\n\n    if (isElement(this.torusAlertContainer) && window.document.body.contains(this.torusAlertContainer)) {\n      this.torusAlert = undefined;\n      this.torusAlertContainer.remove();\n      this.torusAlertContainer = undefined;\n    }\n\n    this.isInitialized = false;\n  }\n\n  hideTorusButton() {\n    this.communicationProvider.hideTorusButton();\n  }\n\n  showTorusButton() {\n    this.communicationProvider.showTorusButton();\n  }\n\n  async setProvider(params) {\n    await this.communicationProvider.request({\n      method: COMMUNICATION_JRPC_METHODS.SET_PROVIDER,\n      params: _objectSpread({}, params)\n    });\n  }\n\n  async showWallet(path) {\n    let params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const instanceId = await this.communicationProvider.request({\n      method: COMMUNICATION_JRPC_METHODS.WALLET_INSTANCE_ID,\n      params: []\n    });\n    const finalPath = path ? \"/\".concat(path) : \"\";\n    const finalUrl = new URL(\"\".concat(this.torusUrl, \"/wallet\").concat(finalPath)); // Using URL constructor to prevent js injection and allow parameter validation.!\n\n    finalUrl.searchParams.append(\"instanceId\", instanceId);\n    Object.keys(params).forEach(x => {\n      finalUrl.searchParams.append(x, params[x]);\n    });\n\n    if (this.dappStorageKey) {\n      finalUrl.hash = \"#dappStorageKey=\".concat(this.dappStorageKey);\n    } // No need to track this window state. Hence, no _handleWindow call.\n\n\n    const walletWindow = new PopupHandler({\n      url: finalUrl,\n      features: getPopupFeatures(FEATURES_DEFAULT_WALLET_WINDOW)\n    });\n    walletWindow.open();\n  }\n\n  async getUserInfo() {\n    const userInfoResponse = await this.communicationProvider.request({\n      method: COMMUNICATION_JRPC_METHODS.USER_INFO,\n      params: []\n    });\n    return userInfoResponse;\n  }\n\n  async initiateTopup(provider, params) {\n    if (!this.isInitialized) throw new Error(\"Torus is not initialized\");\n    const windowId = getWindowId();\n\n    this.communicationProvider._handleWindow(windowId);\n\n    const topupResponse = await this.communicationProvider.request({\n      method: COMMUNICATION_JRPC_METHODS.TOPUP,\n      params: {\n        provider,\n        params,\n        windowId\n      }\n    });\n    return topupResponse;\n  } // Solana specific API\n\n\n  async getAccounts() {\n    const response = await this.provider.request({\n      method: \"getAccounts\",\n      params: []\n    });\n    return response;\n  }\n\n  async sendTransaction(transaction) {\n    const response = await this.provider.request({\n      method: \"send_transaction\",\n      params: {\n        message: transaction.serialize({\n          requireAllSignatures: false\n        }).toString(\"hex\")\n      }\n    });\n    return response;\n  }\n\n  async signTransaction(transaction) {\n    const response = await this.provider.request({\n      method: \"sign_transaction\",\n      params: {\n        message: transaction.serializeMessage().toString(\"hex\"),\n        messageOnly: true\n      }\n    }); // reconstruct signature pair\n\n    const parsed = JSON.parse(response);\n    const signature = {\n      publicKey: new PublicKey(parsed.publicKey),\n      signature: Buffer.from(parsed.signature, \"hex\")\n    };\n    transaction.addSignature(signature.publicKey, signature.signature);\n    return transaction;\n  }\n\n  async signAllTransactions(transactions) {\n    const encodedMessage = transactions.map(tx => {\n      return tx.serializeMessage().toString(\"hex\");\n    });\n    const responses = await this.provider.request({\n      method: \"sign_all_transactions\",\n      params: {\n        message: encodedMessage,\n        messageOnly: true\n      }\n    }); // reconstruct signature pairs\n\n    const signatures = responses.map(item => {\n      const parsed = JSON.parse(item);\n      return {\n        publicKey: new PublicKey(parsed.publicKey),\n        signature: Buffer.from(parsed.signature, \"hex\")\n      };\n    });\n    transactions.forEach((tx, idx) => {\n      tx.addSignature(signatures[idx].publicKey, signatures[idx].signature);\n      return tx;\n    });\n    return transactions;\n  }\n\n  async signMessage(data) {\n    const response = await this.provider.request({\n      method: \"sign_message\",\n      params: {\n        data\n      }\n    });\n    return response;\n  }\n\n  async getGaslessPublicKey() {\n    const response = await this.provider.request({\n      method: \"get_gasless_public_key\",\n      params: []\n    });\n    return response;\n  } // async connect(): Promise<boolean> {\n  //   const response = (await this.provider.request({\n  //     method: \"connect\",\n  //     params: {},\n  //   })) as boolean;\n  //   return response;\n  // }\n\n\n  handleDappStorageKey(useLocalStorage) {\n    let dappStorageKey = \"\";\n\n    if (isLocalStorageAvailable && useLocalStorage) {\n      const storedKey = window.localStorage.getItem(configuration.localStorageKey);\n      if (storedKey) dappStorageKey = storedKey;else {\n        const generatedKey = \"torus-app-\".concat(getWindowId());\n        window.localStorage.setItem(configuration.localStorageKey, generatedKey);\n        dappStorageKey = generatedKey;\n      }\n    }\n\n    this.dappStorageKey = dappStorageKey;\n    return dappStorageKey;\n  }\n\n  async _setupWeb3(providerParams) {\n    log.info(\"setupWeb3 running\"); // setup background connection\n\n    const providerStream = new BasePostMessageStream({\n      name: \"embed_torus\",\n      target: \"iframe_torus\",\n      targetWindow: this.torusIframe.contentWindow\n    }); // We create another LocalMessageDuplexStream for communication between dapp <> iframe\n\n    const communicationStream = new BasePostMessageStream({\n      name: \"embed_communication\",\n      target: \"iframe_communication\",\n      targetWindow: this.torusIframe.contentWindow\n    }); // compose the inPage provider\n\n    const inPageProvider = new TorusInPageProvider(providerStream, {});\n    const communicationProvider = new TorusCommunicationProvider(communicationStream, {});\n\n    inPageProvider.tryWindowHandle = (payload, cb) => {\n      const _payload = payload;\n\n      if (!Array.isArray(_payload) && PROVIDER_UNSAFE_METHODS.includes(_payload.method)) {\n        if (!this.communicationProvider.isLoggedIn) throw new Error(\"User Not Logged In\");\n        const windowId = getWindowId();\n\n        communicationProvider._handleWindow(windowId, {\n          target: \"_blank\",\n          features: getPopupFeatures(FEATURES_CONFIRM_WINDOW)\n        }); // for inPageProvider methods sending windowId in request instead of params\n        // as params might be positional.\n\n\n        _payload.windowId = windowId;\n      }\n\n      inPageProvider._rpcEngine.handle(_payload, cb);\n    };\n\n    communicationProvider.tryWindowHandle = (payload, cb) => {\n      const _payload = payload;\n\n      if (!Array.isArray(_payload) && COMMUNICATION_UNSAFE_METHODS.includes(_payload.method)) {\n        const windowId = getWindowId();\n\n        communicationProvider._handleWindow(windowId, {\n          target: \"_blank\",\n          features: getPopupFeatures(FEATURES_PROVIDER_CHANGE_WINDOW) // todo: are these features generic for all\n\n        }); // for communication methods sending window id in jrpc req params\n\n\n        _payload.params.windowId = windowId;\n      }\n\n      communicationProvider._rpcEngine.handle(_payload, cb);\n    }; // detect solana_requestAccounts and pipe to enable for now\n\n\n    const detectAccountRequestPrototypeModifier = m => {\n      const originalMethod = inPageProvider[m]; // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n      const self = this;\n\n      inPageProvider[m] = function providerFunc(request, cb) {\n        const {\n          method,\n          params = []\n        } = request;\n\n        if (method === \"solana_requestAccounts\") {\n          if (!cb) return self.login({\n            loginProvider: params[0]\n          });\n          self.login({\n            loginProvider: params[0]\n          }) // eslint-disable-next-line promise/no-callback-in-promise\n          .then(res => cb(null, res)) // eslint-disable-next-line promise/no-callback-in-promise\n          .catch(err => cb(err));\n        }\n\n        return originalMethod.apply(this, [request, cb]);\n      };\n    }; // Detects call to solana_requestAccounts in request & sendAsync and passes to login\n\n\n    detectAccountRequestPrototypeModifier(\"request\");\n    detectAccountRequestPrototypeModifier(\"sendAsync\");\n    detectAccountRequestPrototypeModifier(\"send\");\n    const proxiedInPageProvider = new Proxy(inPageProvider, {\n      // straight up lie that we deleted the property so that it doesn't\n      // throw an error in strict mode\n      deleteProperty: () => true\n    });\n    const proxiedCommunicationProvider = new Proxy(communicationProvider, {\n      // straight up lie that we deleted the property so that it doesn't\n      // throw an error in strict mode\n      deleteProperty: () => true\n    });\n    this.provider = proxiedInPageProvider;\n    this.communicationProvider = proxiedCommunicationProvider;\n    await Promise.all([inPageProvider._initializeState(), communicationProvider._initializeState(_objectSpread(_objectSpread({}, providerParams), {}, {\n      dappStorageKey: this.dappStorageKey,\n      torusAlertContainer: this.torusAlertContainer,\n      torusIframe: this.torusIframe\n    }))]);\n    log.debug(\"Torus - injected provider\");\n  }\n\n}\n\nexport { BUTTON_POSITION, LOGIN_PROVIDER, PAYMENT_PROVIDER, TORUS_BUILD_ENV, TorusInPageProvider, Torus as default };\n//# sourceMappingURL=solanaEmbed.esm.js.map\n",null,null,null,null,null,null,null,null,null,null,null,"import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport Torus from '@toruslabs/solana-embed';\nimport { BaseAdapter, WALLET_ADAPTERS, ADAPTER_NAMESPACES, CHAIN_NAMESPACES, ADAPTER_CATEGORY, ADAPTER_STATUS, getChainConfig, ADAPTER_EVENTS, WalletInitializationError, WalletLoginError } from '@web3auth/base';\nimport { TorusInjectedProvider } from '@web3auth/solana-provider';\nimport log from 'loglevel';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nclass SolanaWalletAdapter extends BaseAdapter {\n  constructor() {\n    let params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super();\n\n    _defineProperty(this, \"name\", WALLET_ADAPTERS.TORUS_SOLANA);\n\n    _defineProperty(this, \"adapterNamespace\", ADAPTER_NAMESPACES.SOLANA);\n\n    _defineProperty(this, \"currentChainNamespace\", CHAIN_NAMESPACES.SOLANA);\n\n    _defineProperty(this, \"type\", ADAPTER_CATEGORY.EXTERNAL);\n\n    _defineProperty(this, \"status\", ADAPTER_STATUS.NOT_READY);\n\n    _defineProperty(this, \"torusInstance\", null);\n\n    _defineProperty(this, \"torusWalletOptions\", void 0);\n\n    _defineProperty(this, \"initParams\", void 0);\n\n    _defineProperty(this, \"loginSettings\", {});\n\n    _defineProperty(this, \"solanaProvider\", null);\n\n    _defineProperty(this, \"rehydrated\", false);\n\n    this.torusWalletOptions = params.adapterSettings || {};\n    this.initParams = params.initParams || {};\n    this.loginSettings = params.loginSettings || {};\n    this.chainConfig = params.chainConfig || null;\n  }\n\n  get provider() {\n    if (this.status === ADAPTER_STATUS.CONNECTED && this.solanaProvider) {\n      var _this$solanaProvider;\n\n      return ((_this$solanaProvider = this.solanaProvider) === null || _this$solanaProvider === void 0 ? void 0 : _this$solanaProvider.provider) || null;\n    }\n\n    return null;\n  }\n\n  set provider(_) {\n    throw new Error(\"Not implemented\");\n  }\n\n  async init(options) {\n    super.checkInitializationRequirements(); // set chainConfig for mainnet by default if not set\n\n    let network;\n\n    if (!this.chainConfig) {\n      this.chainConfig = getChainConfig(CHAIN_NAMESPACES.SOLANA, \"0x1\");\n      const {\n        blockExplorer,\n        displayName,\n        ticker,\n        tickerName,\n        rpcTarget,\n        chainId\n      } = this.chainConfig;\n      network = {\n        chainId,\n        rpcTarget,\n        blockExplorerUrl: blockExplorer,\n        displayName,\n        ticker,\n        tickerName,\n        logo: \"\"\n      };\n    } else {\n      const {\n        chainId,\n        blockExplorer,\n        displayName,\n        rpcTarget,\n        ticker,\n        tickerName\n      } = this.chainConfig;\n      network = {\n        chainId,\n        rpcTarget,\n        blockExplorerUrl: blockExplorer,\n        displayName,\n        tickerName,\n        ticker,\n        logo: \"\"\n      };\n    }\n\n    this.torusInstance = new Torus(this.torusWalletOptions);\n    await this.torusInstance.init(_objectSpread(_objectSpread({\n      showTorusButton: false\n    }, this.initParams), {}, {\n      network\n    }));\n    this.solanaProvider = new TorusInjectedProvider({\n      config: {\n        chainConfig: this.chainConfig\n      }\n    });\n    this.status = ADAPTER_STATUS.READY;\n    this.emit(ADAPTER_EVENTS.READY, WALLET_ADAPTERS.TORUS_SOLANA);\n\n    try {\n      if (options.autoConnect) {\n        this.rehydrated = true;\n        await this.connect();\n      }\n    } catch (error) {\n      log.error(\"Failed to connect with cached torus solana provider\", error);\n      this.emit(ADAPTER_EVENTS.ERRORED, error);\n    }\n  }\n\n  async connect() {\n    super.checkConnectionRequirements();\n    if (!this.torusInstance) throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n    if (!this.solanaProvider) throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n    this.status = ADAPTER_STATUS.CONNECTING;\n    this.emit(ADAPTER_EVENTS.CONNECTING, {\n      adapter: WALLET_ADAPTERS.TORUS_SOLANA\n    });\n\n    try {\n      await this.torusInstance.login(this.loginSettings);\n      await this.solanaProvider.setupProvider(this.torusInstance.provider);\n      this.status = ADAPTER_STATUS.CONNECTED;\n      this.torusInstance.showTorusButton();\n      this.emit(ADAPTER_STATUS.CONNECTED, {\n        adapter: WALLET_ADAPTERS.TORUS_SOLANA,\n        reconnected: this.rehydrated\n      });\n      return this.provider;\n    } catch (error) {\n      // ready again to be connected\n      this.status = ADAPTER_STATUS.READY;\n      this.rehydrated = false;\n      this.emit(ADAPTER_EVENTS.ERRORED, error);\n      throw WalletLoginError.connectionError(\"Failed to login with torus solana wallet\");\n    }\n  }\n\n  async disconnect() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      cleanup: false\n    };\n    if (this.status !== ADAPTER_STATUS.CONNECTED) throw WalletLoginError.notConnectedError(\"Not connected with wallet\");\n    if (!this.torusInstance) throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n    await this.torusInstance.logout();\n\n    if (options.cleanup) {\n      // ready to connect again\n      this.status = ADAPTER_STATUS.NOT_READY;\n      this.torusInstance = null;\n      this.solanaProvider = null;\n    } else {\n      // ready to connect again\n      this.status = ADAPTER_STATUS.READY;\n    }\n\n    this.emit(ADAPTER_EVENTS.DISCONNECTED);\n  }\n\n  async getUserInfo() {\n    if (this.status !== ADAPTER_STATUS.CONNECTED) throw WalletLoginError.notConnectedError(\"Not connected with wallet\");\n    if (!this.torusInstance) throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n    const userInfo = await this.torusInstance.getUserInfo();\n    return userInfo;\n  }\n\n  setAdapterSettings(_) {}\n\n}\n\nexport { SolanaWalletAdapter };\n//# sourceMappingURL=torusSolanaAdapter.esm.js.map\n"]}}