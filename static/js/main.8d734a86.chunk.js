(this["webpackJsonptwitter-clone"]=this["webpackJsonptwitter-clone"]||[]).push([[5],{1028:function(t,e){},1030:function(t,e){},1050:function(t,e){},1052:function(t,e){},1064:function(t,e){},1080:function(t,e){},1082:function(t,e){},1084:function(t,e){},1224:function(t,e){},1226:function(t,e){},1233:function(t,e){},1234:function(t,e){},1250:function(t,e){},1252:function(t,e){},1260:function(t,e){},1271:function(t,e){},1340:function(t,e,n){"use strict";n.r(e);var s=n(0),a=n.n(s),c=n(279),r=n.n(c),i=(n(652),n(653),n(115)),o=n(30),u=n(68),l=n(1),d=n(11),b=n(39),j=(n(382),n(57)),p=n(70),f=n(8),O=function(){var t=Object(s.useState)(0),e=Object(b.a)(t,2),n=e[0],a=e[1],c=Object(s.useState)(0),r=Object(b.a)(c,2),o=r[0],O=r[1],x=Object(s.useState)(0),h=Object(b.a)(x,2),m=h[0],v=h[1],g=Object(s.useState)(0),y=Object(b.a)(g,2),w=y[0],N=y[1],C=Object(p.b)(),S=C.Moralis,P=C.isInitialized,k=Object(s.useState)(),F=Object(b.a)(k,2),T=F[0],E=F[1],V=Object(p.c)(),D=Object(s.useState)(),A=Object(b.a)(D,2),_=A[0],I=A[1],L=Object(p.e)();function B(){return(B=Object(d.a)(Object(l.a)().mark((function t(e){var n;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={contractAddress:"0xc4e1a3886A39194ee1E2C66FDB0E03e965cE7838",functionName:"createProposal",abi:[{inputs:[{internalType:"string",name:"_description",type:"string"},{internalType:"address[]",name:"_canVote",type:"address[]"}],name:"createProposal",outputs:[],stateMutability:"nonpayable",type:"function"}],params:{_description:e,_canVote:w}},t.next=3,L.fetch({params:n,onSuccess:function(){console.log("Proposal Succesful"),I(!1)},onError:function(t){alert(t.data.message),I(!1)}});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function q(){return(q=Object(d.a)(Object(l.a)().mark((function t(){var e;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={contractAddress:"0xc4e1a3886A39194ee1E2C66FDB0E03e965cE7838",functionName:"createProposal",abi:[{inputs:[{internalType:"uint256",name:"_id",type:"uint256"}],name:"countVotes",outputs:[],stateMutability:"nonpayable",type:"function"}],params:{_id:m}},t.next=3,L.fetch({params:e,onSuccess:function(){console.log("Votes Counted"),I(!1)},onError:function(t){alert(t.data.message),I(!1)}});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(t){return U.apply(this,arguments)}function U(){return(U=Object(d.a)(Object(l.a)().mark((function t(e){var n,s,a;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=S.Object.extend("ProposalCounts"),(s=new S.Query(n)).equalTo("uid",e),t.next=5,s.first();case 5:if(void 0===(a=t.sent)){t.next=14;break}if(!a.attributes.passed){t.next=11;break}return t.abrupt("return",{color:"green",text:"Passed"});case 11:return t.abrupt("return",{color:"red",text:"Rejected"});case 12:t.next=15;break;case 14:return t.abrupt("return",{color:"blue",text:"Ongoing"});case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(s.useEffect)((function(){if(P){var t=function(){var t=Object(d.a)(Object(l.a)().mark((function t(){var e,n,s,a;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=S.Object.extend("Proposals"),(n=new S.Query(e)).descending("uid_decimal"),t.next=5,n.find();case 5:return s=t.sent,t.next=8,Promise.all(s.map(function(){var t=Object(d.a)(Object(l.a)().mark((function t(e){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e.attributes.uid,t.t1=e.attributes.description,t.t2=f.jsx,t.t3=i.c,t.t4=e.attributes.description,t.next=7,M(e.attributes.uid);case 7:return t.t5=t.sent.color,t.next=10,M(e.attributes.uid);case 10:return t.t6=t.sent.text,t.t7=e.attributes.uid,t.t8=e.attributes.proposer,t.t9={description:t.t4,color:t.t5,text:t.t6,id:t.t7,proposer:t.t8},t.t10=f.jsx,t.t11=j.h,t.next=18,M(e.attributes.uid);case 18:return t.t12=t.sent.color,t.next=21,M(e.attributes.uid);case 21:return t.t13=t.sent.text,t.t14={color:t.t12,text:t.t13},t.t15=(0,t.t10)(t.t11,t.t14),t.t16={to:"#/proposal",state:t.t9,children:t.t15},t.t17=(0,t.t2)(t.t3,t.t16),t.abrupt("return",[t.t0,t.t1,t.t17]);case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 8:a=t.sent,E(a),O(s.length);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e=function(){var t=Object(d.a)(Object(l.a)().mark((function t(){var e,n,s,c;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=S.Object.extend("ProposalCounts"),n=new S.Query(e),t.next=4,n.find();case 4:s=t.sent,c=0,s.forEach((function(t){t.attributes.passed&&c++})),v(s.length),a(c/s.length*100);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(){var t=Object(d.a)(Object(l.a)().mark((function t(){var e,n,s;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={address:"0x2953399124F0cBB46d2CbACD8A89cF0599974963",token_id:"81161822716399968014539241445152277229623459382467601071129120553427913408522",chain:"mumbai"},t.next=3,V.token.getTokenIdOwners(e);case 3:n=t.sent,s=n.result.map((function(t){return t.owner_of})),N(s);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();n(),t(),e()}}),[P]),Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{className:"content",children:Object(f.jsxs)(j.f,{defaultActiveKey:1,tabStyle:"bulbUnion",children:[Object(f.jsx)(j.e,{tabKey:1,tabName:"HOME",children:T&&Object(f.jsxs)("div",{className:"tabContent",children:["Overview",Object(f.jsxs)("div",{className:"widgets",children:[Object(f.jsx)(j.j,{info:o,title:"Proposals Created",style:{width:"100%",font:"Trirong"},children:Object(f.jsxs)("div",{className:"extraWidgetInfo",children:[Object(f.jsx)("div",{className:"extraTitle",children:"Pass Rate"}),Object(f.jsx)("div",{className:"progress",children:Object(f.jsx)("div",{className:"progressPercentage",style:{width:"".concat(n,"%")}})})]})}),Object(f.jsx)(j.j,{info:w.length,title:"Eligible Voters"}),Object(f.jsx)(j.j,{info:o-m,title:"Ongoing Proposals"})]}),"Recent Proposals",Object(f.jsx)("div",{style:{marginTop:"30px"},children:Object(f.jsx)(j.g,{columnsConfig:"10% 70% 20%",data:T,header:[Object(f.jsx)("span",{children:"ID"}),Object(f.jsx)("span",{children:"Description"}),Object(f.jsx)("span",{children:"Status"})],pageSize:3})})]})}),Object(f.jsx)(j.e,{tabKey:2,tabName:"New",children:Object(f.jsx)("div",{className:"tabContent",children:Object(f.jsx)(j.c,{style:{marginTop:"50px",width:"500px",position:"absolute",top:"0%",right:"20%"},buttonConfig:{isLoading:_,loadingText:"Submitting Proposal",text:"Submit",theme:"secondary"},data:[{inputWidth:"100%",name:"New Proposal",type:"textarea",validation:{required:!0},value:""}],onSubmit:function(t){I(!0),function(t){B.apply(this,arguments)}(t.data[0].inputResult)},title:"Create a New Proposal"})})}),Object(f.jsx)(j.e,{tabKey:3,tabName:"Result",children:Object(f.jsx)("div",{className:"tabContent",children:Object(f.jsx)(j.c,Object(u.a)({title:"Count Votes",style:{marginTop:"50px",width:"50%",position:"absolute",top:"10%",right:"25%"},buttonConfig:{isLoading:_,loadingText:"Counting Votes",text:"Submit",theme:"secondary"},data:[{inputWidth:"100%",name:"Count Votes",type:"textarea",validation:{required:!0},value:""}],onSubmit:function(t){I(!0),function(){q.apply(this,arguments)}(t.data[0].countConducted)}},"title","Enter the ID of the proposal"))})})]})})})},x=function(){var t=Object(o.e)().state,e=Object(p.b)(),n=e.Moralis,a=e.isInitialized,c=Object(s.useState)(),r=Object(b.a)(c,2),u=r[0],O=r[1],x=Object(s.useState)(0),h=Object(b.a)(x,2),m=h[0],v=h[1],g=Object(s.useState)(0),y=Object(b.a)(g,2),w=y[0],N=y[1],C=Object(s.useState)([]),S=Object(b.a)(C,2),P=S[0],k=S[1],F=Object(s.useState)(!1),T=Object(b.a)(F,2),E=T[0],V=T[1],D=Object(p.e)();function A(t){return _.apply(this,arguments)}function _(){return(_=Object(d.a)(Object(l.a)().mark((function e(n){var s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={contractAddress:"0xc4e1a3886A39194ee1E2C66FDB0E03e965cE7838",functionName:"voteOnProposal",abi:[{inputs:[{internalType:"uint256",name:"_id",type:"uint256"},{internalType:"bool",name:"_vote",type:"bool"}],name:"voteOnProposal",outputs:[],stateMutability:"nonpayable",type:"function"}],params:{_id:t.id,_vote:n}},e.next=3,D.fetch({params:s,onSuccess:function(){console.log("Vote Cast Succesfully"),V(!1)},onError:function(t){alert(t.data.message),V(!1)}});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){if(a){var e=function(){var e=Object(d.a)(Object(l.a)().mark((function e(){var s,a,c,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.Object.extend("Votes"),(a=new n.Query(s)).equalTo("proposal",t.id),a.descending("createdAt"),e.next=6,a.find();case 6:(c=e.sent).length>0&&(O(c[0].attributes),N((Number(c[0].attributes.votesDown)/(Number(c[0].attributes.votesDown)+Number(c[0].attributes.votesUp))*100).toFixed(0)),v((Number(c[0].attributes.votesUp)/(Number(c[0].attributes.votesDown)+Number(c[0].attributes.votesUp))*100).toFixed(0))),r=c.map((function(t){return[t.attributes.voter,Object(f.jsx)(j.d,{fill:t.attributes.votedFor?"#2cc40a":"#d93d3d",size:24,svg:t.attributes.votedFor?"checkmark":"arrowCircleDown"})]})),k(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[a]),Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("div",{className:"contentProposal",children:[Object(f.jsxs)("div",{className:"proposal",children:[Object(f.jsx)(i.c,{to:"#/",children:Object(f.jsxs)("div",{className:"backHome",children:[Object(f.jsx)(j.d,{fill:"#ffffff",size:30,svg:"chevronLeft"}),"Overview"]})}),Object(f.jsx)("div",{children:t.description}),Object(f.jsxs)("div",{className:"proposalOverview",children:[Object(f.jsx)(j.h,{color:t.color,text:t.text}),Object(f.jsxs)("div",{className:"proposer",children:[Object(f.jsx)("span",{children:"Proposed By "}),Object(f.jsx)(j.i,{content:t.proposer,children:Object(f.jsx)(j.a,{seed:t.proposer})})]})]})]}),u&&Object(f.jsxs)("div",{className:"widgets",children:[Object(f.jsx)(j.j,{info:u.votesUp,title:"Votes For",children:Object(f.jsxs)("div",{className:"extraWidgetInfo",children:[Object(f.jsxs)("div",{className:"extraTitle",children:[m,"%"]}),Object(f.jsx)("div",{className:"progress",children:Object(f.jsx)("div",{className:"progressPercentage",style:{width:"".concat(m,"%")}})})]})}),Object(f.jsx)(j.j,{info:u.votesDown,title:"Votes Against",children:Object(f.jsxs)("div",{className:"extraWidgetInfo",children:[Object(f.jsxs)("div",{className:"extraTitle",children:[w,"%"]}),Object(f.jsx)("div",{className:"progress",children:Object(f.jsx)("div",{className:"progressPercentage",style:{width:"".concat(w,"%")}})})]})})]}),Object(f.jsxs)("div",{className:"votesDiv",children:[Object(f.jsx)(j.g,{style:{width:"60%"},columnsConfig:"90% 10%",data:P,header:[Object(f.jsx)("span",{children:"Address"}),Object(f.jsx)("span",{children:"Vote"})],pageSize:5}),Object(f.jsx)(j.c,{isDisabled:"Ongoing"!==t.text,style:{width:"35%",height:"250px",border:"1px solid rgba(6, 158, 252, 0.2)"},buttonConfig:{isLoading:E,loadingText:"Casting Vote",text:"Vote",theme:"secondary"},data:[{inputWidth:"100%",name:"Cast Vote",options:["For","Against"],type:"radios",validation:{required:!0}}],onSubmit:function(t){"For"===t.data[0].inputResult[0]?A(!0):A(!1),V(!0)},title:"Cast Vote"})]})]})})},h=n.p+"static/media/polygon.1140771b.png",m=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)("img",{width:"40px",src:h,alt:"logo"}),Object(f.jsx)(j.b,{})]}),Object(f.jsx)(i.b,{children:Object(f.jsxs)(o.c,{children:[Object(f.jsx)(o.a,{exact:!0,path:"#/",element:Object(f.jsx)(O,{})}),Object(f.jsx)(o.a,{exact:!0,path:"#/proposal",element:Object(f.jsx)(x,{})})]})})]})},v=function(t){t&&t instanceof Function&&n.e(18).then(n.bind(null,1605)).then((function(e){var n=e.getCLS,s=e.getFID,a=e.getFCP,c=e.getLCP,r=e.getTTFB;n(t),s(t),a(t),c(t),r(t)}))};r.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(p.a,{appId:"cZIfVQ7F9wLYaNHdLanP6jPjsbT4mr66H2ULFq38",serverUrl:"https://isqp8vrjdkke.usemoralis.com:2053/server",children:Object(f.jsx)(i.a,{basename:"/onlinepolling",children:Object(f.jsx)(m,{})})})}),document.getElementById("root")),v()},382:function(t,e,n){},652:function(t,e,n){},653:function(t,e,n){},950:function(t,e){},958:function(t,e){},960:function(t,e){},961:function(t,e){},962:function(t,e){},963:function(t,e){},964:function(t,e){},965:function(t,e){},966:function(t,e){},988:function(t,e){}},[[1340,6,7]]]);
//# sourceMappingURL=main.8d734a86.chunk.js.map